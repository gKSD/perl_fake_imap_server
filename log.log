2014/11/01 10:59:54 FUNCTION do_parse,$VAR1 = {};
2014/11/01 10:59:54 LINE is imap
2014/11/01 10:59:54 brackets: $VAR1 = '}';
2014/11/01 10:59:54 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/01 10:59:54 FUNCTION do_parse,$VAR1 = {};
2014/11/01 10:59:54 LINE is login:
2014/11/01 10:59:54 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 10:59:54 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/01 10:59:54 FUNCTION do_parse,$VAR1 = [];
2014/11/01 10:59:54 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 10:59:54 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 10:59:54 LINE is capability
2014/11/01 10:59:54 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 10:59:54 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 10:59:54 FUNCTION do_parse,$VAR1 = [];
2014/11/01 10:59:54 LINE is * CAPABILITY FAKE IMAP
2014/11/01 10:59:54 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 10:59:54 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 10:59:54 LINE is test
2014/11/01 10:59:54 brackets: $VAR1 = ']';
2014/11/01 10:59:54 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 10:59:54 FUNCTION do_parse,$VAR1 = [];
2014/11/01 10:59:54 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 10:59:54 FUNCTION do_parse,$VAR1 = {};
2014/11/01 10:59:54 LINE is Inbox: 
2014/11/01 10:59:54 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 10:59:54 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/01 10:59:54 FUNCTION do_parse,$VAR1 = {};
2014/11/01 10:59:54 LINE is uids
2014/11/01 10:59:54 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 10:59:54 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 10:59:54 FUNCTION do_parse,$VAR1 = {};
2014/11/01 10:59:54 LINE is 001 [seen, recent],
2014/11/01 10:59:54 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 10:59:54 LINE is 003 [recent],
2014/11/01 10:59:54 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 10:59:54 LINE is 005 [RECENT]
2014/11/01 10:59:54 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 10:59:54 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 10:59:54 LINE is flags [ hashnochildren, noselect]
2014/11/01 10:59:54 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 10:59:54 LINE is uidvalidity : 13123
2014/11/01 10:59:54 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 10:59:54 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 10:59:54 LINE is test
2014/11/01 10:59:54 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 10:59:54 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 10:59:54 FUNCTION do_parse,$VAR1 = {};
2014/11/01 10:59:54 LINE is uids
2014/11/01 10:59:54 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 10:59:54 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 10:59:54 FUNCTION do_parse,$VAR1 = {};
2014/11/01 10:59:54 LINE is 10 [recent],
2014/11/01 10:59:54 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 10:59:54 LINE is 11 [recent],
2014/11/01 10:59:54 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 10:59:54 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/01 10:59:54 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 10:59:54 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 10:59:54 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 10:59:54 FUNCTION do_parse,$VAR1 = {};
2014/11/01 10:59:54 LINE is inbox
2014/11/01 10:59:54 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 10:59:54 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/01 10:59:54 FUNCTION do_parse,$VAR1 = {};
2014/11/01 10:59:54 LINE is uids
2014/11/01 10:59:54 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 10:59:54 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 10:59:54 FUNCTION do_parse,$VAR1 = {};
2014/11/01 10:59:54 LINE is 002 [seen,answered],
2014/11/01 10:59:54 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/01 10:59:54 LINE is 005
2014/11/01 10:59:54 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/01 10:59:54 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/01 10:59:54 FUNCTION do_parse,$VAR1 = [];
2014/11/01 10:59:54 LINE is seen,
2014/11/01 10:59:54 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,'
                   ]
        };
2014/11/01 10:59:54 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,'
                               ]
                    }
        };
2014/11/01 10:59:54 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 10:59:54 LINE is test
2014/11/01 10:59:54 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 10:59:54 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 10:59:54 FUNCTION do_parse,$VAR1 = {};
2014/11/01 10:59:54 LINE is uids: [10]
2014/11/01 10:59:54 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/01 10:59:54 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 10:59:54 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 10:59:54 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 10:59:54 LINE is result
2014/11/01 10:59:54 brackets: $VAR1 = '}';
2014/11/01 10:59:54 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/01 10:59:54 FUNCTION do_parse,$VAR1 = {};
2014/11/01 10:59:54 LINE is 1
2014/11/01 10:59:54 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 10:59:54 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/01 10:59:54 FUNCTION do_parse,$VAR1 = {};
2014/11/01 10:59:54 LINE is qqqq [123]
2014/11/01 10:59:54 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/01 10:59:54 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/01 10:59:54 LINE is 2
2014/11/01 10:59:54 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 10:59:54 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/01 10:59:54 FUNCTION do_parse,$VAR1 = {};
2014/11/01 10:59:54 LINE is qqqq [567]
2014/11/01 10:59:54 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/01 10:59:54 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 10:59:54 LINE is total
2014/11/01 10:59:54 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 10:59:54 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 10:59:54 FUNCTION do_parse,$VAR1 = {};
2014/11/01 10:59:54 LINE is inbox: [002, 005]
2014/11/01 10:59:54 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 10:59:54 LINE is test: [10]
2014/11/01 10:59:54 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 10:59:54 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 10:59:54 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/01 10:59:54 OK, parsing completed
2014/11/01 10:59:54 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/01 12:48:12 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:12 LINE is imap
2014/11/01 12:48:12 brackets: $VAR1 = '}';
2014/11/01 12:48:12 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/01 12:48:12 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:12 LINE is login:
2014/11/01 12:48:12 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 12:48:12 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/01 12:48:12 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:48:12 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 12:48:12 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 12:48:12 LINE is capability
2014/11/01 12:48:12 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 12:48:12 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 12:48:12 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:48:12 LINE is * CAPABILITY FAKE IMAP
2014/11/01 12:48:12 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 12:48:12 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 12:48:12 LINE is test
2014/11/01 12:48:13 brackets: $VAR1 = ']';
2014/11/01 12:48:13 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 12:48:13 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:48:13 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 12:48:13 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:13 LINE is Inbox: 
2014/11/01 12:48:13 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:48:13 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/01 12:48:13 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:13 LINE is uids
2014/11/01 12:48:13 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 12:48:13 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 12:48:13 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:13 LINE is 001 [seen, recent],
2014/11/01 12:48:13 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 12:48:13 LINE is 003 [recent],
2014/11/01 12:48:13 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 12:48:13 LINE is 005 [RECENT]
2014/11/01 12:48:13 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 12:48:13 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 12:48:13 LINE is flags [ hashnochildren, noselect]
2014/11/01 12:48:13 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 12:48:13 LINE is uidvalidity : 13123
2014/11/01 12:48:13 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 12:48:13 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 12:48:13 LINE is test
2014/11/01 12:48:13 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:48:13 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 12:48:13 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:13 LINE is uids
2014/11/01 12:48:13 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 12:48:13 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 12:48:13 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:13 LINE is 10 [recent],
2014/11/01 12:48:13 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 12:48:13 LINE is 11 [recent],
2014/11/01 12:48:13 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 12:48:13 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/01 12:48:13 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 12:48:13 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 12:48:13 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 12:48:13 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:13 LINE is inbox
2014/11/01 12:48:13 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:48:13 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/01 12:48:13 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:13 LINE is uids
2014/11/01 12:48:13 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 12:48:13 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 12:48:13 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:13 LINE is 002 [seen,answered],
2014/11/01 12:48:13 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/01 12:48:13 LINE is 005
2014/11/01 12:48:13 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/01 12:48:13 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/01 12:48:13 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:48:13 LINE is seen,
2014/11/01 12:48:13 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,'
                   ]
        };
2014/11/01 12:48:13 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,'
                               ]
                    }
        };
2014/11/01 12:48:13 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 12:48:13 LINE is test
2014/11/01 12:48:13 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:48:13 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 12:48:13 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:13 LINE is uids: [10]
2014/11/01 12:48:13 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/01 12:48:13 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 12:48:13 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 12:48:13 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 12:48:13 LINE is result
2014/11/01 12:48:13 brackets: $VAR1 = '}';
2014/11/01 12:48:13 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/01 12:48:13 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:13 LINE is 1
2014/11/01 12:48:13 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 12:48:13 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/01 12:48:13 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:13 LINE is qqqq [123]
2014/11/01 12:48:13 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/01 12:48:13 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/01 12:48:13 LINE is 2
2014/11/01 12:48:13 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 12:48:13 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/01 12:48:13 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:13 LINE is qqqq [567]
2014/11/01 12:48:13 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/01 12:48:13 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 12:48:13 LINE is total
2014/11/01 12:48:13 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 12:48:13 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 12:48:13 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:13 LINE is inbox: [002, 005]
2014/11/01 12:48:13 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 12:48:13 LINE is test: [10]
2014/11/01 12:48:13 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 12:48:13 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 12:48:13 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/01 12:48:13 OK, parsing completed
2014/11/01 12:48:13 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/01 12:48:53 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:53 LINE is imap
2014/11/01 12:48:53 brackets: $VAR1 = '}';
2014/11/01 12:48:53 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/01 12:48:53 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:53 LINE is login:
2014/11/01 12:48:53 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 12:48:53 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/01 12:48:53 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:48:53 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 12:48:53 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 12:48:53 LINE is capability
2014/11/01 12:48:53 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 12:48:53 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 12:48:53 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:48:53 LINE is * CAPABILITY FAKE IMAP
2014/11/01 12:48:53 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 12:48:53 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 12:48:53 LINE is test
2014/11/01 12:48:53 brackets: $VAR1 = ']';
2014/11/01 12:48:53 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 12:48:53 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:48:53 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 12:48:53 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:53 LINE is Inbox: 
2014/11/01 12:48:53 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:48:53 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/01 12:48:53 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:53 LINE is uids
2014/11/01 12:48:53 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 12:48:53 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 12:48:53 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:53 LINE is 001 [seen, recent],
2014/11/01 12:48:53 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 12:48:53 LINE is 003 [recent],
2014/11/01 12:48:53 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 12:48:53 LINE is 005 [RECENT]
2014/11/01 12:48:53 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 12:48:53 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 12:48:53 LINE is flags [ hashnochildren, noselect]
2014/11/01 12:48:53 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 12:48:53 LINE is uidvalidity : 13123
2014/11/01 12:48:53 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 12:48:53 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 12:48:53 LINE is test
2014/11/01 12:48:53 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:48:53 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 12:48:53 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:53 LINE is uids
2014/11/01 12:48:53 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 12:48:53 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 12:48:53 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:53 LINE is 10 [recent],
2014/11/01 12:48:53 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 12:48:53 LINE is 11 [recent],
2014/11/01 12:48:53 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 12:48:53 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/01 12:48:53 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 12:48:53 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 12:48:53 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 12:48:53 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:53 LINE is inbox
2014/11/01 12:48:53 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:48:53 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/01 12:48:53 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:53 LINE is uids
2014/11/01 12:48:53 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 12:48:53 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 12:48:53 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:53 LINE is 002 [seen,answered],
2014/11/01 12:48:53 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/01 12:48:53 LINE is 005
2014/11/01 12:48:53 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/01 12:48:53 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/01 12:48:53 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:48:53 LINE is seen,
2014/11/01 12:48:53 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,'
                   ]
        };
2014/11/01 12:48:53 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,'
                               ]
                    }
        };
2014/11/01 12:48:53 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 12:48:53 LINE is test
2014/11/01 12:48:53 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:48:53 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 12:48:53 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:53 LINE is uids: [10]
2014/11/01 12:48:53 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/01 12:48:53 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 12:48:53 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 12:48:53 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 12:48:53 LINE is result
2014/11/01 12:48:53 brackets: $VAR1 = '}';
2014/11/01 12:48:53 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/01 12:48:53 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:53 LINE is 1
2014/11/01 12:48:53 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 12:48:53 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/01 12:48:53 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:53 LINE is qqqq [123]
2014/11/01 12:48:53 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/01 12:48:53 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/01 12:48:53 LINE is 2
2014/11/01 12:48:53 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 12:48:53 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/01 12:48:53 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:53 LINE is qqqq [567]
2014/11/01 12:48:53 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/01 12:48:53 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 12:48:53 LINE is total
2014/11/01 12:48:53 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 12:48:53 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 12:48:53 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:48:53 LINE is inbox: [002, 005]
2014/11/01 12:48:53 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 12:48:53 LINE is test: [10]
2014/11/01 12:48:53 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 12:48:53 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 12:48:53 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/01 12:48:53 OK, parsing completed
2014/11/01 12:48:53 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/01 12:50:04 mode = 1
2014/11/01 12:50:04 client connected to pid 17770
2014/11/01 12:50:04 <<<: 1 LOGIN test@localhost "123123123"
2014/11/01 12:50:04 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 12:50:04 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 12:50:04 >>>: OK Authentication successful
2014/11/01 12:50:04 <<<: 2 CAPABILITY
2014/11/01 12:50:04 >>>: * CAPABILITY FAKE IMAP
2014/11/01 12:50:04 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 12:50:04 >>>: OK CAPABILITY completed
2014/11/01 12:50:04 <<<: 3 XLIST "" *
2014/11/01 12:50:04 >>>: * XLIST () "/" "test"
2014/11/01 12:50:04 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/01 12:50:04 >>>: OK LIST completed
2014/11/01 12:50:04 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 12:50:04 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/01 12:50:04 >>>: OK STATUS completed
2014/11/01 12:50:04 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 12:50:04 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/01 12:50:04 >>>: OK STATUS completed
2014/11/01 12:50:04 <<<: 6 SELECT "Inbox"
2014/11/01 12:50:04 >>>: FLAGS ()
2014/11/01 12:50:04 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 12:50:04 >>>: 0 EXISTS
2014/11/01 12:50:04 >>>: 0 RECENT
2014/11/01 12:50:04 >>>: OK [UNSEEN 0]
2014/11/01 12:50:04 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/01 12:50:04 >>>: OK [UIDNEXT 1] Predicted next UID
2014/11/01 12:50:04 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 12:50:04 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 12:50:24 <<<: 8 SELECT "test"
2014/11/01 12:50:24 >>>: FLAGS ()
2014/11/01 12:50:24 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 12:50:24 >>>: 0 EXISTS
2014/11/01 12:50:24 >>>: 0 RECENT
2014/11/01 12:50:24 >>>: OK [UNSEEN 0]
2014/11/01 12:50:24 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/01 12:50:24 >>>: OK [UIDNEXT 1] Predicted next UID
2014/11/01 12:50:24 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 12:50:24 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 12:50:44 <<<: 10 LOGOUT
2014/11/01 12:53:38 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:53:38 LINE is imap
2014/11/01 12:53:38 brackets: $VAR1 = '}';
2014/11/01 12:53:38 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/01 12:53:38 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:53:38 LINE is login:
2014/11/01 12:53:38 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 12:53:38 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/01 12:53:38 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:53:38 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 12:53:38 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 12:53:38 LINE is capability
2014/11/01 12:53:38 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 12:53:38 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 12:53:38 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:53:38 LINE is * CAPABILITY FAKE IMAP
2014/11/01 12:53:38 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 12:53:38 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 12:53:38 LINE is test
2014/11/01 12:53:38 brackets: $VAR1 = ']';
2014/11/01 12:53:38 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 12:53:38 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:53:38 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 12:53:38 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:53:38 LINE is Inbox: 
2014/11/01 12:53:38 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:53:38 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/01 12:53:38 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:53:38 LINE is uids
2014/11/01 12:53:38 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 12:53:38 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 12:53:38 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:53:38 LINE is 001 [seen, recent],
2014/11/01 12:53:38 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 12:53:38 LINE is 003 [recent],
2014/11/01 12:53:38 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 12:53:38 LINE is 005 [RECENT]
2014/11/01 12:53:38 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 12:53:38 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 12:53:38 LINE is flags [ hashnochildren, noselect]
2014/11/01 12:53:38 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 12:53:38 LINE is uidvalidity : 13123
2014/11/01 12:53:38 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 12:53:38 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 12:53:38 LINE is test
2014/11/01 12:53:38 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:53:38 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 12:53:38 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:53:38 LINE is uids
2014/11/01 12:53:38 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 12:53:38 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 12:53:38 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:53:38 LINE is 10 [recent],
2014/11/01 12:53:38 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 12:53:38 LINE is 11 [recent],
2014/11/01 12:53:38 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 12:53:38 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/01 12:53:38 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 12:53:38 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 12:53:38 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 12:53:38 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:53:38 LINE is inbox
2014/11/01 12:53:38 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:53:38 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/01 12:53:38 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:53:38 LINE is uids
2014/11/01 12:53:38 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 12:53:38 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 12:53:38 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:53:38 LINE is 002 [seen,answered],
2014/11/01 12:53:38 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/01 12:53:38 LINE is 005
2014/11/01 12:53:38 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/01 12:53:38 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/01 12:53:38 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:53:38 LINE is seen,
2014/11/01 12:53:38 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,'
                   ]
        };
2014/11/01 12:53:38 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,'
                               ]
                    }
        };
2014/11/01 12:53:38 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 12:53:38 LINE is test
2014/11/01 12:53:38 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:53:38 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 12:53:38 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:53:38 LINE is uids: [10]
2014/11/01 12:53:38 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/01 12:53:38 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 12:53:38 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 12:53:38 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 12:53:38 LINE is result
2014/11/01 12:53:38 brackets: $VAR1 = '}';
2014/11/01 12:53:38 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/01 12:53:38 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:53:38 LINE is 1
2014/11/01 12:53:38 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 12:53:38 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/01 12:53:38 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:53:38 LINE is qqqq [123]
2014/11/01 12:53:38 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/01 12:53:38 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/01 12:53:38 LINE is 2
2014/11/01 12:53:38 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 12:53:38 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/01 12:53:38 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:53:38 LINE is qqqq [567]
2014/11/01 12:53:38 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/01 12:53:38 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 12:53:38 LINE is total
2014/11/01 12:53:38 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 12:53:38 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 12:53:38 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:53:38 LINE is inbox: [002, 005]
2014/11/01 12:53:38 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 12:53:38 LINE is test: [10]
2014/11/01 12:53:38 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 12:53:38 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 12:53:38 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/01 12:53:38 OK, parsing completed
2014/11/01 12:53:38 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/01 12:53:47 mode = 1
2014/11/01 12:53:47 client connected to pid 18487
2014/11/01 12:53:47 <<<: 1 LOGIN test@localhost "123123123"
2014/11/01 12:53:47 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 12:53:47 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 12:53:47 >>>: OK Authentication successful
2014/11/01 12:53:47 <<<: 2 CAPABILITY
2014/11/01 12:53:47 >>>: * CAPABILITY FAKE IMAP
2014/11/01 12:53:47 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 12:53:47 >>>: OK CAPABILITY completed
2014/11/01 12:53:47 <<<: 3 XLIST "" *
2014/11/01 12:53:47 >>>: * XLIST () "/" "test"
2014/11/01 12:53:47 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/01 12:53:47 >>>: OK LIST completed
2014/11/01 12:53:47 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 12:53:47 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/01 12:53:47 >>>: OK STATUS completed
2014/11/01 12:53:47 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 12:53:47 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/01 12:53:47 >>>: OK STATUS completed
2014/11/01 12:53:47 <<<: 6 SELECT "Inbox"
2014/11/01 12:53:47 >>>: FLAGS ()
2014/11/01 12:53:47 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 12:53:47 qewrty 
2014/11/01 12:53:47 >>>: 0 EXISTS
2014/11/01 12:53:47 >>>: 0 RECENT
2014/11/01 12:53:47 >>>: OK [UNSEEN 0]
2014/11/01 12:53:47 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/01 12:53:47 >>>: OK [UIDNEXT 1] Predicted next UID
2014/11/01 12:53:47 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 12:53:47 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 12:54:07 <<<: 8 SELECT "test"
2014/11/01 12:54:07 >>>: FLAGS ()
2014/11/01 12:54:07 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 12:54:07 qewrty 
2014/11/01 12:54:07 >>>: 0 EXISTS
2014/11/01 12:54:07 >>>: 0 RECENT
2014/11/01 12:54:07 >>>: OK [UNSEEN 0]
2014/11/01 12:54:07 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/01 12:54:07 >>>: OK [UIDNEXT 1] Predicted next UID
2014/11/01 12:54:07 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 12:54:07 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 12:54:27 <<<: 10 LOGOUT
2014/11/01 12:55:18 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:18 LINE is imap
2014/11/01 12:55:18 brackets: $VAR1 = '}';
2014/11/01 12:55:18 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/01 12:55:18 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:18 LINE is login:
2014/11/01 12:55:18 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 12:55:18 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/01 12:55:18 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:55:18 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 12:55:18 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 12:55:18 LINE is capability
2014/11/01 12:55:18 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 12:55:18 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 12:55:18 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:55:18 LINE is * CAPABILITY FAKE IMAP
2014/11/01 12:55:18 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 12:55:18 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 12:55:18 LINE is test
2014/11/01 12:55:18 brackets: $VAR1 = ']';
2014/11/01 12:55:18 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 12:55:18 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:55:18 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 12:55:18 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:18 LINE is Inbox: 
2014/11/01 12:55:18 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:55:18 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/01 12:55:18 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:18 LINE is uids
2014/11/01 12:55:18 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 12:55:18 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 12:55:18 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:18 LINE is 001 [seen, recent],
2014/11/01 12:55:18 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 12:55:18 LINE is 003 [recent],
2014/11/01 12:55:18 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 12:55:18 LINE is 005 [RECENT]
2014/11/01 12:55:18 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 12:55:18 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 12:55:18 LINE is flags [ hashnochildren, noselect]
2014/11/01 12:55:18 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 12:55:18 LINE is uidvalidity : 13123
2014/11/01 12:55:18 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 12:55:18 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 12:55:18 LINE is test
2014/11/01 12:55:18 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:55:18 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 12:55:18 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:18 LINE is uids
2014/11/01 12:55:18 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 12:55:18 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 12:55:18 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:18 LINE is 10 [recent],
2014/11/01 12:55:18 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 12:55:18 LINE is 11 [recent],
2014/11/01 12:55:18 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 12:55:18 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/01 12:55:18 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 12:55:18 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 12:55:18 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 12:55:18 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:18 LINE is inbox
2014/11/01 12:55:18 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:55:18 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/01 12:55:18 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:18 LINE is uids
2014/11/01 12:55:18 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 12:55:18 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 12:55:18 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:18 LINE is 002 [seen,answered],
2014/11/01 12:55:18 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/01 12:55:18 LINE is 005
2014/11/01 12:55:18 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/01 12:55:18 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/01 12:55:18 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:55:18 LINE is seen,
2014/11/01 12:55:18 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,'
                   ]
        };
2014/11/01 12:55:18 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,'
                               ]
                    }
        };
2014/11/01 12:55:18 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 12:55:18 LINE is test
2014/11/01 12:55:18 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:55:18 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 12:55:18 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:18 LINE is uids: [10]
2014/11/01 12:55:18 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/01 12:55:18 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 12:55:18 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 12:55:18 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 12:55:18 LINE is result
2014/11/01 12:55:18 brackets: $VAR1 = '}';
2014/11/01 12:55:18 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/01 12:55:18 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:18 LINE is 1
2014/11/01 12:55:18 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 12:55:18 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/01 12:55:18 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:18 LINE is qqqq [123]
2014/11/01 12:55:18 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/01 12:55:18 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/01 12:55:18 LINE is 2
2014/11/01 12:55:18 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 12:55:18 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/01 12:55:18 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:18 LINE is qqqq [567]
2014/11/01 12:55:18 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/01 12:55:18 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 12:55:18 LINE is total
2014/11/01 12:55:18 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 12:55:18 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 12:55:18 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:18 LINE is inbox: [002, 005]
2014/11/01 12:55:18 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 12:55:18 LINE is test: [10]
2014/11/01 12:55:18 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 12:55:18 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 12:55:18 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/01 12:55:18 OK, parsing completed
2014/11/01 12:55:18 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/01 12:55:32 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:32 LINE is imap
2014/11/01 12:55:32 brackets: $VAR1 = '}';
2014/11/01 12:55:32 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/01 12:55:32 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:32 LINE is login:
2014/11/01 12:55:32 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 12:55:32 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/01 12:55:32 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:55:32 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 12:55:32 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 12:55:32 LINE is capability
2014/11/01 12:55:32 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 12:55:32 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 12:55:32 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:55:32 LINE is * CAPABILITY FAKE IMAP
2014/11/01 12:55:32 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 12:55:32 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 12:55:32 LINE is test
2014/11/01 12:55:32 brackets: $VAR1 = ']';
2014/11/01 12:55:32 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 12:55:32 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:55:32 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 12:55:32 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:32 LINE is Inbox: 
2014/11/01 12:55:32 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:55:32 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/01 12:55:32 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:32 LINE is uids
2014/11/01 12:55:32 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 12:55:32 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 12:55:32 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:32 LINE is 001 [seen, recent],
2014/11/01 12:55:32 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 12:55:32 LINE is 003 [recent],
2014/11/01 12:55:32 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 12:55:32 LINE is 005 [RECENT]
2014/11/01 12:55:32 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 12:55:32 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 12:55:32 LINE is flags [ hashnochildren, noselect]
2014/11/01 12:55:32 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 12:55:32 LINE is uidvalidity : 13123
2014/11/01 12:55:32 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 12:55:32 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 12:55:32 LINE is test
2014/11/01 12:55:32 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:55:32 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 12:55:32 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:32 LINE is uids
2014/11/01 12:55:32 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 12:55:32 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 12:55:32 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:32 LINE is 10 [recent],
2014/11/01 12:55:32 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 12:55:32 LINE is 11 [recent],
2014/11/01 12:55:32 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 12:55:32 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/01 12:55:32 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 12:55:32 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 12:55:32 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 12:55:32 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:32 LINE is inbox
2014/11/01 12:55:32 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:55:32 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/01 12:55:32 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:32 LINE is uids
2014/11/01 12:55:32 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 12:55:32 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 12:55:32 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:32 LINE is 002 [seen,answered],
2014/11/01 12:55:32 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/01 12:55:32 LINE is 005
2014/11/01 12:55:32 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/01 12:55:32 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/01 12:55:32 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:55:32 LINE is seen,
2014/11/01 12:55:32 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,'
                   ]
        };
2014/11/01 12:55:32 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,'
                               ]
                    }
        };
2014/11/01 12:55:32 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 12:55:32 LINE is test
2014/11/01 12:55:32 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:55:32 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 12:55:32 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:32 LINE is uids: [10]
2014/11/01 12:55:32 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/01 12:55:32 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 12:55:32 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 12:55:32 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 12:55:32 LINE is result
2014/11/01 12:55:32 brackets: $VAR1 = '}';
2014/11/01 12:55:32 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/01 12:55:32 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:32 LINE is 1
2014/11/01 12:55:32 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 12:55:32 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/01 12:55:32 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:32 LINE is qqqq [123]
2014/11/01 12:55:32 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/01 12:55:32 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/01 12:55:32 LINE is 2
2014/11/01 12:55:32 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 12:55:32 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/01 12:55:32 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:32 LINE is qqqq [567]
2014/11/01 12:55:32 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/01 12:55:32 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 12:55:32 LINE is total
2014/11/01 12:55:32 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 12:55:32 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 12:55:32 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:55:32 LINE is inbox: [002, 005]
2014/11/01 12:55:32 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 12:55:32 LINE is test: [10]
2014/11/01 12:55:32 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 12:55:32 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 12:55:32 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/01 12:55:32 OK, parsing completed
2014/11/01 12:55:32 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/01 12:55:35 mode = 1
2014/11/01 12:55:35 client connected to pid 18798
2014/11/01 12:55:35 <<<: 1 LOGIN test@localhost "123123123"
2014/11/01 12:55:35 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 12:55:35 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 12:55:35 >>>: OK Authentication successful
2014/11/01 12:55:35 <<<: 2 CAPABILITY
2014/11/01 12:55:35 >>>: * CAPABILITY FAKE IMAP
2014/11/01 12:55:35 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 12:55:35 >>>: OK CAPABILITY completed
2014/11/01 12:55:35 <<<: 3 XLIST "" *
2014/11/01 12:55:35 >>>: * XLIST () "/" "test"
2014/11/01 12:55:35 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/01 12:55:35 >>>: OK LIST completed
2014/11/01 12:55:35 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 12:55:35 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/01 12:55:35 >>>: OK STATUS completed
2014/11/01 12:55:35 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 12:55:35 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/01 12:55:35 >>>: OK STATUS completed
2014/11/01 12:55:35 <<<: 6 SELECT "Inbox"
2014/11/01 12:55:35 >>>: FLAGS ()
2014/11/01 12:55:35 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 12:55:35 qewrty SELECT
2014/11/01 12:55:35 >>>: 0 EXISTS
2014/11/01 12:55:35 >>>: 0 RECENT
2014/11/01 12:55:35 >>>: OK [UNSEEN 0]
2014/11/01 12:55:35 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/01 12:55:35 >>>: OK [UIDNEXT 1] Predicted next UID
2014/11/01 12:55:35 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 12:55:35 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 12:55:55 <<<: 8 SELECT "test"
2014/11/01 12:55:55 >>>: FLAGS ()
2014/11/01 12:55:55 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 12:55:55 qewrty SELECT
2014/11/01 12:55:55 >>>: 0 EXISTS
2014/11/01 12:55:55 >>>: 0 RECENT
2014/11/01 12:55:55 >>>: OK [UNSEEN 0]
2014/11/01 12:55:55 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/01 12:55:55 >>>: OK [UIDNEXT 1] Predicted next UID
2014/11/01 12:55:55 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 12:55:55 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 12:56:15 <<<: 10 LOGOUT
2014/11/01 12:56:28 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:56:28 LINE is imap
2014/11/01 12:56:28 brackets: $VAR1 = '}';
2014/11/01 12:56:28 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/01 12:56:28 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:56:28 LINE is login:
2014/11/01 12:56:28 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 12:56:28 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/01 12:56:28 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:56:28 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 12:56:28 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 12:56:28 LINE is capability
2014/11/01 12:56:28 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 12:56:28 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 12:56:28 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:56:28 LINE is * CAPABILITY FAKE IMAP
2014/11/01 12:56:28 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 12:56:28 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 12:56:28 LINE is test
2014/11/01 12:56:28 brackets: $VAR1 = ']';
2014/11/01 12:56:28 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 12:56:28 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:56:28 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 12:56:28 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:56:28 LINE is Inbox: 
2014/11/01 12:56:28 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:56:28 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/01 12:56:28 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:56:28 LINE is uids
2014/11/01 12:56:28 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 12:56:28 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 12:56:28 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:56:28 LINE is 001 [seen, recent],
2014/11/01 12:56:28 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 12:56:28 LINE is 003 [recent],
2014/11/01 12:56:28 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 12:56:28 LINE is 005 [RECENT]
2014/11/01 12:56:28 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 12:56:28 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 12:56:28 LINE is flags [ hashnochildren, noselect]
2014/11/01 12:56:28 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 12:56:28 LINE is uidvalidity : 13123
2014/11/01 12:56:28 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 12:56:28 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 12:56:28 LINE is test
2014/11/01 12:56:28 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:56:28 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 12:56:28 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:56:28 LINE is uids
2014/11/01 12:56:28 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 12:56:28 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 12:56:28 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:56:28 LINE is 10 [recent],
2014/11/01 12:56:28 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 12:56:28 LINE is 11 [recent],
2014/11/01 12:56:28 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 12:56:28 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/01 12:56:28 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 12:56:28 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 12:56:28 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 12:56:28 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:56:28 LINE is inbox
2014/11/01 12:56:28 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:56:28 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/01 12:56:28 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:56:28 LINE is uids
2014/11/01 12:56:28 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 12:56:28 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 12:56:28 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:56:28 LINE is 002 [seen,answered],
2014/11/01 12:56:28 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/01 12:56:28 LINE is 005
2014/11/01 12:56:28 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/01 12:56:28 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/01 12:56:28 FUNCTION do_parse,$VAR1 = [];
2014/11/01 12:56:28 LINE is seen,
2014/11/01 12:56:28 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,'
                   ]
        };
2014/11/01 12:56:28 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,'
                               ]
                    }
        };
2014/11/01 12:56:28 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 12:56:28 LINE is test
2014/11/01 12:56:28 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 12:56:28 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 12:56:28 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:56:28 LINE is uids: [10]
2014/11/01 12:56:28 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/01 12:56:28 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 12:56:28 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 12:56:28 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 12:56:28 LINE is result
2014/11/01 12:56:28 brackets: $VAR1 = '}';
2014/11/01 12:56:28 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/01 12:56:28 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:56:28 LINE is 1
2014/11/01 12:56:28 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 12:56:28 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/01 12:56:28 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:56:28 LINE is qqqq [123]
2014/11/01 12:56:28 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/01 12:56:28 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/01 12:56:28 LINE is 2
2014/11/01 12:56:28 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 12:56:28 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/01 12:56:28 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:56:28 LINE is qqqq [567]
2014/11/01 12:56:28 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/01 12:56:28 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 12:56:28 LINE is total
2014/11/01 12:56:28 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 12:56:28 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 12:56:28 FUNCTION do_parse,$VAR1 = {};
2014/11/01 12:56:28 LINE is inbox: [002, 005]
2014/11/01 12:56:28 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 12:56:28 LINE is test: [10]
2014/11/01 12:56:28 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 12:56:28 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 12:56:28 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/01 12:56:28 OK, parsing completed
2014/11/01 12:56:28 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/01 12:56:31 mode = 1
2014/11/01 12:56:31 client connected to pid 19016
2014/11/01 12:56:31 <<<: 1 LOGIN test@localhost "123123123"
2014/11/01 12:56:31 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 12:56:31 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 12:56:31 >>>: OK Authentication successful
2014/11/01 12:56:31 <<<: 2 CAPABILITY
2014/11/01 12:56:31 >>>: * CAPABILITY FAKE IMAP
2014/11/01 12:56:31 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 12:56:31 >>>: OK CAPABILITY completed
2014/11/01 12:56:31 <<<: 3 XLIST "" *
2014/11/01 12:56:31 >>>: * XLIST () "/" "test"
2014/11/01 12:56:31 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/01 12:56:31 >>>: OK LIST completed
2014/11/01 12:56:31 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 12:56:31 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/01 12:56:31 >>>: OK STATUS completed
2014/11/01 12:56:31 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 12:56:31 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/01 12:56:31 >>>: OK STATUS completed
2014/11/01 12:56:31 <<<: 6 SELECT "Inbox"
2014/11/01 12:56:31 >>>: FLAGS ()
2014/11/01 12:56:31 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 12:56:31 qewrty "Inbox"
2014/11/01 12:56:31 >>>: 3 EXISTS
2014/11/01 12:56:31 >>>: 3 RECENT
2014/11/01 12:56:31 >>>: OK [UNSEEN 2]
2014/11/01 12:56:31 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/01 12:56:31 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/01 12:56:31 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 12:56:31 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 12:56:51 <<<: 8 SELECT "test"
2014/11/01 12:56:51 >>>: FLAGS ()
2014/11/01 12:56:51 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 12:56:51 qewrty "test"
2014/11/01 12:56:51 >>>: 2 EXISTS
2014/11/01 12:56:51 >>>: 2 RECENT
2014/11/01 12:56:51 >>>: OK [UNSEEN 2]
2014/11/01 12:56:51 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/01 12:56:51 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/01 12:56:51 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 12:56:51 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 12:57:11 <<<: 10 LOGOUT
2014/11/01 13:00:29 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:00:29 LINE is imap
2014/11/01 13:00:29 brackets: $VAR1 = '}';
2014/11/01 13:00:29 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/01 13:00:29 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:00:29 LINE is login:
2014/11/01 13:00:29 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 13:00:29 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/01 13:00:29 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:00:29 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:00:29 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:00:29 LINE is capability
2014/11/01 13:00:29 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 13:00:29 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:00:29 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:00:29 LINE is * CAPABILITY FAKE IMAP
2014/11/01 13:00:29 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:00:29 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:00:29 LINE is test
2014/11/01 13:00:29 brackets: $VAR1 = ']';
2014/11/01 13:00:29 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:00:29 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:00:29 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 13:00:29 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:00:29 LINE is Inbox: 
2014/11/01 13:00:29 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:00:29 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/01 13:00:29 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:00:29 LINE is uids
2014/11/01 13:00:29 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:00:29 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:00:29 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:00:29 LINE is 001 [seen, recent],
2014/11/01 13:00:29 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:00:29 LINE is 003 [recent],
2014/11/01 13:00:29 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:00:29 LINE is 005 [RECENT]
2014/11/01 13:00:29 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:00:29 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:00:29 LINE is flags [ hashnochildren, noselect]
2014/11/01 13:00:29 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:00:29 LINE is uidvalidity : 13123
2014/11/01 13:00:29 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:00:29 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:00:29 LINE is test
2014/11/01 13:00:29 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:00:29 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:00:29 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:00:29 LINE is uids
2014/11/01 13:00:29 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:00:29 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:00:29 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:00:29 LINE is 10 [recent],
2014/11/01 13:00:29 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 13:00:29 LINE is 11 [recent],
2014/11/01 13:00:29 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 13:00:29 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/01 13:00:29 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:00:29 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 13:00:29 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 13:00:29 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:00:29 LINE is inbox
2014/11/01 13:00:29 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:00:29 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/01 13:00:29 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:00:29 LINE is uids
2014/11/01 13:00:29 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:00:29 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:00:29 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:00:29 LINE is 002 [seen,answered],
2014/11/01 13:00:29 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/01 13:00:29 LINE is 005
2014/11/01 13:00:29 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/01 13:00:29 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/01 13:00:29 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:00:29 LINE is seen,
2014/11/01 13:00:29 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,'
                   ]
        };
2014/11/01 13:00:29 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,'
                               ]
                    }
        };
2014/11/01 13:00:29 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:00:29 LINE is test
2014/11/01 13:00:29 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:00:29 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:00:29 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:00:29 LINE is uids: [10]
2014/11/01 13:00:29 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/01 13:00:29 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:00:29 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 13:00:29 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:00:29 LINE is result
2014/11/01 13:00:29 brackets: $VAR1 = '}';
2014/11/01 13:00:29 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/01 13:00:29 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:00:29 LINE is 1
2014/11/01 13:00:29 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:00:29 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/01 13:00:29 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:00:29 LINE is qqqq [123]
2014/11/01 13:00:29 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/01 13:00:29 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/01 13:00:29 LINE is 2
2014/11/01 13:00:29 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:00:29 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/01 13:00:29 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:00:29 LINE is qqqq [567]
2014/11/01 13:00:29 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/01 13:00:29 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:00:29 LINE is total
2014/11/01 13:00:29 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:00:29 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:00:29 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:00:29 LINE is inbox: [002, 005]
2014/11/01 13:00:29 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 13:00:29 LINE is test: [10]
2014/11/01 13:00:29 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 13:00:29 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:00:29 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/01 13:00:29 OK, parsing completed
2014/11/01 13:00:29 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/01 13:00:35 mode = 1
2014/11/01 13:00:35 client connected to pid 19738
2014/11/01 13:00:35 <<<: 1 LOGIN test@localhost "123123123"
2014/11/01 13:00:35 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:00:35 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:00:35 >>>: OK Authentication successful
2014/11/01 13:00:35 <<<: 2 CAPABILITY
2014/11/01 13:00:35 >>>: * CAPABILITY FAKE IMAP
2014/11/01 13:00:35 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:00:35 >>>: OK CAPABILITY completed
2014/11/01 13:00:35 <<<: 3 XLIST "" *
2014/11/01 13:00:35 >>>: * XLIST () "/" "test"
2014/11/01 13:00:35 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/01 13:00:35 >>>: OK LIST completed
2014/11/01 13:00:35 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 13:00:35 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/01 13:00:35 >>>: OK STATUS completed
2014/11/01 13:00:35 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 13:00:35 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/01 13:00:35 >>>: OK STATUS completed
2014/11/01 13:00:35 <<<: 6 SELECT "Inbox"
2014/11/01 13:00:35 >>>: FLAGS ()
2014/11/01 13:00:35 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 13:00:35 qewrty SELECT
2014/11/01 13:00:35 >>>: 0 EXISTS
2014/11/01 13:00:35 >>>: 0 RECENT
2014/11/01 13:00:35 >>>: OK [UNSEEN 0]
2014/11/01 13:00:35 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/01 13:00:35 >>>: OK [UIDNEXT 1] Predicted next UID
2014/11/01 13:00:35 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 13:00:35 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 13:00:47 mode = 1
2014/11/01 13:00:47 client connected to pid 19802
2014/11/01 13:00:47 <<<: 1 LOGIN test@localhost "123123123"
2014/11/01 13:00:47 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:00:47 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:00:47 >>>: OK Authentication successful
2014/11/01 13:00:47 <<<: 2 CAPABILITY
2014/11/01 13:00:47 >>>: * CAPABILITY FAKE IMAP
2014/11/01 13:00:47 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:00:47 >>>: OK CAPABILITY completed
2014/11/01 13:00:47 <<<: 3 XLIST "" *
2014/11/01 13:00:47 >>>: * XLIST () "/" "test"
2014/11/01 13:00:47 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/01 13:00:47 >>>: OK LIST completed
2014/11/01 13:00:47 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 13:00:47 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/01 13:00:47 >>>: OK STATUS completed
2014/11/01 13:00:48 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 13:00:48 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/01 13:00:48 >>>: OK STATUS completed
2014/11/01 13:00:48 <<<: 6 SELECT "Inbox"
2014/11/01 13:00:48 >>>: FLAGS ()
2014/11/01 13:00:48 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 13:00:48 qewrty SELECT
2014/11/01 13:00:48 >>>: 0 EXISTS
2014/11/01 13:00:48 >>>: 0 RECENT
2014/11/01 13:00:48 >>>: OK [UNSEEN 0]
2014/11/01 13:00:48 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/01 13:00:48 >>>: OK [UIDNEXT 1] Predicted next UID
2014/11/01 13:00:48 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 13:00:48 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 13:01:08 <<<: 8 SELECT "test"
2014/11/01 13:01:08 >>>: FLAGS ()
2014/11/01 13:01:08 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 13:01:08 qewrty SELECT
2014/11/01 13:01:08 >>>: 0 EXISTS
2014/11/01 13:01:08 >>>: 0 RECENT
2014/11/01 13:01:08 >>>: OK [UNSEEN 0]
2014/11/01 13:01:08 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/01 13:01:08 >>>: OK [UIDNEXT 1] Predicted next UID
2014/11/01 13:01:08 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 13:01:08 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 13:01:28 <<<: 10 LOGOUT
2014/11/01 13:01:42 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:01:42 LINE is imap
2014/11/01 13:01:42 brackets: $VAR1 = '}';
2014/11/01 13:01:42 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/01 13:01:42 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:01:42 LINE is login:
2014/11/01 13:01:42 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 13:01:42 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/01 13:01:42 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:01:42 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:01:42 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:01:42 LINE is capability
2014/11/01 13:01:42 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 13:01:42 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:01:42 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:01:42 LINE is * CAPABILITY FAKE IMAP
2014/11/01 13:01:42 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:01:42 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:01:42 LINE is test
2014/11/01 13:01:42 brackets: $VAR1 = ']';
2014/11/01 13:01:42 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:01:42 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:01:42 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 13:01:42 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:01:42 LINE is Inbox: 
2014/11/01 13:01:42 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:01:42 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/01 13:01:42 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:01:42 LINE is uids
2014/11/01 13:01:42 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:01:42 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:01:42 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:01:42 LINE is 001 [seen, recent],
2014/11/01 13:01:42 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:01:42 LINE is 003 [recent],
2014/11/01 13:01:42 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:01:42 LINE is 005 [RECENT]
2014/11/01 13:01:42 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:01:42 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:01:42 LINE is flags [ hashnochildren, noselect]
2014/11/01 13:01:42 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:01:42 LINE is uidvalidity : 13123
2014/11/01 13:01:42 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:01:42 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:01:42 LINE is test
2014/11/01 13:01:42 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:01:42 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:01:42 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:01:42 LINE is uids
2014/11/01 13:01:42 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:01:42 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:01:42 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:01:42 LINE is 10 [recent],
2014/11/01 13:01:42 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 13:01:42 LINE is 11 [recent],
2014/11/01 13:01:42 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 13:01:42 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/01 13:01:42 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:01:42 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 13:01:42 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 13:01:42 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:01:42 LINE is inbox
2014/11/01 13:01:42 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:01:42 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/01 13:01:42 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:01:42 LINE is uids
2014/11/01 13:01:42 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:01:42 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:01:42 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:01:42 LINE is 002 [seen,answered],
2014/11/01 13:01:42 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/01 13:01:42 LINE is 005
2014/11/01 13:01:42 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/01 13:01:42 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/01 13:01:42 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:01:42 LINE is seen,
2014/11/01 13:01:42 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,'
                   ]
        };
2014/11/01 13:01:42 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,'
                               ]
                    }
        };
2014/11/01 13:01:42 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:01:42 LINE is test
2014/11/01 13:01:42 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:01:42 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:01:42 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:01:42 LINE is uids: [10]
2014/11/01 13:01:42 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/01 13:01:42 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:01:42 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 13:01:42 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:01:42 LINE is result
2014/11/01 13:01:42 brackets: $VAR1 = '}';
2014/11/01 13:01:42 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/01 13:01:42 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:01:42 LINE is 1
2014/11/01 13:01:42 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:01:42 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/01 13:01:42 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:01:42 LINE is qqqq [123]
2014/11/01 13:01:42 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/01 13:01:42 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/01 13:01:42 LINE is 2
2014/11/01 13:01:42 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:01:42 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/01 13:01:42 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:01:42 LINE is qqqq [567]
2014/11/01 13:01:42 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/01 13:01:42 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:01:42 LINE is total
2014/11/01 13:01:42 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:01:42 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:01:42 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:01:42 LINE is inbox: [002, 005]
2014/11/01 13:01:42 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 13:01:42 LINE is test: [10]
2014/11/01 13:01:42 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 13:01:42 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:01:42 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/01 13:01:42 OK, parsing completed
2014/11/01 13:01:42 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/01 13:01:45 mode = 1
2014/11/01 13:01:45 client connected to pid 20000
2014/11/01 13:01:45 <<<: 1 LOGIN test@localhost "123123123"
2014/11/01 13:01:45 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:01:45 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:01:45 >>>: OK Authentication successful
2014/11/01 13:01:45 <<<: 2 CAPABILITY
2014/11/01 13:01:45 >>>: * CAPABILITY FAKE IMAP
2014/11/01 13:01:45 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:01:45 >>>: OK CAPABILITY completed
2014/11/01 13:01:45 <<<: 3 XLIST "" *
2014/11/01 13:01:45 >>>: * XLIST () "/" "test"
2014/11/01 13:01:45 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/01 13:01:45 >>>: OK LIST completed
2014/11/01 13:01:45 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 13:01:45 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/01 13:01:45 >>>: OK STATUS completed
2014/11/01 13:01:45 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 13:01:45 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/01 13:01:45 >>>: OK STATUS completed
2014/11/01 13:01:45 <<<: 6 SELECT "Inbox"
2014/11/01 13:01:45 >>>: FLAGS ()
2014/11/01 13:01:45 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 13:01:45 qewrty "Inbox"
2014/11/01 13:01:45 >>>: 3 EXISTS
2014/11/01 13:01:45 >>>: 3 RECENT
2014/11/01 13:01:45 >>>: OK [UNSEEN 2]
2014/11/01 13:01:45 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/01 13:01:45 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/01 13:01:45 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 13:01:45 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 13:02:05 <<<: 8 SELECT "test"
2014/11/01 13:02:05 >>>: FLAGS ()
2014/11/01 13:02:05 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 13:02:05 qewrty "test"
2014/11/01 13:02:05 >>>: 2 EXISTS
2014/11/01 13:02:05 >>>: 2 RECENT
2014/11/01 13:02:05 >>>: OK [UNSEEN 2]
2014/11/01 13:02:05 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/01 13:02:05 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/01 13:02:05 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 13:02:05 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 13:02:25 <<<: 10 LOGOUT
2014/11/01 13:03:32 mode = 1
2014/11/01 13:03:32 client connected to pid 20336
2014/11/01 13:03:32 <<<: 1 LOGIN test@localhost "123123123"
2014/11/01 13:03:32 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:03:32 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:03:32 >>>: OK Authentication successful
2014/11/01 13:03:32 <<<: 2 CAPABILITY
2014/11/01 13:03:32 >>>: * CAPABILITY FAKE IMAP
2014/11/01 13:03:32 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:03:32 >>>: OK CAPABILITY completed
2014/11/01 13:03:32 <<<: 3 XLIST "" *
2014/11/01 13:03:32 >>>: * XLIST () "/" "test"
2014/11/01 13:03:32 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/01 13:03:32 >>>: OK LIST completed
2014/11/01 13:03:32 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 13:03:32 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/01 13:03:32 >>>: OK STATUS completed
2014/11/01 13:03:32 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 13:03:32 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/01 13:03:32 >>>: OK STATUS completed
2014/11/01 13:03:32 <<<: 6 SELECT "Inbox"
2014/11/01 13:03:32 >>>: FLAGS ()
2014/11/01 13:03:32 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 13:03:32 qewrty "Inbox"
2014/11/01 13:03:32 >>>: 3 EXISTS
2014/11/01 13:03:32 >>>: 3 RECENT
2014/11/01 13:03:32 >>>: OK [UNSEEN 2]
2014/11/01 13:03:32 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/01 13:03:32 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/01 13:03:32 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 13:03:32 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 13:03:52 <<<: 8 SELECT "test"
2014/11/01 13:03:52 >>>: FLAGS ()
2014/11/01 13:03:52 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 13:03:52 qewrty "test"
2014/11/01 13:03:52 >>>: 2 EXISTS
2014/11/01 13:03:52 >>>: 2 RECENT
2014/11/01 13:03:52 >>>: OK [UNSEEN 2]
2014/11/01 13:03:52 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/01 13:03:52 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/01 13:03:52 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 13:03:52 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 13:04:12 <<<: 10 LOGOUT
2014/11/01 13:05:59 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:05:59 LINE is imap
2014/11/01 13:05:59 brackets: $VAR1 = '}';
2014/11/01 13:05:59 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/01 13:05:59 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:05:59 LINE is login:
2014/11/01 13:05:59 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 13:05:59 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/01 13:05:59 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:05:59 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:05:59 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:05:59 LINE is capability
2014/11/01 13:05:59 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 13:05:59 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:05:59 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:05:59 LINE is * CAPABILITY FAKE IMAP
2014/11/01 13:05:59 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:05:59 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:05:59 LINE is test
2014/11/01 13:05:59 brackets: $VAR1 = ']';
2014/11/01 13:05:59 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:05:59 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:05:59 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 13:05:59 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:05:59 LINE is Inbox: 
2014/11/01 13:05:59 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:05:59 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/01 13:05:59 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:05:59 LINE is uids
2014/11/01 13:05:59 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:05:59 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:05:59 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:05:59 LINE is 001 [seen, recent],
2014/11/01 13:05:59 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:05:59 LINE is 003 [recent],
2014/11/01 13:05:59 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:05:59 LINE is 005 [RECENT]
2014/11/01 13:05:59 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:05:59 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:05:59 LINE is flags [ hashnochildren, noselect]
2014/11/01 13:05:59 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:05:59 LINE is uidvalidity : 13123
2014/11/01 13:05:59 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:05:59 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:05:59 LINE is test
2014/11/01 13:05:59 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:05:59 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:05:59 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:05:59 LINE is uids
2014/11/01 13:05:59 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:05:59 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:05:59 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:05:59 LINE is 10 [recent],
2014/11/01 13:05:59 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 13:05:59 LINE is 11 [recent],
2014/11/01 13:05:59 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 13:05:59 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/01 13:05:59 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:05:59 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 13:05:59 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 13:05:59 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:05:59 LINE is inbox
2014/11/01 13:05:59 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:05:59 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/01 13:05:59 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:05:59 LINE is uids
2014/11/01 13:05:59 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:05:59 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:05:59 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:05:59 LINE is 002 [seen,answered],
2014/11/01 13:05:59 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/01 13:05:59 LINE is 005
2014/11/01 13:05:59 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/01 13:05:59 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/01 13:05:59 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:05:59 LINE is seen,
2014/11/01 13:05:59 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,'
                   ]
        };
2014/11/01 13:05:59 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,'
                               ]
                    }
        };
2014/11/01 13:05:59 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:05:59 LINE is test
2014/11/01 13:05:59 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:05:59 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:05:59 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:05:59 LINE is uids: [10]
2014/11/01 13:05:59 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/01 13:05:59 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:05:59 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 13:05:59 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:05:59 LINE is result
2014/11/01 13:05:59 brackets: $VAR1 = '}';
2014/11/01 13:05:59 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/01 13:05:59 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:05:59 LINE is 1
2014/11/01 13:05:59 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:05:59 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/01 13:05:59 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:05:59 LINE is qqqq [123]
2014/11/01 13:05:59 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/01 13:05:59 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/01 13:05:59 LINE is 2
2014/11/01 13:05:59 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:05:59 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/01 13:05:59 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:05:59 LINE is qqqq [567]
2014/11/01 13:05:59 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/01 13:05:59 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:05:59 LINE is total
2014/11/01 13:05:59 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:05:59 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:05:59 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:05:59 LINE is inbox: [002, 005]
2014/11/01 13:05:59 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 13:05:59 LINE is test: [10]
2014/11/01 13:05:59 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 13:05:59 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:05:59 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/01 13:05:59 OK, parsing completed
2014/11/01 13:05:59 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/01 13:06:04 mode = 1
2014/11/01 13:06:04 client connected to pid 20825
2014/11/01 13:06:04 <<<: 1 LOGIN test@localhost "123123123"
2014/11/01 13:06:04 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:06:04 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:06:04 >>>: OK Authentication successful
2014/11/01 13:06:04 <<<: 2 CAPABILITY
2014/11/01 13:06:04 >>>: * CAPABILITY FAKE IMAP
2014/11/01 13:06:04 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:06:04 >>>: OK CAPABILITY completed
2014/11/01 13:06:04 <<<: 3 XLIST "" *
2014/11/01 13:06:04 >>>: * XLIST () "/" "test"
2014/11/01 13:06:04 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/01 13:06:04 >>>: OK LIST completed
2014/11/01 13:06:04 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 13:06:04 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/01 13:06:04 >>>: OK STATUS completed
2014/11/01 13:06:04 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 13:06:04 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/01 13:06:04 >>>: OK STATUS completed
2014/11/01 13:06:04 <<<: 6 SELECT "Inbox"
2014/11/01 13:06:04 >>>: FLAGS ()
2014/11/01 13:06:04 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 13:06:04 >>>: 3 EXISTS
2014/11/01 13:06:04 >>>: 3 RECENT
2014/11/01 13:06:04 >>>: OK [UNSEEN 2]
2014/11/01 13:06:04 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/01 13:06:04 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/01 13:06:04 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 13:06:04 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 13:06:04 QQQQQQQQQQQQQQQQQQ
2014/11/01 13:06:24 <<<: 8 SELECT "test"
2014/11/01 13:06:24 >>>: FLAGS ()
2014/11/01 13:06:24 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 13:06:24 >>>: 2 EXISTS
2014/11/01 13:06:24 >>>: 2 RECENT
2014/11/01 13:06:24 >>>: OK [UNSEEN 2]
2014/11/01 13:06:24 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/01 13:06:24 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/01 13:06:24 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 13:06:24 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 13:06:24 QQQQQQQQQQQQQQQQQQ
2014/11/01 13:06:44 <<<: 10 LOGOUT
2014/11/01 13:07:40 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:07:40 LINE is imap
2014/11/01 13:07:40 brackets: $VAR1 = '}';
2014/11/01 13:07:40 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/01 13:07:40 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:07:40 LINE is login:
2014/11/01 13:07:40 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 13:07:40 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/01 13:07:40 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:07:40 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:07:40 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:07:40 LINE is capability
2014/11/01 13:07:40 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 13:07:40 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:07:40 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:07:40 LINE is * CAPABILITY FAKE IMAP
2014/11/01 13:07:40 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:07:40 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:07:40 LINE is test
2014/11/01 13:07:40 brackets: $VAR1 = ']';
2014/11/01 13:07:40 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:07:40 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:07:40 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 13:07:40 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:07:40 LINE is Inbox: 
2014/11/01 13:07:40 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:07:40 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/01 13:07:40 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:07:40 LINE is uids
2014/11/01 13:07:40 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:07:40 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:07:40 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:07:40 LINE is 001 [seen, recent],
2014/11/01 13:07:40 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:07:40 LINE is 003 [recent],
2014/11/01 13:07:40 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:07:40 LINE is 005 [RECENT]
2014/11/01 13:07:40 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:07:40 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:07:40 LINE is flags [ hashnochildren, noselect]
2014/11/01 13:07:40 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:07:40 LINE is uidvalidity : 13123
2014/11/01 13:07:40 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:07:40 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:07:40 LINE is test
2014/11/01 13:07:40 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:07:40 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:07:40 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:07:40 LINE is uids
2014/11/01 13:07:40 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:07:40 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:07:40 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:07:40 LINE is 10 [recent],
2014/11/01 13:07:40 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 13:07:40 LINE is 11 [recent],
2014/11/01 13:07:40 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 13:07:40 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/01 13:07:40 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:07:40 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 13:07:40 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 13:07:40 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:07:40 LINE is inbox
2014/11/01 13:07:40 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:07:40 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/01 13:07:40 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:07:40 LINE is uids
2014/11/01 13:07:40 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:07:40 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:07:40 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:07:40 LINE is 002 [seen,answered],
2014/11/01 13:07:40 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/01 13:07:40 LINE is 005
2014/11/01 13:07:40 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/01 13:07:40 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/01 13:07:40 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:07:40 LINE is seen,
2014/11/01 13:07:40 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,'
                   ]
        };
2014/11/01 13:07:40 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,'
                               ]
                    }
        };
2014/11/01 13:07:40 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:07:40 LINE is test
2014/11/01 13:07:40 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:07:40 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:07:40 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:07:40 LINE is uids: [10]
2014/11/01 13:07:40 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/01 13:07:40 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:07:40 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 13:07:40 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:07:40 LINE is result
2014/11/01 13:07:40 brackets: $VAR1 = '}';
2014/11/01 13:07:40 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/01 13:07:40 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:07:40 LINE is 1
2014/11/01 13:07:40 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:07:40 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/01 13:07:40 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:07:40 LINE is qqqq [123]
2014/11/01 13:07:40 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/01 13:07:40 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/01 13:07:40 LINE is 2
2014/11/01 13:07:40 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:07:40 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/01 13:07:40 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:07:40 LINE is qqqq [567]
2014/11/01 13:07:40 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/01 13:07:40 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:07:40 LINE is total
2014/11/01 13:07:40 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:07:40 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:07:40 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:07:40 LINE is inbox: [002, 005]
2014/11/01 13:07:40 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 13:07:40 LINE is test: [10]
2014/11/01 13:07:40 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 13:07:40 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:07:40 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/01 13:07:40 OK, parsing completed
2014/11/01 13:07:40 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/01 13:07:44 mode = 1
2014/11/01 13:07:44 client connected to pid 21143
2014/11/01 13:07:44 <<<: 1 LOGIN test@localhost "123123123"
2014/11/01 13:07:44 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:07:44 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:07:44 >>>: OK Authentication successful
2014/11/01 13:07:44 <<<: 2 CAPABILITY
2014/11/01 13:07:44 >>>: * CAPABILITY FAKE IMAP
2014/11/01 13:07:44 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:07:44 >>>: OK CAPABILITY completed
2014/11/01 13:07:44 <<<: 3 XLIST "" *
2014/11/01 13:07:44 >>>: * XLIST () "/" "test"
2014/11/01 13:07:44 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/01 13:07:44 >>>: OK LIST completed
2014/11/01 13:07:44 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 13:07:44 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/01 13:07:44 >>>: OK STATUS completed
2014/11/01 13:07:44 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 13:07:44 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/01 13:07:44 >>>: OK STATUS completed
2014/11/01 13:07:44 <<<: 6 SELECT "Inbox"
2014/11/01 13:07:44 >>>: FLAGS ()
2014/11/01 13:07:44 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 13:07:44 >>>: 3 EXISTS
2014/11/01 13:07:44 >>>: 3 RECENT
2014/11/01 13:07:44 >>>: OK [UNSEEN 2]
2014/11/01 13:07:44 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/01 13:07:44 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/01 13:07:44 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 13:07:44 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 13:07:44 QQQQQQQQQQQQQQQQQQ
2014/11/01 13:08:04 <<<: 8 SELECT "test"
2014/11/01 13:08:04 >>>: FLAGS ()
2014/11/01 13:08:04 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 13:08:04 >>>: 2 EXISTS
2014/11/01 13:08:04 >>>: 2 RECENT
2014/11/01 13:08:04 >>>: OK [UNSEEN 2]
2014/11/01 13:08:04 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/01 13:08:04 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/01 13:08:04 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 13:08:04 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 13:08:04 QQQQQQQQQQQQQQQQQQ
2014/11/01 13:08:24 <<<: 10 LOGOUT
2014/11/01 13:09:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:09:26 LINE is imap
2014/11/01 13:09:26 brackets: $VAR1 = '}';
2014/11/01 13:09:26 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/01 13:09:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:09:26 LINE is login:
2014/11/01 13:09:26 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 13:09:26 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/01 13:09:26 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:09:26 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:09:26 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:09:26 LINE is capability
2014/11/01 13:09:26 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 13:09:26 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:09:26 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:09:26 LINE is * CAPABILITY FAKE IMAP
2014/11/01 13:09:26 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:09:26 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:09:26 LINE is test
2014/11/01 13:09:26 brackets: $VAR1 = ']';
2014/11/01 13:09:26 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:09:26 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:09:26 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 13:09:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:09:26 LINE is Inbox: 
2014/11/01 13:09:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:09:26 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/01 13:09:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:09:26 LINE is uids
2014/11/01 13:09:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:09:26 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:09:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:09:26 LINE is 001 [seen, recent],
2014/11/01 13:09:26 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:09:26 LINE is 003 [recent],
2014/11/01 13:09:26 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:09:26 LINE is 005 [RECENT]
2014/11/01 13:09:26 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:09:26 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:09:26 LINE is flags [ hashnochildren, noselect]
2014/11/01 13:09:26 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:09:26 LINE is uidvalidity : 13123
2014/11/01 13:09:26 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:09:26 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:09:26 LINE is test
2014/11/01 13:09:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:09:26 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:09:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:09:26 LINE is uids
2014/11/01 13:09:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:09:26 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:09:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:09:26 LINE is 10 [recent],
2014/11/01 13:09:26 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 13:09:26 LINE is 11 [recent],
2014/11/01 13:09:26 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 13:09:26 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/01 13:09:26 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:09:26 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 13:09:26 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 13:09:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:09:26 LINE is inbox
2014/11/01 13:09:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:09:26 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/01 13:09:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:09:26 LINE is uids
2014/11/01 13:09:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:09:26 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:09:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:09:26 LINE is 002 [seen,answered],
2014/11/01 13:09:26 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/01 13:09:26 LINE is 005
2014/11/01 13:09:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/01 13:09:26 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/01 13:09:26 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:09:26 LINE is seen,
2014/11/01 13:09:26 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,'
                   ]
        };
2014/11/01 13:09:26 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,'
                               ]
                    }
        };
2014/11/01 13:09:26 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:09:26 LINE is test
2014/11/01 13:09:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:09:26 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:09:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:09:26 LINE is uids: [10]
2014/11/01 13:09:26 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/01 13:09:26 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:09:26 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 13:09:26 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:09:26 LINE is result
2014/11/01 13:09:26 brackets: $VAR1 = '}';
2014/11/01 13:09:26 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/01 13:09:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:09:26 LINE is 1
2014/11/01 13:09:26 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:09:26 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/01 13:09:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:09:26 LINE is qqqq [123]
2014/11/01 13:09:26 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/01 13:09:26 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/01 13:09:26 LINE is 2
2014/11/01 13:09:26 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:09:26 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/01 13:09:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:09:26 LINE is qqqq [567]
2014/11/01 13:09:26 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/01 13:09:26 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:09:26 LINE is total
2014/11/01 13:09:26 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:09:26 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:09:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:09:26 LINE is inbox: [002, 005]
2014/11/01 13:09:26 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 13:09:26 LINE is test: [10]
2014/11/01 13:09:26 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 13:09:26 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:09:26 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/01 13:09:26 OK, parsing completed
2014/11/01 13:09:26 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/01 13:09:34 mode = 1
2014/11/01 13:09:34 client connected to pid 21462
2014/11/01 13:09:34 <<<: 1 LOGIN test@localhost "123123123"
2014/11/01 13:09:34 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:09:34 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:09:34 >>>: OK Authentication successful
2014/11/01 13:09:34 <<<: 2 CAPABILITY
2014/11/01 13:09:34 >>>: * CAPABILITY FAKE IMAP
2014/11/01 13:09:34 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:09:34 >>>: OK CAPABILITY completed
2014/11/01 13:09:34 <<<: 3 XLIST "" *
2014/11/01 13:09:34 >>>: * XLIST () "/" "test"
2014/11/01 13:09:34 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/01 13:09:34 >>>: OK LIST completed
2014/11/01 13:09:34 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 13:09:34 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/01 13:09:34 >>>: OK STATUS completed
2014/11/01 13:09:34 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 13:09:34 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/01 13:09:34 >>>: OK STATUS completed
2014/11/01 13:09:34 <<<: 6 SELECT "Inbox"
2014/11/01 13:09:34 >>>: FLAGS ()
2014/11/01 13:09:34 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 13:09:34 >>>: 3 EXISTS
2014/11/01 13:09:34 >>>: 3 RECENT
2014/11/01 13:09:34 >>>: OK [UNSEEN 2]
2014/11/01 13:09:34 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/01 13:09:34 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/01 13:09:34 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 13:09:34 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 13:09:34 QQQQQQQQQQQQQQQQQQ
2014/11/01 13:09:54 <<<: 8 SELECT "test"
2014/11/01 13:09:54 >>>: FLAGS ()
2014/11/01 13:09:54 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 13:09:54 >>>: 2 EXISTS
2014/11/01 13:09:54 >>>: 2 RECENT
2014/11/01 13:09:54 >>>: OK [UNSEEN 2]
2014/11/01 13:09:54 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/01 13:09:54 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/01 13:09:54 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 13:09:54 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 13:09:54 QQQQQQQQQQQQQQQQQQ
2014/11/01 13:10:14 <<<: 10 LOGOUT
2014/11/01 13:10:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:10:26 LINE is imap
2014/11/01 13:10:26 brackets: $VAR1 = '}';
2014/11/01 13:10:26 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/01 13:10:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:10:26 LINE is login:
2014/11/01 13:10:26 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 13:10:26 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/01 13:10:26 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:10:26 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:10:26 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:10:26 LINE is capability
2014/11/01 13:10:26 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 13:10:26 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:10:26 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:10:26 LINE is * CAPABILITY FAKE IMAP
2014/11/01 13:10:26 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:10:26 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:10:26 LINE is test
2014/11/01 13:10:26 brackets: $VAR1 = ']';
2014/11/01 13:10:26 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:10:26 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:10:26 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 13:10:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:10:26 LINE is Inbox: 
2014/11/01 13:10:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:10:26 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/01 13:10:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:10:26 LINE is uids
2014/11/01 13:10:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:10:26 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:10:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:10:26 LINE is 001 [seen, recent],
2014/11/01 13:10:26 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:10:26 LINE is 003 [recent],
2014/11/01 13:10:26 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:10:26 LINE is 005 [RECENT]
2014/11/01 13:10:26 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:10:26 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:10:26 LINE is flags [ hashnochildren, noselect]
2014/11/01 13:10:26 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:10:26 LINE is uidvalidity : 13123
2014/11/01 13:10:26 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:10:26 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:10:26 LINE is test
2014/11/01 13:10:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:10:26 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:10:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:10:26 LINE is uids
2014/11/01 13:10:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:10:26 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:10:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:10:26 LINE is 10 [recent],
2014/11/01 13:10:26 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 13:10:26 LINE is 11 [recent],
2014/11/01 13:10:26 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 13:10:26 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/01 13:10:26 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:10:26 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 13:10:26 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 13:10:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:10:26 LINE is inbox
2014/11/01 13:10:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:10:26 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/01 13:10:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:10:26 LINE is uids
2014/11/01 13:10:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:10:26 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:10:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:10:26 LINE is 002 [seen,answered],
2014/11/01 13:10:26 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/01 13:10:26 LINE is 005
2014/11/01 13:10:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/01 13:10:26 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/01 13:10:26 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:10:26 LINE is seen,
2014/11/01 13:10:26 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,'
                   ]
        };
2014/11/01 13:10:26 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,'
                               ]
                    }
        };
2014/11/01 13:10:26 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:10:26 LINE is test
2014/11/01 13:10:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:10:26 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:10:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:10:26 LINE is uids: [10]
2014/11/01 13:10:26 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/01 13:10:26 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:10:26 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 13:10:26 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:10:26 LINE is result
2014/11/01 13:10:26 brackets: $VAR1 = '}';
2014/11/01 13:10:26 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/01 13:10:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:10:26 LINE is 1
2014/11/01 13:10:26 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:10:26 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/01 13:10:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:10:26 LINE is qqqq [123]
2014/11/01 13:10:26 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/01 13:10:26 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/01 13:10:26 LINE is 2
2014/11/01 13:10:26 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:10:26 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/01 13:10:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:10:26 LINE is qqqq [567]
2014/11/01 13:10:26 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/01 13:10:26 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:10:26 LINE is total
2014/11/01 13:10:26 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:10:26 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:10:26 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:10:26 LINE is inbox: [002, 005]
2014/11/01 13:10:26 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 13:10:26 LINE is test: [10]
2014/11/01 13:10:26 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 13:10:26 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:10:26 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/01 13:10:26 OK, parsing completed
2014/11/01 13:10:26 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/01 13:10:32 mode = 1
2014/11/01 13:10:32 client connected to pid 21689
2014/11/01 13:10:32 <<<: 1 LOGIN test@localhost "123123123"
2014/11/01 13:10:32 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:10:32 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:10:32 >>>: OK Authentication successful
2014/11/01 13:10:32 <<<: 2 CAPABILITY
2014/11/01 13:10:32 >>>: * CAPABILITY FAKE IMAP
2014/11/01 13:10:32 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:10:32 >>>: OK CAPABILITY completed
2014/11/01 13:10:32 <<<: 3 XLIST "" *
2014/11/01 13:10:32 >>>: * XLIST () "/" "test"
2014/11/01 13:10:32 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/01 13:10:32 >>>: OK LIST completed
2014/11/01 13:10:32 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 13:10:32 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/01 13:10:32 >>>: OK STATUS completed
2014/11/01 13:10:32 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 13:10:32 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/01 13:10:32 >>>: OK STATUS completed
2014/11/01 13:10:32 <<<: 6 SELECT "Inbox"
2014/11/01 13:10:32 >>>: FLAGS ()
2014/11/01 13:10:32 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 13:10:32 >>>: 3 EXISTS
2014/11/01 13:10:32 >>>: 3 RECENT
2014/11/01 13:10:32 >>>: OK [UNSEEN 2]
2014/11/01 13:10:32 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/01 13:10:32 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/01 13:10:32 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 13:10:33 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 13:10:33 OMNO    1, *, INTERNALDATE FLAGS
2014/11/01 13:10:53 <<<: 8 SELECT "test"
2014/11/01 13:10:53 >>>: FLAGS ()
2014/11/01 13:10:53 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 13:10:53 >>>: 2 EXISTS
2014/11/01 13:10:53 >>>: 2 RECENT
2014/11/01 13:10:53 >>>: OK [UNSEEN 2]
2014/11/01 13:10:53 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/01 13:10:53 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/01 13:10:53 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 13:10:53 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 13:10:53 OMNO    1, *, INTERNALDATE FLAGS
2014/11/01 13:11:13 <<<: 10 LOGOUT
2014/11/01 13:11:55 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:11:55 LINE is imap
2014/11/01 13:11:55 brackets: $VAR1 = '}';
2014/11/01 13:11:55 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/01 13:11:55 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:11:55 LINE is login:
2014/11/01 13:11:55 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 13:11:55 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/01 13:11:55 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:11:55 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:11:55 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:11:55 LINE is capability
2014/11/01 13:11:55 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 13:11:55 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:11:55 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:11:55 LINE is * CAPABILITY FAKE IMAP
2014/11/01 13:11:55 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:11:55 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:11:55 LINE is test
2014/11/01 13:11:55 brackets: $VAR1 = ']';
2014/11/01 13:11:55 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:11:55 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:11:55 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 13:11:55 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:11:55 LINE is Inbox: 
2014/11/01 13:11:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:11:55 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/01 13:11:55 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:11:55 LINE is uids
2014/11/01 13:11:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:11:55 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:11:55 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:11:55 LINE is 001 [seen, recent],
2014/11/01 13:11:55 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:11:55 LINE is 003 [recent],
2014/11/01 13:11:55 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:11:55 LINE is 005 [RECENT]
2014/11/01 13:11:55 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:11:55 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:11:55 LINE is flags [ hashnochildren, noselect]
2014/11/01 13:11:55 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:11:55 LINE is uidvalidity : 13123
2014/11/01 13:11:55 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:11:55 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:11:55 LINE is test
2014/11/01 13:11:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:11:55 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:11:55 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:11:55 LINE is uids
2014/11/01 13:11:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:11:55 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:11:55 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:11:55 LINE is 10 [recent],
2014/11/01 13:11:55 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 13:11:55 LINE is 11 [recent],
2014/11/01 13:11:55 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 13:11:55 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/01 13:11:55 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:11:55 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 13:11:55 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 13:11:55 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:11:55 LINE is inbox
2014/11/01 13:11:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:11:55 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/01 13:11:55 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:11:55 LINE is uids
2014/11/01 13:11:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:11:55 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:11:55 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:11:55 LINE is 002 [seen,answered],
2014/11/01 13:11:55 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/01 13:11:55 LINE is 005
2014/11/01 13:11:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/01 13:11:55 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/01 13:11:55 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:11:55 LINE is seen,
2014/11/01 13:11:55 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,'
                   ]
        };
2014/11/01 13:11:55 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,'
                               ]
                    }
        };
2014/11/01 13:11:55 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:11:55 LINE is test
2014/11/01 13:11:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:11:55 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:11:55 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:11:55 LINE is uids: [10]
2014/11/01 13:11:55 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/01 13:11:55 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:11:55 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 13:11:55 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:11:55 LINE is result
2014/11/01 13:11:55 brackets: $VAR1 = '}';
2014/11/01 13:11:55 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/01 13:11:55 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:11:55 LINE is 1
2014/11/01 13:11:55 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:11:55 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/01 13:11:55 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:11:55 LINE is qqqq [123]
2014/11/01 13:11:55 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/01 13:11:55 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/01 13:11:55 LINE is 2
2014/11/01 13:11:55 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:11:55 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/01 13:11:55 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:11:55 LINE is qqqq [567]
2014/11/01 13:11:55 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/01 13:11:55 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:11:55 LINE is total
2014/11/01 13:11:55 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:11:55 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:11:55 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:11:55 LINE is inbox: [002, 005]
2014/11/01 13:11:55 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 13:11:55 LINE is test: [10]
2014/11/01 13:11:55 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 13:11:55 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:11:55 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/01 13:11:55 OK, parsing completed
2014/11/01 13:11:55 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/01 13:11:57 mode = 1
2014/11/01 13:11:57 client connected to pid 21970
2014/11/01 13:11:57 <<<: 1 LOGIN test@localhost "123123123"
2014/11/01 13:11:57 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:11:57 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:11:57 >>>: OK Authentication successful
2014/11/01 13:11:57 <<<: 2 CAPABILITY
2014/11/01 13:11:57 >>>: * CAPABILITY FAKE IMAP
2014/11/01 13:11:57 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:11:57 >>>: OK CAPABILITY completed
2014/11/01 13:11:57 <<<: 3 XLIST "" *
2014/11/01 13:11:57 >>>: * XLIST () "/" "test"
2014/11/01 13:11:57 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/01 13:11:57 >>>: OK LIST completed
2014/11/01 13:11:58 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 13:11:58 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/01 13:11:58 >>>: OK STATUS completed
2014/11/01 13:11:58 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 13:11:58 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/01 13:11:58 >>>: OK STATUS completed
2014/11/01 13:11:58 <<<: 6 SELECT "Inbox"
2014/11/01 13:11:58 >>>: FLAGS ()
2014/11/01 13:11:58 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 13:11:58 >>>: 3 EXISTS
2014/11/01 13:11:58 >>>: 3 RECENT
2014/11/01 13:11:58 >>>: OK [UNSEEN 2]
2014/11/01 13:11:58 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/01 13:11:58 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/01 13:11:58 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 13:11:58 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 13:11:58 OMNO    1, *, INTERNALDATE FLAGSi, 
2014/11/01 13:12:18 <<<: 8 SELECT "test"
2014/11/01 13:12:18 >>>: FLAGS ()
2014/11/01 13:12:18 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 13:12:18 >>>: 2 EXISTS
2014/11/01 13:12:18 >>>: 2 RECENT
2014/11/01 13:12:18 >>>: OK [UNSEEN 2]
2014/11/01 13:12:18 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/01 13:12:18 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/01 13:12:18 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 13:12:18 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 13:12:18 OMNO    1, *, INTERNALDATE FLAGSi, 
2014/11/01 13:12:38 <<<: 10 LOGOUT
2014/11/01 13:13:07 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:13:07 LINE is imap
2014/11/01 13:13:07 brackets: $VAR1 = '}';
2014/11/01 13:13:07 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/01 13:13:07 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:13:07 LINE is login:
2014/11/01 13:13:07 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 13:13:07 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/01 13:13:07 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:13:07 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:13:07 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:13:07 LINE is capability
2014/11/01 13:13:07 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 13:13:07 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:13:07 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:13:07 LINE is * CAPABILITY FAKE IMAP
2014/11/01 13:13:07 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:13:07 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:13:07 LINE is test
2014/11/01 13:13:07 brackets: $VAR1 = ']';
2014/11/01 13:13:07 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:13:07 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:13:07 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 13:13:07 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:13:07 LINE is Inbox: 
2014/11/01 13:13:07 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:13:07 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/01 13:13:07 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:13:07 LINE is uids
2014/11/01 13:13:07 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:13:07 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:13:07 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:13:07 LINE is 001 [seen, recent],
2014/11/01 13:13:07 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:13:07 LINE is 003 [recent],
2014/11/01 13:13:07 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:13:07 LINE is 005 [RECENT]
2014/11/01 13:13:07 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:13:07 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:13:07 LINE is flags [ hashnochildren, noselect]
2014/11/01 13:13:07 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:13:07 LINE is uidvalidity : 13123
2014/11/01 13:13:07 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:13:07 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:13:07 LINE is test
2014/11/01 13:13:07 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:13:07 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:13:07 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:13:07 LINE is uids
2014/11/01 13:13:07 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:13:07 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:13:07 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:13:07 LINE is 10 [recent],
2014/11/01 13:13:07 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 13:13:07 LINE is 11 [recent],
2014/11/01 13:13:07 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 13:13:07 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/01 13:13:07 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:13:07 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 13:13:07 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 13:13:07 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:13:07 LINE is inbox
2014/11/01 13:13:07 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:13:07 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/01 13:13:07 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:13:07 LINE is uids
2014/11/01 13:13:07 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:13:07 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:13:07 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:13:07 LINE is 002 [seen,answered],
2014/11/01 13:13:07 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/01 13:13:07 LINE is 005
2014/11/01 13:13:07 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/01 13:13:07 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/01 13:13:07 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:13:07 LINE is seen,
2014/11/01 13:13:07 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,'
                   ]
        };
2014/11/01 13:13:07 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,'
                               ]
                    }
        };
2014/11/01 13:13:07 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:13:07 LINE is test
2014/11/01 13:13:07 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:13:07 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:13:07 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:13:07 LINE is uids: [10]
2014/11/01 13:13:07 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/01 13:13:07 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:13:07 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 13:13:07 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:13:07 LINE is result
2014/11/01 13:13:07 brackets: $VAR1 = '}';
2014/11/01 13:13:07 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/01 13:13:07 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:13:07 LINE is 1
2014/11/01 13:13:07 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:13:07 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/01 13:13:07 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:13:07 LINE is qqqq [123]
2014/11/01 13:13:07 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/01 13:13:07 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/01 13:13:07 LINE is 2
2014/11/01 13:13:07 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:13:07 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/01 13:13:07 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:13:07 LINE is qqqq [567]
2014/11/01 13:13:07 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/01 13:13:07 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:13:07 LINE is total
2014/11/01 13:13:07 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:13:07 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:13:07 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:13:07 LINE is inbox: [002, 005]
2014/11/01 13:13:07 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 13:13:07 LINE is test: [10]
2014/11/01 13:13:07 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 13:13:07 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:13:07 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/01 13:13:07 OK, parsing completed
2014/11/01 13:13:07 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/01 13:13:13 mode = 1
2014/11/01 13:13:13 client connected to pid 22479
2014/11/01 13:13:13 <<<: 1 LOGIN test@localhost "123123123"
2014/11/01 13:13:13 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:13:13 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:13:13 >>>: OK Authentication successful
2014/11/01 13:13:13 <<<: 2 CAPABILITY
2014/11/01 13:13:13 >>>: * CAPABILITY FAKE IMAP
2014/11/01 13:13:13 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:13:13 >>>: OK CAPABILITY completed
2014/11/01 13:13:13 <<<: 3 XLIST "" *
2014/11/01 13:13:13 >>>: * XLIST () "/" "test"
2014/11/01 13:13:13 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/01 13:13:13 >>>: OK LIST completed
2014/11/01 13:13:13 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 13:13:13 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/01 13:13:13 >>>: OK STATUS completed
2014/11/01 13:13:13 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 13:13:13 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/01 13:13:13 >>>: OK STATUS completed
2014/11/01 13:13:13 <<<: 6 SELECT "Inbox"
2014/11/01 13:13:13 >>>: FLAGS ()
2014/11/01 13:13:13 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 13:13:13 >>>: 3 EXISTS
2014/11/01 13:13:13 >>>: 3 RECENT
2014/11/01 13:13:13 >>>: OK [UNSEEN 2]
2014/11/01 13:13:13 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/01 13:13:13 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/01 13:13:13 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 13:13:13 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 13:15:09 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:15:09 LINE is imap
2014/11/01 13:15:09 brackets: $VAR1 = '}';
2014/11/01 13:15:09 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/01 13:15:09 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:15:09 LINE is login:
2014/11/01 13:15:09 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 13:15:09 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/01 13:15:09 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:15:09 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:15:09 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:15:09 LINE is capability
2014/11/01 13:15:09 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/01 13:15:09 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:15:09 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:15:09 LINE is * CAPABILITY FAKE IMAP
2014/11/01 13:15:09 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:15:09 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:15:09 LINE is test
2014/11/01 13:15:09 brackets: $VAR1 = ']';
2014/11/01 13:15:09 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:15:09 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:15:09 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 13:15:09 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:15:09 LINE is Inbox: 
2014/11/01 13:15:09 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:15:09 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/01 13:15:09 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:15:09 LINE is uids
2014/11/01 13:15:09 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:15:09 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:15:09 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:15:09 LINE is 001 [seen, recent],
2014/11/01 13:15:09 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:15:09 LINE is 003 [recent],
2014/11/01 13:15:09 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:15:09 LINE is 005 [RECENT]
2014/11/01 13:15:09 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/01 13:15:09 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:15:09 LINE is flags [ hashnochildren, noselect]
2014/11/01 13:15:09 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:15:09 LINE is uidvalidity : 13123
2014/11/01 13:15:09 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/01 13:15:09 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:15:09 LINE is test
2014/11/01 13:15:09 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:15:09 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:15:09 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:15:09 LINE is uids
2014/11/01 13:15:09 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:15:09 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:15:09 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:15:09 LINE is 10 [recent],
2014/11/01 13:15:09 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 13:15:09 LINE is 11 [recent],
2014/11/01 13:15:09 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/01 13:15:09 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/01 13:15:09 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/01 13:15:09 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 13:15:09 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/01 13:15:09 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:15:09 LINE is inbox
2014/11/01 13:15:09 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:15:09 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/01 13:15:09 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:15:09 LINE is uids
2014/11/01 13:15:09 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/01 13:15:09 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/01 13:15:09 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:15:09 LINE is 002 [seen,answered],
2014/11/01 13:15:09 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/01 13:15:09 LINE is 005
2014/11/01 13:15:09 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/01 13:15:09 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/01 13:15:09 FUNCTION do_parse,$VAR1 = [];
2014/11/01 13:15:09 LINE is seen,
2014/11/01 13:15:09 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,'
                   ]
        };
2014/11/01 13:15:09 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,'
                               ]
                    }
        };
2014/11/01 13:15:09 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:15:09 LINE is test
2014/11/01 13:15:09 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/01 13:15:09 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:15:09 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:15:09 LINE is uids: [10]
2014/11/01 13:15:09 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/01 13:15:09 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/01 13:15:09 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,'
                                              ]
                                   }
                       }
          }
        ];
2014/11/01 13:15:09 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/01 13:15:09 LINE is result
2014/11/01 13:15:09 brackets: $VAR1 = '}';
2014/11/01 13:15:09 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/01 13:15:09 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:15:09 LINE is 1
2014/11/01 13:15:09 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:15:09 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/01 13:15:09 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:15:09 LINE is qqqq [123]
2014/11/01 13:15:09 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/01 13:15:09 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/01 13:15:09 LINE is 2
2014/11/01 13:15:09 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:15:09 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/01 13:15:09 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:15:09 LINE is qqqq [567]
2014/11/01 13:15:09 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/01 13:15:09 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:15:09 LINE is total
2014/11/01 13:15:09 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/01 13:15:09 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:15:09 FUNCTION do_parse,$VAR1 = {};
2014/11/01 13:15:09 LINE is inbox: [002, 005]
2014/11/01 13:15:09 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 13:15:09 LINE is test: [10]
2014/11/01 13:15:09 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/01 13:15:09 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/01 13:15:09 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/01 13:15:09 OK, parsing completed
2014/11/01 13:15:09 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/01 13:15:12 mode = 1
2014/11/01 13:15:12 client connected to pid 22882
2014/11/01 13:15:12 <<<: 1 LOGIN test@localhost "123123123"
2014/11/01 13:15:12 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/01 13:15:12 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:15:12 >>>: OK Authentication successful
2014/11/01 13:15:12 <<<: 2 CAPABILITY
2014/11/01 13:15:12 >>>: * CAPABILITY FAKE IMAP
2014/11/01 13:15:12 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/01 13:15:12 >>>: OK CAPABILITY completed
2014/11/01 13:15:12 <<<: 3 XLIST "" *
2014/11/01 13:15:12 >>>: * XLIST () "/" "test"
2014/11/01 13:15:12 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/01 13:15:12 >>>: OK LIST completed
2014/11/01 13:15:12 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 13:15:12 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/01 13:15:12 >>>: OK STATUS completed
2014/11/01 13:15:12 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/01 13:15:12 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/01 13:15:12 >>>: OK STATUS completed
2014/11/01 13:15:12 <<<: 6 SELECT "Inbox"
2014/11/01 13:15:12 >>>: FLAGS ()
2014/11/01 13:15:12 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 13:15:12 >>>: 3 EXISTS
2014/11/01 13:15:12 >>>: 3 RECENT
2014/11/01 13:15:12 >>>: OK [UNSEEN 2]
2014/11/01 13:15:12 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/01 13:15:12 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/01 13:15:12 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 13:15:12 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 13:15:12 OMNO    1, *, INTERNALDATE FLAGSi, 
2014/11/01 13:15:32 <<<: 8 SELECT "test"
2014/11/01 13:15:32 >>>: FLAGS ()
2014/11/01 13:15:32 >>>: OK [PERMANENTFLAGS] ()
2014/11/01 13:15:32 >>>: 2 EXISTS
2014/11/01 13:15:32 >>>: 2 RECENT
2014/11/01 13:15:32 >>>: OK [UNSEEN 2]
2014/11/01 13:15:32 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/01 13:15:32 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/01 13:15:32 >>>: OK [READ-WRITE] SELECT completed
2014/11/01 13:15:32 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/01 13:15:32 OMNO    1, *, INTERNALDATE FLAGSi, 
2014/11/01 13:15:52 <<<: 10 LOGOUT
2014/11/04 06:43:07 mode = 1
2014/11/04 06:43:07 client connected to pid 27341
2014/11/04 06:43:07 <<<: 1 LOGIN test@localhost "123123123"
2014/11/04 06:43:07 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 06:43:07 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 06:43:07 >>>: OK Authentication successful
2014/11/04 06:43:07 <<<: 2 CAPABILITY
2014/11/04 06:43:07 >>>: * CAPABILITY FAKE IMAP
2014/11/04 06:43:07 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 06:43:07 >>>: OK CAPABILITY completed
2014/11/04 06:43:08 <<<: 3 XLIST "" *
2014/11/04 06:43:08 >>>: * XLIST () "/" "test"
2014/11/04 06:43:08 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/04 06:43:08 >>>: OK LIST completed
2014/11/04 06:43:08 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 06:43:08 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/04 06:43:08 >>>: OK STATUS completed
2014/11/04 06:43:08 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 06:43:08 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/04 06:43:08 >>>: OK STATUS completed
2014/11/04 06:43:08 <<<: 6 SELECT "Inbox"
2014/11/04 06:43:08 >>>: FLAGS ()
2014/11/04 06:43:08 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 06:43:08 >>>: 3 EXISTS
2014/11/04 06:43:08 >>>: 3 RECENT
2014/11/04 06:43:08 >>>: OK [UNSEEN 2]
2014/11/04 06:43:08 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/04 06:43:08 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/04 06:43:08 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 06:43:08 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 06:43:08 OMNO    1, *, INTERNALDATE FLAGSi, 
2014/11/04 06:43:28 <<<: 8 SELECT "test"
2014/11/04 06:43:28 >>>: FLAGS ()
2014/11/04 06:43:28 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 06:43:28 >>>: 2 EXISTS
2014/11/04 06:43:28 >>>: 2 RECENT
2014/11/04 06:43:28 >>>: OK [UNSEEN 2]
2014/11/04 06:43:28 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/04 06:43:28 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/04 06:43:28 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 06:43:28 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 06:43:28 OMNO    1, *, INTERNALDATE FLAGSi, 
2014/11/04 06:43:48 <<<: 10 LOGOUT
2014/11/04 07:25:53 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:25:53 LINE is imap
2014/11/04 07:25:53 brackets: $VAR1 = '}';
2014/11/04 07:25:53 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 07:25:53 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:25:53 LINE is login:
2014/11/04 07:25:53 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:25:53 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 07:25:53 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:25:53 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:25:53 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:25:53 LINE is capability
2014/11/04 07:25:53 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:25:53 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:25:53 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:25:53 LINE is * CAPABILITY FAKE IMAP
2014/11/04 07:25:53 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:25:53 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:25:53 LINE is test
2014/11/04 07:25:53 brackets: $VAR1 = ']';
2014/11/04 07:25:53 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:25:53 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:25:53 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:25:53 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:25:53 LINE is Inbox: 
2014/11/04 07:25:53 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:25:53 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 07:25:53 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:25:53 LINE is uids
2014/11/04 07:25:53 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:25:53 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:25:53 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:25:53 LINE is 001 [seen, recent],
2014/11/04 07:25:53 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:25:53 LINE is 003 [recent],
2014/11/04 07:25:53 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:25:53 LINE is 005 [
2014/11/04 07:25:53 000 Syntax error in config, check {} or [] brackets, $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:25:53 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             []
                           ],
                 'imap' => undef,
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 07:25:54 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:25:54 LINE is imap
2014/11/04 07:25:54 brackets: $VAR1 = '}';
2014/11/04 07:25:54 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 07:25:54 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:25:54 LINE is login:
2014/11/04 07:25:54 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:25:54 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 07:25:54 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:25:54 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:25:54 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:25:54 LINE is capability
2014/11/04 07:25:54 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:25:54 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:25:54 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:25:54 LINE is * CAPABILITY FAKE IMAP
2014/11/04 07:25:54 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:25:54 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:25:54 LINE is test
2014/11/04 07:25:54 brackets: $VAR1 = ']';
2014/11/04 07:25:54 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:25:54 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:25:54 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:25:54 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:25:54 LINE is Inbox: 
2014/11/04 07:25:54 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:25:54 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 07:25:54 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:25:54 LINE is uids
2014/11/04 07:25:54 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:25:54 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:25:54 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:25:54 LINE is 001 [seen, recent],
2014/11/04 07:25:54 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:25:54 LINE is 003 [recent],
2014/11/04 07:25:54 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:25:54 LINE is 005 [
2014/11/04 07:25:54 000 Syntax error in config, check {} or [] brackets, $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:25:54 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             []
                           ],
                 'imap' => undef,
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 07:26:03 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:26:03 LINE is imap
2014/11/04 07:26:03 brackets: $VAR1 = '}';
2014/11/04 07:26:03 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 07:26:03 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:26:03 LINE is login:
2014/11/04 07:26:03 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:26:03 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 07:26:03 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:26:03 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:26:03 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:26:03 LINE is capability
2014/11/04 07:26:03 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:26:03 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:26:03 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:26:03 LINE is * CAPABILITY FAKE IMAP
2014/11/04 07:26:03 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:26:03 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:26:03 LINE is test
2014/11/04 07:26:03 brackets: $VAR1 = ']';
2014/11/04 07:26:03 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:26:03 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:26:03 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:26:03 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:26:03 LINE is Inbox: 
2014/11/04 07:26:03 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:26:03 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 07:26:03 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:26:03 LINE is uids
2014/11/04 07:26:03 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:26:03 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:26:03 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:26:03 LINE is 001 [seen, recent],
2014/11/04 07:26:03 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:26:03 LINE is 003 [recent],
2014/11/04 07:26:03 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:26:03 LINE is 005 [
2014/11/04 07:26:03 000 Syntax error in config, check {} or [] brackets, $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:26:03 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             []
                           ],
                 'imap' => undef,
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 07:27:14 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:14 LINE is imap
2014/11/04 07:27:14 brackets: $VAR1 = '}';
2014/11/04 07:27:14 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 07:27:14 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:14 LINE is login:
2014/11/04 07:27:14 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:27:14 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 07:27:14 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:27:14 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:27:14 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:27:14 LINE is capability
2014/11/04 07:27:14 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:27:14 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:27:14 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:27:14 LINE is * CAPABILITY FAKE IMAP
2014/11/04 07:27:14 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:27:14 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:27:14 LINE is test
2014/11/04 07:27:14 brackets: $VAR1 = ']';
2014/11/04 07:27:14 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:27:14 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:27:14 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:27:14 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:14 LINE is Inbox: 
2014/11/04 07:27:14 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:27:14 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 07:27:14 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:14 LINE is uids
2014/11/04 07:27:14 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:27:14 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:27:14 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:14 LINE is 001 [seen, recent],
2014/11/04 07:27:14 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:27:14 LINE is 003 [recent],
2014/11/04 07:27:14 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:27:14 LINE is 005 [RECENT]
2014/11/04 07:27:14 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:27:14 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:27:14 LINE is flags [ hashnochildren, noselect]
2014/11/04 07:27:14 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:27:14 LINE is uidvalidity : 13123
2014/11/04 07:27:14 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:27:14 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:27:14 LINE is test
2014/11/04 07:27:14 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:27:14 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:27:14 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:14 LINE is uids
2014/11/04 07:27:14 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:27:14 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:27:14 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:14 LINE is 10 [recent],
2014/11/04 07:27:14 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 07:27:14 LINE is 11 [recent],
2014/11/04 07:27:14 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 07:27:14 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 07:27:14 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:27:14 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 07:27:14 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:27:14 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:14 LINE is inbox
2014/11/04 07:27:14 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:27:14 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 07:27:14 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:14 LINE is uids
2014/11/04 07:27:14 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:27:14 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:27:14 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:14 LINE is 002 [seen,answered],
2014/11/04 07:27:14 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 07:27:14 LINE is 005
2014/11/04 07:27:14 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 07:27:14 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 07:27:14 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:27:14 LINE is seen,
2014/11/04 07:27:14 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,'
                   ]
        };
2014/11/04 07:27:14 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,'
                               ]
                    }
        };
2014/11/04 07:27:14 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/04 07:27:14 LINE is test
2014/11/04 07:27:14 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:27:14 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/04 07:27:14 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:14 LINE is uids: [10]
2014/11/04 07:27:14 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 07:27:14 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/04 07:27:14 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 07:27:14 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:27:14 LINE is result
2014/11/04 07:27:14 brackets: $VAR1 = '}';
2014/11/04 07:27:14 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 07:27:14 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:14 LINE is 1
2014/11/04 07:27:14 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:27:14 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 07:27:14 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:14 LINE is qqqq [123]
2014/11/04 07:27:14 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 07:27:14 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 07:27:14 LINE is 2
2014/11/04 07:27:14 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:27:14 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 07:27:14 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:14 LINE is qqqq [567]
2014/11/04 07:27:14 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 07:27:14 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:27:14 LINE is total
2014/11/04 07:27:14 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:27:14 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:27:14 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:14 LINE is inbox: [002, 005]
2014/11/04 07:27:14 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 07:27:14 LINE is test: [10]
2014/11/04 07:27:14 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 07:27:14 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:27:14 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 07:27:14 OK, parsing completed
2014/11/04 07:27:14 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 07:27:41 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:41 LINE is imap
2014/11/04 07:27:41 brackets: $VAR1 = '}';
2014/11/04 07:27:41 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 07:27:41 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:41 LINE is login:
2014/11/04 07:27:41 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:27:41 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 07:27:41 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:27:41 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:27:41 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:27:41 LINE is capability
2014/11/04 07:27:41 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:27:41 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:27:41 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:27:41 LINE is * CAPABILITY FAKE IMAP
2014/11/04 07:27:41 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:27:41 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:27:41 LINE is test
2014/11/04 07:27:41 brackets: $VAR1 = ']';
2014/11/04 07:27:41 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:27:41 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:27:41 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:27:41 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:41 LINE is Inbox: 
2014/11/04 07:27:41 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:27:41 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 07:27:41 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:41 LINE is uids
2014/11/04 07:27:41 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:27:41 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:27:41 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:41 LINE is 001 [seen, recent],
2014/11/04 07:27:41 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:27:41 LINE is 003 [recent],
2014/11/04 07:27:41 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:27:41 LINE is 005 [RECENT]
2014/11/04 07:27:41 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:27:41 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:27:41 LINE is flags [ hashnochildren, noselect]
2014/11/04 07:27:41 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:27:41 LINE is uidvalidity : 13123
2014/11/04 07:27:41 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:27:41 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:27:41 LINE is test
2014/11/04 07:27:41 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:27:41 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:27:41 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:41 LINE is uids
2014/11/04 07:27:41 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:27:41 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:27:41 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:41 LINE is 10 [recent],
2014/11/04 07:27:41 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 07:27:41 LINE is 11 [recent],
2014/11/04 07:27:41 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 07:27:41 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 07:27:41 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:27:41 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 07:27:41 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:27:41 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:41 LINE is inbox
2014/11/04 07:27:41 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:27:41 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 07:27:41 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:41 LINE is uids
2014/11/04 07:27:41 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:27:41 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:27:41 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:41 LINE is 002 [seen,answered],
2014/11/04 07:27:41 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 07:27:41 LINE is 005
2014/11/04 07:27:41 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 07:27:41 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 07:27:41 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:27:41 LINE is seen,
2014/11/04 07:27:41 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,'
                   ]
        };
2014/11/04 07:27:41 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,'
                               ]
                    }
        };
2014/11/04 07:27:41 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/04 07:27:41 LINE is test
2014/11/04 07:27:41 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:27:41 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/04 07:27:41 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:41 LINE is uids: [10]
2014/11/04 07:27:41 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 07:27:41 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/04 07:27:41 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 07:27:41 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:27:41 LINE is result
2014/11/04 07:27:41 brackets: $VAR1 = '}';
2014/11/04 07:27:41 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 07:27:41 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:41 LINE is 1
2014/11/04 07:27:41 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:27:41 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 07:27:41 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:41 LINE is qqqq [123]
2014/11/04 07:27:41 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 07:27:41 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 07:27:41 LINE is 2
2014/11/04 07:27:41 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:27:41 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 07:27:41 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:41 LINE is qqqq [567]
2014/11/04 07:27:41 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 07:27:41 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:27:41 LINE is total
2014/11/04 07:27:41 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:27:41 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:27:41 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:27:41 LINE is inbox: [002, 005]
2014/11/04 07:27:41 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 07:27:41 LINE is test: [10]
2014/11/04 07:27:41 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 07:27:41 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:27:41 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 07:27:41 OK, parsing completed
2014/11/04 07:27:41 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 07:27:57 mode = 1
2014/11/04 07:27:57 client connected to pid 3342
2014/11/04 07:27:57 <<<: 1 LOGIN test@localhost "123123123"
2014/11/04 07:27:57 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:27:57 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:27:57 >>>: OK Authentication successful
2014/11/04 07:27:57 <<<: 2 CAPABILITY
2014/11/04 07:27:57 >>>: * CAPABILITY FAKE IMAP
2014/11/04 07:27:57 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:27:57 >>>: OK CAPABILITY completed
2014/11/04 07:27:57 <<<: 3 XLIST "" *
2014/11/04 07:27:57 >>>: * XLIST () "/" "test"
2014/11/04 07:27:57 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/04 07:27:57 >>>: OK LIST completed
2014/11/04 07:27:57 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 07:27:57 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/04 07:27:57 >>>: OK STATUS completed
2014/11/04 07:27:57 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 07:27:57 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/04 07:27:57 >>>: OK STATUS completed
2014/11/04 07:27:57 <<<: 6 SELECT "Inbox"
2014/11/04 07:27:57 >>>: FLAGS ()
2014/11/04 07:27:57 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 07:27:57 >>>: 3 EXISTS
2014/11/04 07:27:57 >>>: 3 RECENT
2014/11/04 07:27:57 >>>: OK [UNSEEN 2]
2014/11/04 07:27:57 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/04 07:27:57 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/04 07:27:57 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 07:27:57 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 07:27:57 OMNO    005, , INTERNALDATE FLAGS, 
2014/11/04 07:28:17 <<<: 8 SELECT "test"
2014/11/04 07:28:17 >>>: FLAGS ()
2014/11/04 07:28:17 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 07:28:17 >>>: 2 EXISTS
2014/11/04 07:28:17 >>>: 2 RECENT
2014/11/04 07:28:17 >>>: OK [UNSEEN 2]
2014/11/04 07:28:17 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/04 07:28:17 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/04 07:28:17 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 07:28:17 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 07:28:17 OMNO    005, , INTERNALDATE FLAGS, 
2014/11/04 07:28:37 <<<: 10 LOGOUT
2014/11/04 07:29:22 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:29:22 LINE is imap
2014/11/04 07:29:22 brackets: $VAR1 = '}';
2014/11/04 07:29:22 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 07:29:22 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:29:22 LINE is login:
2014/11/04 07:29:22 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:29:22 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 07:29:22 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:29:22 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:29:22 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:29:22 LINE is capability
2014/11/04 07:29:22 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:29:22 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:29:22 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:29:22 LINE is * CAPABILITY FAKE IMAP
2014/11/04 07:29:22 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:29:22 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:29:22 LINE is test
2014/11/04 07:29:22 brackets: $VAR1 = ']';
2014/11/04 07:29:22 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:29:22 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:29:22 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:29:22 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:29:22 LINE is Inbox: 
2014/11/04 07:29:22 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:29:22 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 07:29:22 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:29:22 LINE is uids
2014/11/04 07:29:22 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:29:22 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:29:22 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:29:22 LINE is 001 [seen, recent],
2014/11/04 07:29:22 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:29:22 LINE is 003 [recent],
2014/11/04 07:29:22 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:29:22 LINE is 005 [RECENT]
2014/11/04 07:29:22 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:29:22 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:29:22 LINE is flags [ hashnochildren, noselect]
2014/11/04 07:29:22 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:29:22 LINE is uidvalidity : 13123
2014/11/04 07:29:22 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:29:22 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:29:22 LINE is test
2014/11/04 07:29:22 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:29:22 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:29:22 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:29:22 LINE is uids
2014/11/04 07:29:22 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:29:22 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:29:22 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:29:22 LINE is 10 [recent],
2014/11/04 07:29:22 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 07:29:22 LINE is 11 [recent],
2014/11/04 07:29:22 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 07:29:22 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 07:29:22 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:29:22 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 07:29:22 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:29:22 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:29:22 LINE is inbox
2014/11/04 07:29:22 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:29:22 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 07:29:22 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:29:22 LINE is uids
2014/11/04 07:29:22 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:29:22 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:29:22 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:29:22 LINE is 002 [seen,answered],
2014/11/04 07:29:22 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 07:29:22 LINE is 005
2014/11/04 07:29:22 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 07:29:22 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 07:29:22 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:29:22 LINE is seen,
2014/11/04 07:29:22 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,'
                   ]
        };
2014/11/04 07:29:22 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,'
                               ]
                    }
        };
2014/11/04 07:29:22 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/04 07:29:22 LINE is test
2014/11/04 07:29:22 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:29:22 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/04 07:29:22 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:29:22 LINE is uids: [10]
2014/11/04 07:29:22 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 07:29:22 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/04 07:29:22 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 07:29:22 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:29:22 LINE is result
2014/11/04 07:29:22 brackets: $VAR1 = '}';
2014/11/04 07:29:22 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 07:29:22 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:29:22 LINE is 1
2014/11/04 07:29:22 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:29:22 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 07:29:22 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:29:22 LINE is qqqq [123]
2014/11/04 07:29:22 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 07:29:22 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 07:29:22 LINE is 2
2014/11/04 07:29:22 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:29:22 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 07:29:22 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:29:22 LINE is qqqq [567]
2014/11/04 07:29:22 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 07:29:22 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:29:22 LINE is total
2014/11/04 07:29:22 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:29:22 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:29:22 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:29:22 LINE is inbox: [002, 005]
2014/11/04 07:29:22 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 07:29:22 LINE is test: [10]
2014/11/04 07:29:22 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 07:29:22 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:29:22 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 07:29:22 OK, parsing completed
2014/11/04 07:29:22 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 07:29:26 mode = 1
2014/11/04 07:29:26 client connected to pid 3631
2014/11/04 07:29:26 <<<: 1 LOGIN test@localhost "123123123"
2014/11/04 07:29:26 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:29:26 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:29:26 >>>: OK Authentication successful
2014/11/04 07:29:26 <<<: 2 CAPABILITY
2014/11/04 07:29:26 >>>: * CAPABILITY FAKE IMAP
2014/11/04 07:29:26 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:29:26 >>>: OK CAPABILITY completed
2014/11/04 07:29:26 <<<: 3 XLIST "" *
2014/11/04 07:29:26 >>>: * XLIST () "/" "test"
2014/11/04 07:29:26 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/04 07:29:26 >>>: OK LIST completed
2014/11/04 07:29:26 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 07:29:26 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/04 07:29:26 >>>: OK STATUS completed
2014/11/04 07:29:26 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 07:29:26 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/04 07:29:26 >>>: OK STATUS completed
2014/11/04 07:29:26 <<<: 6 SELECT "Inbox"
2014/11/04 07:29:26 >>>: FLAGS ()
2014/11/04 07:29:26 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 07:29:26 >>>: 3 EXISTS
2014/11/04 07:29:26 >>>: 3 RECENT
2014/11/04 07:29:26 >>>: OK [UNSEEN 2]
2014/11/04 07:29:26 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/04 07:29:26 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/04 07:29:26 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 07:29:26 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 07:29:26 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS, $4 = 
2014/11/04 07:29:46 <<<: 8 SELECT "test"
2014/11/04 07:29:46 >>>: FLAGS ()
2014/11/04 07:29:46 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 07:29:46 >>>: 2 EXISTS
2014/11/04 07:29:46 >>>: 2 RECENT
2014/11/04 07:29:46 >>>: OK [UNSEEN 2]
2014/11/04 07:29:46 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/04 07:29:46 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/04 07:29:46 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 07:29:46 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 07:29:46 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS, $4 = 
2014/11/04 07:30:06 <<<: 10 LOGOUT
2014/11/04 07:35:26 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:35:26 LINE is imap
2014/11/04 07:35:26 brackets: $VAR1 = '}';
2014/11/04 07:35:26 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 07:35:26 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:35:26 LINE is login:
2014/11/04 07:35:26 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:35:26 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 07:35:26 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:35:26 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:35:26 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:35:26 LINE is capability
2014/11/04 07:35:26 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:35:26 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:35:26 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:35:26 LINE is * CAPABILITY FAKE IMAP
2014/11/04 07:35:26 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:35:26 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:35:26 LINE is test
2014/11/04 07:35:26 brackets: $VAR1 = ']';
2014/11/04 07:35:26 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:35:26 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:35:26 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:35:26 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:35:26 LINE is Inbox: 
2014/11/04 07:35:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:35:26 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 07:35:26 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:35:26 LINE is uids
2014/11/04 07:35:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:35:26 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:35:26 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:35:26 LINE is 001 [seen, recent],
2014/11/04 07:35:26 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:35:26 LINE is 003 [recent],
2014/11/04 07:35:26 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:35:26 LINE is 005 [RECENT]
2014/11/04 07:35:26 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:35:26 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:35:26 LINE is flags [ hashnochildren, noselect]
2014/11/04 07:35:26 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:35:26 LINE is uidvalidity : 13123
2014/11/04 07:35:26 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:35:26 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:35:26 LINE is test
2014/11/04 07:35:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:35:26 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:35:26 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:35:26 LINE is uids
2014/11/04 07:35:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:35:26 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:35:26 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:35:26 LINE is 10 [recent],
2014/11/04 07:35:26 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 07:35:26 LINE is 11 [recent],
2014/11/04 07:35:26 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 07:35:26 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 07:35:26 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:35:26 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 07:35:26 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:35:26 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:35:26 LINE is inbox
2014/11/04 07:35:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:35:26 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 07:35:26 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:35:26 LINE is uids
2014/11/04 07:35:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:35:26 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:35:26 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:35:26 LINE is 002 [seen,answered],
2014/11/04 07:35:26 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 07:35:26 LINE is 005
2014/11/04 07:35:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 07:35:26 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 07:35:26 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:35:26 LINE is seen,
2014/11/04 07:35:26 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,'
                   ]
        };
2014/11/04 07:35:26 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,'
                               ]
                    }
        };
2014/11/04 07:35:26 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/04 07:35:26 LINE is test
2014/11/04 07:35:26 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:35:26 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/04 07:35:26 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:35:26 LINE is uids: [10]
2014/11/04 07:35:26 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 07:35:26 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/04 07:35:26 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 07:35:26 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:35:26 LINE is result
2014/11/04 07:35:26 brackets: $VAR1 = '}';
2014/11/04 07:35:26 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 07:35:26 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:35:26 LINE is 1
2014/11/04 07:35:26 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:35:26 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 07:35:26 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:35:26 LINE is qqqq [123]
2014/11/04 07:35:26 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 07:35:26 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 07:35:26 LINE is 2
2014/11/04 07:35:26 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:35:26 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 07:35:26 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:35:26 LINE is qqqq [567]
2014/11/04 07:35:26 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 07:35:26 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:35:26 LINE is total
2014/11/04 07:35:26 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:35:26 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:35:26 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:35:26 LINE is inbox: [002, 005]
2014/11/04 07:35:26 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 07:35:26 LINE is test: [10]
2014/11/04 07:35:26 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 07:35:26 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:35:26 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 07:35:26 OK, parsing completed
2014/11/04 07:35:26 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 07:35:29 mode = 1
2014/11/04 07:35:29 client connected to pid 4737
2014/11/04 07:35:29 <<<: 1 LOGIN test@localhost "123123123"
2014/11/04 07:35:29 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:35:29 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:35:29 >>>: OK Authentication successful
2014/11/04 07:35:29 <<<: 2 CAPABILITY
2014/11/04 07:35:29 >>>: * CAPABILITY FAKE IMAP
2014/11/04 07:35:29 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:35:29 >>>: OK CAPABILITY completed
2014/11/04 07:35:29 <<<: 3 XLIST "" *
2014/11/04 07:35:29 >>>: * XLIST () "/" "test"
2014/11/04 07:35:29 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/04 07:35:29 >>>: OK LIST completed
2014/11/04 07:35:29 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 07:35:29 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/04 07:35:29 >>>: OK STATUS completed
2014/11/04 07:35:29 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 07:35:29 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/04 07:35:29 >>>: OK STATUS completed
2014/11/04 07:35:29 <<<: 6 SELECT "Inbox"
2014/11/04 07:35:29 >>>: FLAGS ()
2014/11/04 07:35:29 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 07:35:29 >>>: 3 EXISTS
2014/11/04 07:35:29 >>>: 3 RECENT
2014/11/04 07:35:29 >>>: OK [UNSEEN 2]
2014/11/04 07:35:29 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/04 07:35:29 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/04 07:35:29 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 07:35:29 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 07:35:29 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS
2014/11/04 07:36:02 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:36:02 LINE is imap
2014/11/04 07:36:02 brackets: $VAR1 = '}';
2014/11/04 07:36:02 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 07:36:02 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:36:02 LINE is login:
2014/11/04 07:36:02 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:36:02 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 07:36:02 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:36:02 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:36:02 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:36:02 LINE is capability
2014/11/04 07:36:02 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:36:02 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:36:02 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:36:02 LINE is * CAPABILITY FAKE IMAP
2014/11/04 07:36:02 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:36:02 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:36:02 LINE is test
2014/11/04 07:36:02 brackets: $VAR1 = ']';
2014/11/04 07:36:02 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:36:02 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:36:02 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:36:02 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:36:02 LINE is Inbox: 
2014/11/04 07:36:02 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:36:02 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 07:36:02 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:36:02 LINE is uids
2014/11/04 07:36:02 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:36:02 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:36:02 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:36:02 LINE is 001 [seen, recent],
2014/11/04 07:36:02 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:36:02 LINE is 003 [recent],
2014/11/04 07:36:02 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:36:02 LINE is 005 [RECENT]
2014/11/04 07:36:02 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:36:02 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:36:02 LINE is flags [ hashnochildren, noselect]
2014/11/04 07:36:02 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:36:02 LINE is uidvalidity : 13123
2014/11/04 07:36:02 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:36:02 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:36:02 LINE is test
2014/11/04 07:36:02 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:36:02 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:36:02 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:36:02 LINE is uids
2014/11/04 07:36:02 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:36:02 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:36:02 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:36:02 LINE is 10 [recent],
2014/11/04 07:36:02 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 07:36:02 LINE is 11 [recent],
2014/11/04 07:36:02 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 07:36:02 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 07:36:02 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:36:02 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 07:36:02 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:36:02 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:36:02 LINE is inbox
2014/11/04 07:36:02 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:36:02 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 07:36:02 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:36:02 LINE is uids
2014/11/04 07:36:02 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:36:02 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:36:02 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:36:02 LINE is 002 [seen,answered],
2014/11/04 07:36:02 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 07:36:02 LINE is 005
2014/11/04 07:36:02 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 07:36:02 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 07:36:02 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:36:02 LINE is seen,
2014/11/04 07:36:02 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,'
                   ]
        };
2014/11/04 07:36:02 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,'
                               ]
                    }
        };
2014/11/04 07:36:02 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/04 07:36:02 LINE is test
2014/11/04 07:36:02 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:36:02 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/04 07:36:02 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:36:02 LINE is uids: [10]
2014/11/04 07:36:02 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 07:36:02 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/04 07:36:02 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 07:36:02 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:36:02 LINE is result
2014/11/04 07:36:02 brackets: $VAR1 = '}';
2014/11/04 07:36:02 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 07:36:02 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:36:02 LINE is 1
2014/11/04 07:36:02 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:36:02 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 07:36:02 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:36:02 LINE is qqqq [123]
2014/11/04 07:36:02 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 07:36:02 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 07:36:02 LINE is 2
2014/11/04 07:36:02 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:36:02 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 07:36:02 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:36:02 LINE is qqqq [567]
2014/11/04 07:36:02 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 07:36:02 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:36:02 LINE is total
2014/11/04 07:36:02 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:36:02 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:36:02 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:36:02 LINE is inbox: [002, 005]
2014/11/04 07:36:02 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 07:36:02 LINE is test: [10]
2014/11/04 07:36:02 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 07:36:02 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:36:02 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 07:36:02 OK, parsing completed
2014/11/04 07:36:02 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 07:36:05 mode = 1
2014/11/04 07:36:05 client connected to pid 4879
2014/11/04 07:36:05 <<<: 1 LOGIN test@localhost "123123123"
2014/11/04 07:36:05 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:36:05 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:36:05 >>>: OK Authentication successful
2014/11/04 07:36:05 <<<: 2 CAPABILITY
2014/11/04 07:36:05 >>>: * CAPABILITY FAKE IMAP
2014/11/04 07:36:05 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:36:05 >>>: OK CAPABILITY completed
2014/11/04 07:36:05 <<<: 3 XLIST "" *
2014/11/04 07:36:05 >>>: * XLIST () "/" "test"
2014/11/04 07:36:05 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/04 07:36:05 >>>: OK LIST completed
2014/11/04 07:36:05 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 07:36:05 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/04 07:36:05 >>>: OK STATUS completed
2014/11/04 07:36:05 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 07:36:05 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/04 07:36:05 >>>: OK STATUS completed
2014/11/04 07:36:05 <<<: 6 SELECT "Inbox"
2014/11/04 07:36:05 >>>: FLAGS ()
2014/11/04 07:36:05 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 07:36:05 >>>: 3 EXISTS
2014/11/04 07:36:05 >>>: 3 RECENT
2014/11/04 07:36:05 >>>: OK [UNSEEN 2]
2014/11/04 07:36:05 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/04 07:36:05 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/04 07:36:05 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 07:36:05 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 07:36:05 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS
2014/11/04 07:36:05 $2 is not defined
2014/11/04 07:37:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:37:55 LINE is imap
2014/11/04 07:37:55 brackets: $VAR1 = '}';
2014/11/04 07:37:55 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 07:37:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:37:55 LINE is login:
2014/11/04 07:37:55 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:37:55 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 07:37:55 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:37:55 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:37:55 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:37:55 LINE is capability
2014/11/04 07:37:55 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:37:55 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:37:55 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:37:55 LINE is * CAPABILITY FAKE IMAP
2014/11/04 07:37:55 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:37:55 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:37:55 LINE is test
2014/11/04 07:37:55 brackets: $VAR1 = ']';
2014/11/04 07:37:55 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:37:55 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:37:55 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:37:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:37:55 LINE is Inbox: 
2014/11/04 07:37:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:37:55 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 07:37:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:37:55 LINE is uids
2014/11/04 07:37:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:37:55 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:37:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:37:55 LINE is 001 [seen, recent],
2014/11/04 07:37:55 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:37:55 LINE is 003 [recent],
2014/11/04 07:37:55 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:37:55 LINE is 005 [RECENT]
2014/11/04 07:37:55 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:37:55 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:37:55 LINE is flags [ hashnochildren, noselect]
2014/11/04 07:37:55 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:37:55 LINE is uidvalidity : 13123
2014/11/04 07:37:55 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:37:55 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:37:55 LINE is test
2014/11/04 07:37:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:37:55 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:37:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:37:55 LINE is uids
2014/11/04 07:37:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:37:55 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:37:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:37:55 LINE is 10 [recent],
2014/11/04 07:37:55 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 07:37:55 LINE is 11 [recent],
2014/11/04 07:37:55 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 07:37:55 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 07:37:55 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:37:55 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 07:37:55 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:37:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:37:55 LINE is inbox
2014/11/04 07:37:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:37:55 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 07:37:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:37:55 LINE is uids
2014/11/04 07:37:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:37:55 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:37:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:37:55 LINE is 002 [seen,answered],
2014/11/04 07:37:55 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 07:37:55 LINE is 005
2014/11/04 07:37:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 07:37:55 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 07:37:55 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:37:55 LINE is seen,
2014/11/04 07:37:55 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,'
                   ]
        };
2014/11/04 07:37:55 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,'
                               ]
                    }
        };
2014/11/04 07:37:55 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/04 07:37:55 LINE is test
2014/11/04 07:37:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:37:55 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/04 07:37:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:37:55 LINE is uids: [10]
2014/11/04 07:37:55 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 07:37:55 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/04 07:37:55 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 07:37:55 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:37:55 LINE is result
2014/11/04 07:37:55 brackets: $VAR1 = '}';
2014/11/04 07:37:55 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 07:37:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:37:55 LINE is 1
2014/11/04 07:37:55 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:37:55 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 07:37:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:37:55 LINE is qqqq [123]
2014/11/04 07:37:55 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 07:37:55 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 07:37:55 LINE is 2
2014/11/04 07:37:55 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:37:55 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 07:37:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:37:55 LINE is qqqq [567]
2014/11/04 07:37:55 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 07:37:55 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:37:55 LINE is total
2014/11/04 07:37:55 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:37:55 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:37:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:37:55 LINE is inbox: [002, 005]
2014/11/04 07:37:55 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 07:37:55 LINE is test: [10]
2014/11/04 07:37:55 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 07:37:55 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:37:55 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 07:37:55 OK, parsing completed
2014/11/04 07:37:55 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 07:37:59 mode = 1
2014/11/04 07:37:59 client connected to pid 5273
2014/11/04 07:37:59 <<<: 1 LOGIN test@localhost "123123123"
2014/11/04 07:37:59 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:37:59 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:37:59 >>>: OK Authentication successful
2014/11/04 07:38:00 <<<: 2 CAPABILITY
2014/11/04 07:38:00 >>>: * CAPABILITY FAKE IMAP
2014/11/04 07:38:00 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:38:00 >>>: OK CAPABILITY completed
2014/11/04 07:38:00 <<<: 3 XLIST "" *
2014/11/04 07:38:00 >>>: * XLIST () "/" "test"
2014/11/04 07:38:00 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/04 07:38:00 >>>: OK LIST completed
2014/11/04 07:38:00 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 07:38:00 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/04 07:38:00 >>>: OK STATUS completed
2014/11/04 07:38:00 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 07:38:00 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/04 07:38:00 >>>: OK STATUS completed
2014/11/04 07:38:00 <<<: 6 SELECT "Inbox"
2014/11/04 07:38:00 >>>: FLAGS ()
2014/11/04 07:38:00 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 07:38:00 >>>: 3 EXISTS
2014/11/04 07:38:00 >>>: 3 RECENT
2014/11/04 07:38:00 >>>: OK [UNSEEN 2]
2014/11/04 07:38:00 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/04 07:38:00 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/04 07:38:00 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 07:38:00 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 07:38:00 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS
2014/11/04 07:38:00 $2 is not defined
2014/11/04 07:38:00  ******************************************* $VAR1 = '003';
$VAR2 = [
          'recent'
        ];
$VAR3 = '005';
$VAR4 = [
          'RECENT'
        ];
$VAR5 = '001';
$VAR6 = [
          'seen',
          'recent'
        ];
2014/11/04 07:38:20 <<<: 8 SELECT "test"
2014/11/04 07:38:20 >>>: FLAGS ()
2014/11/04 07:38:20 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 07:38:20 >>>: 2 EXISTS
2014/11/04 07:38:20 >>>: 2 RECENT
2014/11/04 07:38:20 >>>: OK [UNSEEN 2]
2014/11/04 07:38:20 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/04 07:38:20 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/04 07:38:20 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 07:38:20 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 07:38:20 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS
2014/11/04 07:38:20 $2 is not defined
2014/11/04 07:38:20  ******************************************* $VAR1 = '11';
$VAR2 = [
          'recent'
        ];
$VAR3 = '10';
$VAR4 = [
          'recent'
        ];
2014/11/04 07:38:40 <<<: 10 LOGOUT
2014/11/04 07:39:33 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:39:33 LINE is imap
2014/11/04 07:39:33 brackets: $VAR1 = '}';
2014/11/04 07:39:33 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 07:39:33 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:39:33 LINE is login:
2014/11/04 07:39:33 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:39:33 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 07:39:33 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:39:33 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:39:33 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:39:33 LINE is capability
2014/11/04 07:39:33 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:39:33 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:39:33 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:39:33 LINE is * CAPABILITY FAKE IMAP
2014/11/04 07:39:33 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:39:33 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:39:33 LINE is test
2014/11/04 07:39:33 brackets: $VAR1 = ']';
2014/11/04 07:39:33 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:39:33 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:39:33 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:39:33 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:39:33 LINE is Inbox: 
2014/11/04 07:39:33 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:39:33 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 07:39:33 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:39:33 LINE is uids
2014/11/04 07:39:33 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:39:33 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:39:33 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:39:33 LINE is 001 [seen, recent],
2014/11/04 07:39:33 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:39:33 LINE is 003 [recent],
2014/11/04 07:39:33 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:39:33 LINE is 005 [RECENT]
2014/11/04 07:39:33 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:39:33 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:39:33 LINE is flags [ hashnochildren, noselect]
2014/11/04 07:39:33 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:39:33 LINE is uidvalidity : 13123
2014/11/04 07:39:33 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:39:33 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:39:33 LINE is test
2014/11/04 07:39:33 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:39:33 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:39:33 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:39:33 LINE is uids
2014/11/04 07:39:33 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:39:33 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:39:33 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:39:33 LINE is 10 [recent],
2014/11/04 07:39:33 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 07:39:33 LINE is 11 [recent],
2014/11/04 07:39:33 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 07:39:33 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 07:39:33 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:39:33 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 07:39:33 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:39:33 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:39:33 LINE is inbox
2014/11/04 07:39:33 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:39:33 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 07:39:33 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:39:33 LINE is uids
2014/11/04 07:39:33 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:39:33 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:39:33 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:39:33 LINE is 002 [seen,answered],
2014/11/04 07:39:33 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 07:39:33 LINE is 005
2014/11/04 07:39:33 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 07:39:33 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 07:39:33 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:39:33 LINE is seen,
2014/11/04 07:39:33 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,'
                   ]
        };
2014/11/04 07:39:33 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,'
                               ]
                    }
        };
2014/11/04 07:39:33 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/04 07:39:33 LINE is test
2014/11/04 07:39:33 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:39:33 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/04 07:39:33 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:39:33 LINE is uids: [10]
2014/11/04 07:39:33 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 07:39:33 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,'
                                            ]
                                 }
                     }
        };
2014/11/04 07:39:33 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 07:39:33 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:39:33 LINE is result
2014/11/04 07:39:33 brackets: $VAR1 = '}';
2014/11/04 07:39:33 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 07:39:33 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:39:33 LINE is 1
2014/11/04 07:39:33 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:39:33 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 07:39:33 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:39:33 LINE is qqqq [123]
2014/11/04 07:39:33 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 07:39:33 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 07:39:33 LINE is 2
2014/11/04 07:39:33 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:39:33 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 07:39:33 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:39:33 LINE is qqqq [567]
2014/11/04 07:39:33 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 07:39:33 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:39:33 LINE is total
2014/11/04 07:39:33 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:39:33 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:39:33 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:39:33 LINE is inbox: [002, 005]
2014/11/04 07:39:33 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 07:39:33 LINE is test: [10]
2014/11/04 07:39:33 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 07:39:33 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:39:33 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 07:39:33 OK, parsing completed
2014/11/04 07:39:33 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 07:39:35 mode = 1
2014/11/04 07:39:35 client connected to pid 5556
2014/11/04 07:39:35 <<<: 1 LOGIN test@localhost "123123123"
2014/11/04 07:39:35 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:39:35 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:39:35 >>>: OK Authentication successful
2014/11/04 07:39:35 <<<: 2 CAPABILITY
2014/11/04 07:39:35 >>>: * CAPABILITY FAKE IMAP
2014/11/04 07:39:35 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:39:35 >>>: OK CAPABILITY completed
2014/11/04 07:39:35 <<<: 3 XLIST "" *
2014/11/04 07:39:35 >>>: * XLIST () "/" "test"
2014/11/04 07:39:35 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/04 07:39:35 >>>: OK LIST completed
2014/11/04 07:39:35 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 07:39:35 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/04 07:39:35 >>>: OK STATUS completed
2014/11/04 07:39:35 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 07:39:35 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/04 07:39:35 >>>: OK STATUS completed
2014/11/04 07:39:35 <<<: 6 SELECT "Inbox"
2014/11/04 07:39:35 >>>: FLAGS ()
2014/11/04 07:39:35 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 07:39:35 >>>: 3 EXISTS
2014/11/04 07:39:35 >>>: 3 RECENT
2014/11/04 07:39:35 >>>: OK [UNSEEN 2]
2014/11/04 07:39:35 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/04 07:39:35 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/04 07:39:35 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 07:39:35 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 07:39:35 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS
2014/11/04 07:39:35 $2 is not defined
2014/11/04 07:39:35  ******************************************* $VAR1 = 'RECENT';
2014/11/04 07:39:55 <<<: 8 SELECT "test"
2014/11/04 07:39:55 >>>: FLAGS ()
2014/11/04 07:39:55 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 07:39:55 >>>: 2 EXISTS
2014/11/04 07:39:55 >>>: 2 RECENT
2014/11/04 07:39:55 >>>: OK [UNSEEN 2]
2014/11/04 07:39:55 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/04 07:39:55 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/04 07:39:55 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 07:39:55 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 07:39:55 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS
2014/11/04 07:39:55 $2 is not defined
2014/11/04 07:39:55  ******************************************* 
2014/11/04 07:40:15 <<<: 10 LOGOUT
2014/11/04 07:44:36 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:44:36 LINE is imap
2014/11/04 07:44:36 brackets: $VAR1 = '}';
2014/11/04 07:44:36 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 07:44:36 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:44:36 LINE is login:
2014/11/04 07:44:36 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:44:36 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 07:44:36 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:44:36 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:44:36 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:44:36 LINE is capability
2014/11/04 07:44:36 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:44:36 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:44:36 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:44:36 LINE is * CAPABILITY FAKE IMAP
2014/11/04 07:44:36 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:44:36 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:44:36 LINE is test
2014/11/04 07:44:36 brackets: $VAR1 = ']';
2014/11/04 07:44:36 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:44:36 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:44:36 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:44:36 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:44:36 LINE is Inbox: 
2014/11/04 07:44:36 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:44:36 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 07:44:36 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:44:36 LINE is uids
2014/11/04 07:44:36 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:44:36 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:44:36 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:44:36 LINE is 001 [seen, recent],
2014/11/04 07:44:36 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:44:36 LINE is 003 [recent],
2014/11/04 07:44:36 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:44:36 LINE is 005 [RECENT]
2014/11/04 07:44:36 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:44:36 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:44:36 LINE is flags [ hashnochildren, noselect]
2014/11/04 07:44:36 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:44:36 LINE is uidvalidity : 13123
2014/11/04 07:44:36 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:44:36 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:44:36 LINE is test
2014/11/04 07:44:36 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:44:36 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:44:36 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:44:36 LINE is uids
2014/11/04 07:44:36 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:44:36 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:44:36 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:44:36 LINE is 10 [recent],
2014/11/04 07:44:36 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 07:44:36 LINE is 11 [recent],
2014/11/04 07:44:36 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 07:44:36 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 07:44:36 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:44:36 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 07:44:36 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:44:36 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:44:36 LINE is inbox
2014/11/04 07:44:36 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:44:36 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 07:44:36 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:44:36 LINE is uids
2014/11/04 07:44:36 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:44:36 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:44:36 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:44:36 LINE is 002 [seen,answered],
2014/11/04 07:44:36 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 07:44:36 LINE is 005
2014/11/04 07:44:36 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 07:44:36 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 07:44:36 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:44:36 LINE is seen,
2014/11/04 07:44:36 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,',
                     '09-Jul-2014 09:21:57 +0000'
                   ]
        };
2014/11/04 07:44:36 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ]
                    }
        };
2014/11/04 07:44:36 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 07:44:36 LINE is test
2014/11/04 07:44:36 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:44:36 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 07:44:36 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:44:36 LINE is uids: [10]
2014/11/04 07:44:36 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 07:44:36 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 07:44:36 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 07:44:36 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:44:36 LINE is result
2014/11/04 07:44:36 brackets: $VAR1 = '}';
2014/11/04 07:44:36 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 07:44:36 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:44:36 LINE is 1
2014/11/04 07:44:36 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:44:36 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 07:44:36 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:44:36 LINE is qqqq [123]
2014/11/04 07:44:36 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 07:44:36 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 07:44:36 LINE is 2
2014/11/04 07:44:36 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:44:36 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 07:44:36 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:44:36 LINE is qqqq [567]
2014/11/04 07:44:36 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 07:44:36 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:44:36 LINE is total
2014/11/04 07:44:36 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:44:36 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:44:36 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:44:36 LINE is inbox: [002, 005]
2014/11/04 07:44:36 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 07:44:36 LINE is test: [10]
2014/11/04 07:44:36 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 07:44:36 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:44:36 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 07:44:36 OK, parsing completed
2014/11/04 07:44:36 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 07:47:12 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:47:12 LINE is imap
2014/11/04 07:47:12 brackets: $VAR1 = '}';
2014/11/04 07:47:12 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 07:47:12 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:47:12 LINE is login:
2014/11/04 07:47:12 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:47:12 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 07:47:12 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:47:12 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:47:12 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:47:12 LINE is capability
2014/11/04 07:47:12 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:47:12 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:47:12 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:47:12 LINE is * CAPABILITY FAKE IMAP
2014/11/04 07:47:12 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:47:12 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:47:12 LINE is test
2014/11/04 07:47:12 brackets: $VAR1 = ']';
2014/11/04 07:47:12 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:47:12 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:47:12 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:47:12 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:47:12 LINE is Inbox: 
2014/11/04 07:47:12 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:47:12 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 07:47:12 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:47:12 LINE is uids
2014/11/04 07:47:12 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:47:12 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:47:12 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:47:12 LINE is 001 [seen, recent],
2014/11/04 07:47:12 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:47:12 LINE is 003 [recent],
2014/11/04 07:47:12 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:47:12 LINE is 005 
2014/11/04 07:47:12 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 07:47:12 it [] before: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:47:12 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:47:12 LINE is RECENT,
2014/11/04 07:47:12 it {} after: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [
                      'RECENT,',
                      '09-Jul-2014 09:21:57 +0000'
                    ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:47:12 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:47:12 LINE is flags [ hashnochildren, noselect]
2014/11/04 07:47:12 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:47:12 LINE is uidvalidity : 13123
2014/11/04 07:47:12 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:47:12 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:47:12 LINE is test
2014/11/04 07:47:12 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:47:12 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:47:12 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:47:12 LINE is uids
2014/11/04 07:47:12 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:47:12 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:47:12 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:47:12 LINE is 10 [recent],
2014/11/04 07:47:12 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 07:47:12 LINE is 11 [recent],
2014/11/04 07:47:12 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 07:47:12 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 07:47:12 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:47:12 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 07:47:12 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:47:12 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:47:12 LINE is inbox
2014/11/04 07:47:12 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:47:12 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 07:47:12 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:47:12 LINE is uids
2014/11/04 07:47:12 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:47:12 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:47:12 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:47:12 LINE is 002 [seen,answered],
2014/11/04 07:47:12 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 07:47:12 LINE is 005
2014/11/04 07:47:12 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 07:47:12 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 07:47:12 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:47:12 LINE is seen,
2014/11/04 07:47:12 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,',
                     '09-Jul-2014 09:21:57 +0000'
                   ]
        };
2014/11/04 07:47:12 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ]
                    }
        };
2014/11/04 07:47:12 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 07:47:12 LINE is test
2014/11/04 07:47:12 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:47:12 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 07:47:12 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:47:12 LINE is uids: [10]
2014/11/04 07:47:12 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 07:47:12 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 07:47:12 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 07:47:12 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:47:12 LINE is result
2014/11/04 07:47:12 brackets: $VAR1 = '}';
2014/11/04 07:47:12 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 07:47:12 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:47:12 LINE is 1
2014/11/04 07:47:12 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:47:12 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 07:47:12 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:47:12 LINE is qqqq [123]
2014/11/04 07:47:12 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 07:47:12 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 07:47:12 LINE is 2
2014/11/04 07:47:12 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:47:12 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 07:47:12 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:47:12 LINE is qqqq [567]
2014/11/04 07:47:12 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 07:47:12 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:47:12 LINE is total
2014/11/04 07:47:12 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:47:12 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:47:12 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:47:12 LINE is inbox: [002, 005]
2014/11/04 07:47:12 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 07:47:12 LINE is test: [10]
2014/11/04 07:47:12 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 07:47:12 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:47:12 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 07:47:12 OK, parsing completed
2014/11/04 07:47:12 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005 ' => [
                                                                    'RECENT,',
                                                                    '09-Jul-2014 09:21:57 +0000'
                                                                  ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 07:48:54 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:48:54 LINE is imap
2014/11/04 07:48:54 brackets: $VAR1 = '}';
2014/11/04 07:48:54 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 07:48:54 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:48:54 LINE is login:
2014/11/04 07:48:54 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:48:54 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 07:48:54 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:48:54 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:48:54 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:48:54 LINE is capability
2014/11/04 07:48:54 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:48:54 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:48:54 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:48:54 LINE is * CAPABILITY FAKE IMAP
2014/11/04 07:48:54 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:48:54 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:48:54 LINE is test
2014/11/04 07:48:54 brackets: $VAR1 = ']';
2014/11/04 07:48:54 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:48:54 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:48:54 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:48:54 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:48:54 LINE is Inbox: 
2014/11/04 07:48:54 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:48:54 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 07:48:54 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:48:54 LINE is uids
2014/11/04 07:48:54 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:48:54 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:48:54 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:48:54 LINE is 001 [seen, recent],
2014/11/04 07:48:54 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:48:54 LINE is 003 [recent],
2014/11/04 07:48:54 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:48:54 LINE is 005 
2014/11/04 07:48:54 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 07:48:54 it [] before: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:48:54 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:48:54 LINE is RECENT,
2014/11/04 07:48:54 it {} after: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [
                      'RECENT,',
                      '09-Jul-2014 09:21:57 +0000'
                    ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:48:54 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:48:54 LINE is flags [ hashnochildren, noselect]
2014/11/04 07:48:54 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:48:54 LINE is uidvalidity : 13123
2014/11/04 07:48:54 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:48:54 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:48:54 LINE is test
2014/11/04 07:48:54 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:48:54 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:48:54 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:48:54 LINE is uids
2014/11/04 07:48:54 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:48:54 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:48:54 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:48:54 LINE is 10 [recent],
2014/11/04 07:48:54 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 07:48:54 LINE is 11 [recent],
2014/11/04 07:48:54 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 07:48:54 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 07:48:54 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:48:54 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 07:48:54 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:48:54 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:48:54 LINE is inbox
2014/11/04 07:48:54 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:48:54 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 07:48:54 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:48:54 LINE is uids
2014/11/04 07:48:54 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:48:54 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:48:54 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:48:54 LINE is 002 [seen,answered],
2014/11/04 07:48:54 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 07:48:54 LINE is 005
2014/11/04 07:48:54 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 07:48:54 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 07:48:54 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:48:54 LINE is seen,
2014/11/04 07:48:54 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,',
                     '09-Jul-2014 09:21:57 +0000'
                   ]
        };
2014/11/04 07:48:54 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ]
                    }
        };
2014/11/04 07:48:54 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 07:48:54 LINE is test
2014/11/04 07:48:54 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:48:54 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 07:48:54 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:48:54 LINE is uids: [10]
2014/11/04 07:48:54 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 07:48:54 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 07:48:54 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 07:48:54 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:48:54 LINE is result
2014/11/04 07:48:54 brackets: $VAR1 = '}';
2014/11/04 07:48:54 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 07:48:54 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:48:54 LINE is 1
2014/11/04 07:48:54 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:48:54 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 07:48:54 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:48:54 LINE is qqqq [123]
2014/11/04 07:48:54 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 07:48:54 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 07:48:54 LINE is 2
2014/11/04 07:48:54 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:48:54 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 07:48:54 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:48:54 LINE is qqqq [567]
2014/11/04 07:48:54 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 07:48:54 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:48:54 LINE is total
2014/11/04 07:48:54 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:48:54 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:48:54 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:48:54 LINE is inbox: [002, 005]
2014/11/04 07:48:54 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 07:48:54 LINE is test: [10]
2014/11/04 07:48:54 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 07:48:54 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:48:54 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 07:48:54 OK, parsing completed
2014/11/04 07:48:54 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005 ' => [
                                                                    'RECENT,',
                                                                    '09-Jul-2014 09:21:57 +0000'
                                                                  ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 07:49:09 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:49:09 LINE is imap
2014/11/04 07:49:09 brackets: $VAR1 = '}';
2014/11/04 07:49:09 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 07:49:09 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:49:09 LINE is login:
2014/11/04 07:49:09 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:49:09 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 07:49:09 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:49:09 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:49:09 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:49:09 LINE is capability
2014/11/04 07:49:09 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 07:49:09 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:49:09 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:49:09 LINE is * CAPABILITY FAKE IMAP
2014/11/04 07:49:09 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:49:09 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:49:09 LINE is test
2014/11/04 07:49:09 brackets: $VAR1 = ']';
2014/11/04 07:49:09 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:49:09 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:49:09 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:49:09 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:49:09 LINE is Inbox: 
2014/11/04 07:49:09 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:49:09 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 07:49:09 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:49:09 LINE is uids
2014/11/04 07:49:09 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:49:09 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:49:09 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:49:09 LINE is 001 [seen, recent],
2014/11/04 07:49:09 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:49:09 LINE is 003 [recent],
2014/11/04 07:49:09 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:49:09 LINE is 005 
2014/11/04 07:49:09 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 07:49:09 it [] before: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:49:09 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:49:09 LINE is RECENT,
2014/11/04 07:49:09 it {} after: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [
                      'RECENT,',
                      '09-Jul-2014 09:21:57 +0000'
                    ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 07:49:09 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:49:09 LINE is flags [ hashnochildren, noselect]
2014/11/04 07:49:09 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:49:09 LINE is uidvalidity : 13123
2014/11/04 07:49:09 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 07:49:09 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:49:09 LINE is test
2014/11/04 07:49:09 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:49:09 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:49:09 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:49:09 LINE is uids
2014/11/04 07:49:09 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:49:09 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:49:09 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:49:09 LINE is 10 [recent],
2014/11/04 07:49:09 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 07:49:09 LINE is 11 [recent],
2014/11/04 07:49:09 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 07:49:09 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 07:49:09 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 07:49:09 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 07:49:09 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 07:49:09 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:49:09 LINE is inbox
2014/11/04 07:49:09 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:49:09 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 07:49:09 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:49:09 LINE is uids
2014/11/04 07:49:09 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 07:49:09 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 07:49:09 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:49:09 LINE is 002 [seen,answered],
2014/11/04 07:49:09 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 07:49:09 LINE is 005
2014/11/04 07:49:09 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 07:49:09 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 07:49:09 FUNCTION do_parse,$VAR1 = [];
2014/11/04 07:49:09 LINE is seen,
2014/11/04 07:49:09 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,',
                     '09-Jul-2014 09:21:57 +0000'
                   ]
        };
2014/11/04 07:49:09 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ]
                    }
        };
2014/11/04 07:49:09 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 07:49:09 LINE is test
2014/11/04 07:49:09 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 07:49:09 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 07:49:09 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:49:09 LINE is uids: [10]
2014/11/04 07:49:09 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 07:49:09 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 07:49:09 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 07:49:09 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 07:49:09 LINE is result
2014/11/04 07:49:09 brackets: $VAR1 = '}';
2014/11/04 07:49:09 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 07:49:09 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:49:09 LINE is 1
2014/11/04 07:49:09 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:49:09 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 07:49:09 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:49:09 LINE is qqqq [123]
2014/11/04 07:49:09 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 07:49:09 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 07:49:09 LINE is 2
2014/11/04 07:49:09 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:49:09 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 07:49:09 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:49:09 LINE is qqqq [567]
2014/11/04 07:49:09 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 07:49:09 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:49:09 LINE is total
2014/11/04 07:49:09 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 07:49:09 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:49:09 FUNCTION do_parse,$VAR1 = {};
2014/11/04 07:49:09 LINE is inbox: [002, 005]
2014/11/04 07:49:09 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 07:49:09 LINE is test: [10]
2014/11/04 07:49:09 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 07:49:09 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 07:49:09 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 07:49:09 OK, parsing completed
2014/11/04 07:49:09 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005 ' => [
                                                                    'RECENT,',
                                                                    '09-Jul-2014 09:21:57 +0000'
                                                                  ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 07:49:13 mode = 1
2014/11/04 07:49:13 client connected to pid 7360
2014/11/04 07:49:13 <<<: 1 LOGIN test@localhost "123123123"
2014/11/04 07:49:13 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 07:49:13 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:49:13 >>>: OK Authentication successful
2014/11/04 07:49:13 <<<: 2 CAPABILITY
2014/11/04 07:49:13 >>>: * CAPABILITY FAKE IMAP
2014/11/04 07:49:13 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 07:49:13 >>>: OK CAPABILITY completed
2014/11/04 07:49:13 <<<: 3 XLIST "" *
2014/11/04 07:49:13 >>>: * XLIST () "/" "test"
2014/11/04 07:49:13 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/04 07:49:13 >>>: OK LIST completed
2014/11/04 07:49:13 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 07:49:13 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/04 07:49:13 >>>: OK STATUS completed
2014/11/04 07:49:13 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 07:49:13 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/04 07:49:13 >>>: OK STATUS completed
2014/11/04 07:49:13 <<<: 6 SELECT "Inbox"
2014/11/04 07:49:13 >>>: FLAGS ()
2014/11/04 07:49:13 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 07:49:13 >>>: 3 EXISTS
2014/11/04 07:49:13 >>>: 3 RECENT
2014/11/04 07:49:13 >>>: OK [UNSEEN 2]
2014/11/04 07:49:13 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/04 07:49:13 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/04 07:49:13 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 07:49:13 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 07:49:13 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS
2014/11/04 07:49:13 $2 is not defined
2014/11/04 07:49:13  ******************************************* 
2014/11/04 07:49:33 <<<: 8 SELECT "test"
2014/11/04 07:49:33 >>>: FLAGS ()
2014/11/04 07:49:33 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 07:49:33 >>>: 2 EXISTS
2014/11/04 07:49:33 >>>: 2 RECENT
2014/11/04 07:49:33 >>>: OK [UNSEEN 2]
2014/11/04 07:49:33 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/04 07:49:33 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/04 07:49:33 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 07:49:33 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 07:49:33 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS
2014/11/04 07:49:33 $2 is not defined
2014/11/04 07:49:33  ******************************************* 
2014/11/04 07:49:53 <<<: 10 LOGOUT
2014/11/04 08:14:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:14:57 LINE is imap
2014/11/04 08:14:57 brackets: $VAR1 = '}';
2014/11/04 08:14:57 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 08:14:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:14:57 LINE is login:
2014/11/04 08:14:57 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:14:57 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 08:14:57 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:14:57 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:14:57 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:14:57 LINE is capability
2014/11/04 08:14:57 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:14:57 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:14:57 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:14:57 LINE is * CAPABILITY FAKE IMAP
2014/11/04 08:14:57 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:14:57 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:14:57 LINE is test
2014/11/04 08:14:57 brackets: $VAR1 = ']';
2014/11/04 08:14:57 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:14:57 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:14:57 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:14:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:14:57 LINE is Inbox: 
2014/11/04 08:14:57 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:14:57 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 08:14:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:14:57 LINE is uids
2014/11/04 08:14:57 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:14:57 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:14:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:14:57 LINE is 001 [seen, recent],
2014/11/04 08:14:57 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:14:57 LINE is 003 [recent],
2014/11/04 08:14:57 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:14:57 LINE is 005 
2014/11/04 08:14:57 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:14:57 it [] before: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:14:57 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:14:57 LINE is RECENT,
2014/11/04 08:14:57 it {} after: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [
                      'RECENT,',
                      '09-Jul-2014 09:21:57 +0000'
                    ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:14:57 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:14:57 LINE is flags [ hashnochildren, noselect]
2014/11/04 08:14:57 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:14:57 LINE is uidvalidity : 13123
2014/11/04 08:14:57 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:14:57 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:14:57 LINE is test
2014/11/04 08:14:57 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:14:57 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:14:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:14:57 LINE is uids
2014/11/04 08:14:57 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:14:57 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:14:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:14:57 LINE is 10 [recent],
2014/11/04 08:14:57 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:14:57 LINE is 11 [recent],
2014/11/04 08:14:57 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:14:57 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 08:14:57 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:14:57 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:14:57 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:14:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:14:57 LINE is inbox
2014/11/04 08:14:57 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:14:57 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 08:14:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:14:57 LINE is uids
2014/11/04 08:14:57 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:14:57 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:14:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:14:57 LINE is 002 [seen,answered],
2014/11/04 08:14:57 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 08:14:57 LINE is 005
2014/11/04 08:14:57 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:14:57 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 08:14:57 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:14:57 LINE is seen,
2014/11/04 08:14:57 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,',
                     '09-Jul-2014 09:21:57 +0000'
                   ]
        };
2014/11/04 08:14:57 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ]
                    }
        };
2014/11/04 08:14:57 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:14:57 LINE is test
2014/11/04 08:14:57 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:14:57 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:14:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:14:57 LINE is uids: [10]
2014/11/04 08:14:57 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 08:14:57 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:14:57 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:14:57 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:14:57 LINE is result
2014/11/04 08:14:57 brackets: $VAR1 = '}';
2014/11/04 08:14:57 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 08:14:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:14:57 LINE is 1
2014/11/04 08:14:57 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:14:57 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 08:14:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:14:57 LINE is qqqq [123]
2014/11/04 08:14:57 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 08:14:57 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 08:14:57 LINE is 2
2014/11/04 08:14:57 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:14:57 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 08:14:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:14:57 LINE is qqqq [567]
2014/11/04 08:14:57 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 08:14:57 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:14:57 LINE is total
2014/11/04 08:14:57 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:14:57 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:14:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:14:57 LINE is inbox: [002, 005]
2014/11/04 08:14:57 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:14:57 LINE is test: [10]
2014/11/04 08:14:57 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:14:57 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:14:57 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 08:14:57 OK, parsing completed
2014/11/04 08:14:57 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005 ' => [
                                                                    'RECENT,',
                                                                    '09-Jul-2014 09:21:57 +0000'
                                                                  ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 08:15:10 mode = 1
2014/11/04 08:15:10 client connected to pid 12231
2014/11/04 08:15:10 <<<: 1 LOGIN test@localhost "123123123"
2014/11/04 08:15:10 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:15:10 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:15:10 >>>: OK Authentication successful
2014/11/04 08:15:10 <<<: 2 CAPABILITY
2014/11/04 08:15:10 >>>: * CAPABILITY FAKE IMAP
2014/11/04 08:15:10 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:15:10 >>>: OK CAPABILITY completed
2014/11/04 08:15:10 <<<: 3 XLIST "" *
2014/11/04 08:15:10 >>>: * XLIST () "/" "test"
2014/11/04 08:15:10 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/04 08:15:10 >>>: OK LIST completed
2014/11/04 08:15:10 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 08:15:10 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/04 08:15:10 >>>: OK STATUS completed
2014/11/04 08:15:10 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 08:15:10 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/04 08:15:10 >>>: OK STATUS completed
2014/11/04 08:15:10 <<<: 6 SELECT "Inbox"
2014/11/04 08:15:10 >>>: FLAGS ()
2014/11/04 08:15:10 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 08:15:10 >>>: 3 EXISTS
2014/11/04 08:15:10 >>>: 3 RECENT
2014/11/04 08:15:10 >>>: OK [UNSEEN 2]
2014/11/04 08:15:10 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/04 08:15:10 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/04 08:15:10 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 08:15:10 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 08:15:10 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS
2014/11/04 08:15:10 $2 is not defined
2014/11/04 08:15:10  ******************************************* 
2014/11/04 08:15:10 ______________________ 1 FETCH (UID 005 FLAGS ())
2014/11/04 08:15:30 <<<: 8 SELECT "test"
2014/11/04 08:15:30 >>>: FLAGS ()
2014/11/04 08:15:30 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 08:15:30 >>>: 2 EXISTS
2014/11/04 08:15:30 >>>: 2 RECENT
2014/11/04 08:15:30 >>>: OK [UNSEEN 2]
2014/11/04 08:15:30 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/04 08:15:30 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/04 08:15:30 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 08:15:30 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 08:15:30 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS
2014/11/04 08:15:30 $2 is not defined
2014/11/04 08:15:30  ******************************************* 
2014/11/04 08:15:30 ______________________ 1 FETCH (UID 005 FLAGS ())
2014/11/04 08:16:00 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:16:00 LINE is imap
2014/11/04 08:16:00 brackets: $VAR1 = '}';
2014/11/04 08:16:00 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 08:16:00 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:16:00 LINE is login:
2014/11/04 08:16:00 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:16:00 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 08:16:00 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:16:00 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:16:00 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:16:00 LINE is capability
2014/11/04 08:16:00 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:16:00 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:16:00 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:16:00 LINE is * CAPABILITY FAKE IMAP
2014/11/04 08:16:00 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:16:00 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:16:00 LINE is test
2014/11/04 08:16:00 brackets: $VAR1 = ']';
2014/11/04 08:16:00 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:16:00 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:16:00 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:16:00 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:16:00 LINE is Inbox: 
2014/11/04 08:16:00 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:16:00 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 08:16:00 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:16:00 LINE is uids
2014/11/04 08:16:00 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:16:00 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:16:00 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:16:00 LINE is 001 [seen, recent],
2014/11/04 08:16:00 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:16:00 LINE is 003 [recent],
2014/11/04 08:16:00 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:16:00 LINE is 005 
2014/11/04 08:16:00 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:16:00 it [] before: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:16:00 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:16:00 LINE is RECENT,
2014/11/04 08:16:00 it {} after: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [
                      'RECENT,',
                      '09-Jul-2014 09:21:57 +0000'
                    ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:16:00 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:16:00 LINE is flags [ hashnochildren, noselect]
2014/11/04 08:16:00 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:16:00 LINE is uidvalidity : 13123
2014/11/04 08:16:00 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:16:00 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:16:00 LINE is test
2014/11/04 08:16:00 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:16:00 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:16:00 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:16:00 LINE is uids
2014/11/04 08:16:00 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:16:00 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:16:00 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:16:00 LINE is 10 [recent],
2014/11/04 08:16:00 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:16:00 LINE is 11 [recent],
2014/11/04 08:16:00 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:16:00 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 08:16:00 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:16:00 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:16:00 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:16:00 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:16:00 LINE is inbox
2014/11/04 08:16:00 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:16:00 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 08:16:00 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:16:00 LINE is uids
2014/11/04 08:16:00 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:16:00 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:16:00 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:16:00 LINE is 002 [seen,answered],
2014/11/04 08:16:00 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 08:16:00 LINE is 005
2014/11/04 08:16:00 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:16:00 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 08:16:00 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:16:00 LINE is seen,
2014/11/04 08:16:00 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,',
                     '09-Jul-2014 09:21:57 +0000'
                   ]
        };
2014/11/04 08:16:00 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ]
                    }
        };
2014/11/04 08:16:00 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:16:00 LINE is test
2014/11/04 08:16:00 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:16:00 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:16:00 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:16:00 LINE is uids: [10]
2014/11/04 08:16:00 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 08:16:00 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:16:00 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:16:00 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:16:00 LINE is result
2014/11/04 08:16:00 brackets: $VAR1 = '}';
2014/11/04 08:16:00 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 08:16:00 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:16:00 LINE is 1
2014/11/04 08:16:00 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:16:00 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 08:16:00 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:16:00 LINE is qqqq [123]
2014/11/04 08:16:00 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 08:16:00 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 08:16:00 LINE is 2
2014/11/04 08:16:00 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:16:00 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 08:16:00 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:16:00 LINE is qqqq [567]
2014/11/04 08:16:00 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 08:16:00 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:16:00 LINE is total
2014/11/04 08:16:00 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:16:00 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:16:00 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:16:00 LINE is inbox: [002, 005]
2014/11/04 08:16:00 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:16:00 LINE is test: [10]
2014/11/04 08:16:00 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:16:00 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:16:00 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 08:16:00 OK, parsing completed
2014/11/04 08:16:00 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005 ' => [
                                                                    'RECENT,',
                                                                    '09-Jul-2014 09:21:57 +0000'
                                                                  ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 08:16:03 mode = 1
2014/11/04 08:16:03 client connected to pid 12389
2014/11/04 08:16:03 <<<: 1 LOGIN test@localhost "123123123"
2014/11/04 08:16:03 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:16:03 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:16:03 >>>: OK Authentication successful
2014/11/04 08:16:03 <<<: 2 CAPABILITY
2014/11/04 08:16:03 >>>: * CAPABILITY FAKE IMAP
2014/11/04 08:16:03 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:16:03 >>>: OK CAPABILITY completed
2014/11/04 08:16:03 <<<: 3 XLIST "" *
2014/11/04 08:16:03 >>>: * XLIST () "/" "test"
2014/11/04 08:16:03 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/04 08:16:03 >>>: OK LIST completed
2014/11/04 08:16:03 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 08:16:03 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/04 08:16:03 >>>: OK STATUS completed
2014/11/04 08:16:03 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 08:16:03 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/04 08:16:03 >>>: OK STATUS completed
2014/11/04 08:16:03 <<<: 6 SELECT "Inbox"
2014/11/04 08:16:03 >>>: FLAGS ()
2014/11/04 08:16:03 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 08:16:03 >>>: 3 EXISTS
2014/11/04 08:16:03 >>>: 3 RECENT
2014/11/04 08:16:03 >>>: OK [UNSEEN 2]
2014/11/04 08:16:03 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/04 08:16:03 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/04 08:16:03 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 08:16:03 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 08:16:03 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS
2014/11/04 08:16:03 $2 is not defined
2014/11/04 08:16:03  ******************************************* 
2014/11/04 08:16:03 ______________________ 1 FETCH (UID 005 FLAGS ())
2014/11/04 08:16:23 <<<: 8 SELECT "test"
2014/11/04 08:16:23 >>>: FLAGS ()
2014/11/04 08:16:23 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 08:16:23 >>>: 2 EXISTS
2014/11/04 08:16:23 >>>: 2 RECENT
2014/11/04 08:16:23 >>>: OK [UNSEEN 2]
2014/11/04 08:16:23 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/04 08:16:23 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/04 08:16:23 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 08:16:23 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 08:16:23 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS
2014/11/04 08:16:23 $2 is not defined
2014/11/04 08:16:23  ******************************************* 
2014/11/04 08:16:23 ______________________ 1 FETCH (UID 005 FLAGS ())
2014/11/04 08:16:43 <<<: 10 LOGOUT
2014/11/04 08:18:37 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:18:37 LINE is imap
2014/11/04 08:18:37 brackets: $VAR1 = '}';
2014/11/04 08:18:37 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 08:18:37 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:18:37 LINE is login:
2014/11/04 08:18:37 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:18:37 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 08:18:37 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:18:37 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:18:37 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:18:37 LINE is capability
2014/11/04 08:18:37 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:18:37 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:18:37 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:18:37 LINE is * CAPABILITY FAKE IMAP
2014/11/04 08:18:37 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:18:37 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:18:37 LINE is test
2014/11/04 08:18:37 brackets: $VAR1 = ']';
2014/11/04 08:18:37 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:18:37 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:18:37 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:18:37 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:18:37 LINE is Inbox: 
2014/11/04 08:18:37 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:18:37 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 08:18:37 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:18:37 LINE is uids
2014/11/04 08:18:37 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:18:37 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:18:37 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:18:37 LINE is 001 [seen, recent],
2014/11/04 08:18:37 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:18:37 LINE is 003 [recent],
2014/11/04 08:18:37 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:18:37 LINE is 005 
2014/11/04 08:18:37 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:18:37 it [] before: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:18:37 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:18:37 LINE is RECENT,
2014/11/04 08:18:37 it {} after: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [
                      'RECENT,',
                      '09-Jul-2014 09:21:57 +0000'
                    ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:18:37 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:18:37 LINE is flags [ hashnochildren, noselect]
2014/11/04 08:18:37 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:18:37 LINE is uidvalidity : 13123
2014/11/04 08:18:37 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:18:37 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:18:37 LINE is test
2014/11/04 08:18:37 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:18:37 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:18:37 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:18:37 LINE is uids
2014/11/04 08:18:37 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:18:37 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:18:37 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:18:37 LINE is 10 [recent],
2014/11/04 08:18:37 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:18:37 LINE is 11 [recent],
2014/11/04 08:18:37 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:18:37 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 08:18:37 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:18:37 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:18:37 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:18:37 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:18:37 LINE is inbox
2014/11/04 08:18:37 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:18:37 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 08:18:37 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:18:37 LINE is uids
2014/11/04 08:18:37 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:18:37 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:18:37 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:18:37 LINE is 002 [seen,answered],
2014/11/04 08:18:37 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 08:18:37 LINE is 005
2014/11/04 08:18:37 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:18:37 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 08:18:37 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:18:37 LINE is seen,
2014/11/04 08:18:37 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,',
                     '09-Jul-2014 09:21:57 +0000'
                   ]
        };
2014/11/04 08:18:37 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ]
                    }
        };
2014/11/04 08:18:37 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:18:37 LINE is test
2014/11/04 08:18:37 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:18:37 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:18:37 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:18:37 LINE is uids: [10]
2014/11/04 08:18:37 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 08:18:37 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:18:37 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:18:37 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:18:37 LINE is result
2014/11/04 08:18:37 brackets: $VAR1 = '}';
2014/11/04 08:18:37 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 08:18:37 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:18:37 LINE is 1
2014/11/04 08:18:37 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:18:37 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 08:18:37 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:18:37 LINE is qqqq [123]
2014/11/04 08:18:37 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 08:18:37 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 08:18:37 LINE is 2
2014/11/04 08:18:37 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:18:37 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 08:18:37 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:18:37 LINE is qqqq [567]
2014/11/04 08:18:37 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 08:18:37 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:18:37 LINE is total
2014/11/04 08:18:37 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:18:37 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:18:37 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:18:37 LINE is inbox: [002, 005]
2014/11/04 08:18:37 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:18:37 LINE is test: [10]
2014/11/04 08:18:37 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:18:37 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:18:37 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 08:18:37 OK, parsing completed
2014/11/04 08:18:37 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005 ' => [
                                                                    'RECENT,',
                                                                    '09-Jul-2014 09:21:57 +0000'
                                                                  ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 08:18:39 mode = 1
2014/11/04 08:18:39 client connected to pid 12918
2014/11/04 08:18:39 <<<: 1 LOGIN test@localhost "123123123"
2014/11/04 08:18:39 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:18:39 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:18:39 >>>: OK Authentication successful
2014/11/04 08:18:39 <<<: 2 CAPABILITY
2014/11/04 08:18:39 >>>: * CAPABILITY FAKE IMAP
2014/11/04 08:18:39 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:18:39 >>>: OK CAPABILITY completed
2014/11/04 08:18:39 <<<: 3 XLIST "" *
2014/11/04 08:18:39 >>>: * XLIST () "/" "test"
2014/11/04 08:18:39 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/04 08:18:39 >>>: OK LIST completed
2014/11/04 08:18:39 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 08:18:39 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/04 08:18:39 >>>: OK STATUS completed
2014/11/04 08:18:39 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 08:18:39 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/04 08:18:39 >>>: OK STATUS completed
2014/11/04 08:18:39 <<<: 6 SELECT "Inbox"
2014/11/04 08:18:39 >>>: FLAGS ()
2014/11/04 08:18:39 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 08:18:39 >>>: 3 EXISTS
2014/11/04 08:18:39 >>>: 3 RECENT
2014/11/04 08:18:39 >>>: OK [UNSEEN 2]
2014/11/04 08:18:39 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/04 08:18:39 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/04 08:18:39 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 08:18:39 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 08:18:39 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS, $folder = Inbox
2014/11/04 08:18:39 $2 is not defined
2014/11/04 08:18:39  ******************************************* 
2014/11/04 08:18:39 ______________________ 1 FETCH (UID 005 FLAGS ())
2014/11/04 08:18:59 <<<: 8 SELECT "test"
2014/11/04 08:18:59 >>>: FLAGS ()
2014/11/04 08:18:59 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 08:18:59 >>>: 2 EXISTS
2014/11/04 08:18:59 >>>: 2 RECENT
2014/11/04 08:18:59 >>>: OK [UNSEEN 2]
2014/11/04 08:18:59 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/04 08:18:59 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/04 08:18:59 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 08:18:59 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 08:18:59 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS, $folder = test
2014/11/04 08:18:59 $2 is not defined
2014/11/04 08:18:59  ******************************************* 
2014/11/04 08:18:59 ______________________ 1 FETCH (UID 005 FLAGS ())
2014/11/04 08:19:19 <<<: 10 LOGOUT
2014/11/04 08:20:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:06 LINE is imap
2014/11/04 08:20:06 brackets: $VAR1 = '}';
2014/11/04 08:20:06 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 08:20:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:06 LINE is login:
2014/11/04 08:20:06 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:20:06 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 08:20:06 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:20:06 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:20:06 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:20:06 LINE is capability
2014/11/04 08:20:06 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:20:06 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:20:06 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:20:06 LINE is * CAPABILITY FAKE IMAP
2014/11/04 08:20:06 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:20:06 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:20:06 LINE is test
2014/11/04 08:20:06 brackets: $VAR1 = ']';
2014/11/04 08:20:06 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:20:06 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:20:06 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:20:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:06 LINE is Inbox: 
2014/11/04 08:20:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:20:06 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 08:20:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:06 LINE is uids
2014/11/04 08:20:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:20:06 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:20:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:06 LINE is 001 [seen, recent],
2014/11/04 08:20:06 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:20:06 LINE is 003 [recent],
2014/11/04 08:20:06 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:20:06 LINE is 005 
2014/11/04 08:20:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:20:06 it [] before: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:20:06 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:20:06 LINE is RECENT,
2014/11/04 08:20:06 it {} after: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [
                      'RECENT,',
                      '09-Jul-2014 09:21:57 +0000'
                    ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:20:06 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:20:06 LINE is flags [ hashnochildren, noselect]
2014/11/04 08:20:06 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:20:06 LINE is uidvalidity : 13123
2014/11/04 08:20:06 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:20:06 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:20:06 LINE is test
2014/11/04 08:20:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:20:06 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:20:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:06 LINE is uids
2014/11/04 08:20:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:20:06 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:20:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:06 LINE is 10 [recent],
2014/11/04 08:20:06 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:20:06 LINE is 11 [recent],
2014/11/04 08:20:06 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:20:06 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 08:20:06 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:20:06 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:20:06 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:20:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:06 LINE is inbox
2014/11/04 08:20:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:20:06 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 08:20:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:06 LINE is uids
2014/11/04 08:20:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:20:06 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:20:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:06 LINE is 002 [seen,answered],
2014/11/04 08:20:06 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 08:20:06 LINE is 005
2014/11/04 08:20:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:20:06 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 08:20:06 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:20:06 LINE is seen,
2014/11/04 08:20:06 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,',
                     '09-Jul-2014 09:21:57 +0000'
                   ]
        };
2014/11/04 08:20:06 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ]
                    }
        };
2014/11/04 08:20:06 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:20:06 LINE is test
2014/11/04 08:20:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:20:06 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:20:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:06 LINE is uids: [10]
2014/11/04 08:20:06 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 08:20:06 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:20:06 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:20:06 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:20:06 LINE is result
2014/11/04 08:20:06 brackets: $VAR1 = '}';
2014/11/04 08:20:06 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 08:20:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:06 LINE is 1
2014/11/04 08:20:06 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:20:06 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 08:20:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:06 LINE is qqqq [123]
2014/11/04 08:20:06 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 08:20:06 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 08:20:06 LINE is 2
2014/11/04 08:20:06 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:20:06 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 08:20:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:06 LINE is qqqq [567]
2014/11/04 08:20:06 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 08:20:06 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:20:06 LINE is total
2014/11/04 08:20:06 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:20:06 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:20:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:06 LINE is inbox: [002, 005]
2014/11/04 08:20:06 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:20:06 LINE is test: [10]
2014/11/04 08:20:06 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:20:06 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:20:06 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 08:20:06 OK, parsing completed
2014/11/04 08:20:06 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005 ' => [
                                                                    'RECENT,',
                                                                    '09-Jul-2014 09:21:57 +0000'
                                                                  ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 08:20:09 mode = 1
2014/11/04 08:20:09 client connected to pid 13184
2014/11/04 08:20:09 <<<: 1 LOGIN test@localhost "123123123"
2014/11/04 08:20:09 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:20:09 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:20:09 >>>: OK Authentication successful
2014/11/04 08:20:09 <<<: 2 CAPABILITY
2014/11/04 08:20:09 >>>: * CAPABILITY FAKE IMAP
2014/11/04 08:20:09 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:20:09 >>>: OK CAPABILITY completed
2014/11/04 08:20:09 <<<: 3 XLIST "" *
2014/11/04 08:20:09 >>>: * XLIST () "/" "test"
2014/11/04 08:20:09 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/04 08:20:09 >>>: OK LIST completed
2014/11/04 08:20:09 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 08:20:09 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/04 08:20:09 >>>: OK STATUS completed
2014/11/04 08:20:09 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 08:20:09 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/04 08:20:09 >>>: OK STATUS completed
2014/11/04 08:20:09 <<<: 6 SELECT "Inbox"
2014/11/04 08:20:09 >>>: FLAGS ()
2014/11/04 08:20:09 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 08:20:09 >>>: 3 EXISTS
2014/11/04 08:20:09 >>>: 3 RECENT
2014/11/04 08:20:09 >>>: OK [UNSEEN 2]
2014/11/04 08:20:09 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/04 08:20:09 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/04 08:20:09 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 08:20:09 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 08:20:09 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS, $folder = Inbox
2014/11/04 08:20:09 $2 is not defined
2014/11/04 08:20:09  ******************************************* $VAR1 = '003';
$VAR2 = [
          'recent'
        ];
$VAR3 = '005 ';
$VAR4 = [
          'RECENT,',
          '09-Jul-2014 09:21:57 +0000'
        ];
$VAR5 = '001';
$VAR6 = [
          'seen',
          'recent'
        ];
2014/11/04 08:20:09 ______________________ 1 FETCH (UID 005 FLAGS ())
2014/11/04 08:20:29 <<<: 8 SELECT "test"
2014/11/04 08:20:29 >>>: FLAGS ()
2014/11/04 08:20:29 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 08:20:29 >>>: 2 EXISTS
2014/11/04 08:20:29 >>>: 2 RECENT
2014/11/04 08:20:29 >>>: OK [UNSEEN 2]
2014/11/04 08:20:29 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/04 08:20:29 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/04 08:20:29 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 08:20:30 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 08:20:30 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS, $folder = test
2014/11/04 08:20:30 $2 is not defined
2014/11/04 08:20:30  ******************************************* $VAR1 = '11';
$VAR2 = [
          'recent'
        ];
$VAR3 = '10';
$VAR4 = [
          'recent'
        ];
2014/11/04 08:20:30 ______________________ 1 FETCH (UID 005 FLAGS ())
2014/11/04 08:20:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:57 LINE is imap
2014/11/04 08:20:57 brackets: $VAR1 = '}';
2014/11/04 08:20:57 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 08:20:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:57 LINE is login:
2014/11/04 08:20:57 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:20:57 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 08:20:57 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:20:57 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:20:57 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:20:57 LINE is capability
2014/11/04 08:20:57 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:20:57 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:20:57 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:20:57 LINE is * CAPABILITY FAKE IMAP
2014/11/04 08:20:57 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:20:57 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:20:57 LINE is test
2014/11/04 08:20:57 brackets: $VAR1 = ']';
2014/11/04 08:20:57 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:20:57 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:20:57 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:20:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:57 LINE is Inbox: 
2014/11/04 08:20:57 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:20:57 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 08:20:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:57 LINE is uids
2014/11/04 08:20:57 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:20:57 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:20:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:57 LINE is 001 [seen, recent],
2014/11/04 08:20:57 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:20:57 LINE is 003 [recent],
2014/11/04 08:20:57 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:20:57 LINE is 005 
2014/11/04 08:20:57 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:20:57 it [] before: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:20:57 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:20:57 LINE is RECENT,
2014/11/04 08:20:57 it {} after: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [
                      'RECENT,',
                      '09-Jul-2014 09:21:57 +0000'
                    ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:20:57 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:20:57 LINE is flags [ hashnochildren, noselect]
2014/11/04 08:20:57 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:20:57 LINE is uidvalidity : 13123
2014/11/04 08:20:57 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:20:57 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:20:57 LINE is test
2014/11/04 08:20:57 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:20:57 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:20:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:57 LINE is uids
2014/11/04 08:20:57 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:20:57 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:20:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:57 LINE is 10 [recent],
2014/11/04 08:20:57 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:20:57 LINE is 11 [recent],
2014/11/04 08:20:57 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:20:57 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 08:20:57 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:20:57 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:20:57 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:20:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:57 LINE is inbox
2014/11/04 08:20:57 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:20:57 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 08:20:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:57 LINE is uids
2014/11/04 08:20:57 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:20:57 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:20:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:57 LINE is 002 [seen,answered],
2014/11/04 08:20:57 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 08:20:57 LINE is 005
2014/11/04 08:20:57 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:20:57 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 08:20:57 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:20:57 LINE is seen,
2014/11/04 08:20:57 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,',
                     '09-Jul-2014 09:21:57 +0000'
                   ]
        };
2014/11/04 08:20:57 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ]
                    }
        };
2014/11/04 08:20:57 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:20:57 LINE is test
2014/11/04 08:20:57 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:20:57 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:20:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:57 LINE is uids: [10]
2014/11/04 08:20:57 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 08:20:57 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:20:57 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:20:57 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:20:57 LINE is result
2014/11/04 08:20:57 brackets: $VAR1 = '}';
2014/11/04 08:20:57 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 08:20:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:57 LINE is 1
2014/11/04 08:20:57 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:20:57 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 08:20:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:57 LINE is qqqq [123]
2014/11/04 08:20:57 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 08:20:57 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 08:20:57 LINE is 2
2014/11/04 08:20:57 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:20:57 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 08:20:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:57 LINE is qqqq [567]
2014/11/04 08:20:57 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 08:20:57 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:20:57 LINE is total
2014/11/04 08:20:57 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:20:57 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:20:57 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:20:57 LINE is inbox: [002, 005]
2014/11/04 08:20:57 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:20:57 LINE is test: [10]
2014/11/04 08:20:57 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:20:57 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:20:57 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 08:20:57 OK, parsing completed
2014/11/04 08:20:57 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005 ' => [
                                                                    'RECENT,',
                                                                    '09-Jul-2014 09:21:57 +0000'
                                                                  ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 08:20:59 mode = 1
2014/11/04 08:20:59 client connected to pid 13339
2014/11/04 08:20:59 <<<: 1 LOGIN test@localhost "123123123"
2014/11/04 08:20:59 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:20:59 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:20:59 >>>: OK Authentication successful
2014/11/04 08:20:59 <<<: 2 CAPABILITY
2014/11/04 08:20:59 >>>: * CAPABILITY FAKE IMAP
2014/11/04 08:20:59 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:20:59 >>>: OK CAPABILITY completed
2014/11/04 08:21:00 <<<: 3 XLIST "" *
2014/11/04 08:21:00 >>>: * XLIST () "/" "test"
2014/11/04 08:21:00 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/04 08:21:00 >>>: OK LIST completed
2014/11/04 08:21:00 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 08:21:00 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/04 08:21:00 >>>: OK STATUS completed
2014/11/04 08:21:00 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 08:21:00 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/04 08:21:00 >>>: OK STATUS completed
2014/11/04 08:21:00 <<<: 6 SELECT "Inbox"
2014/11/04 08:21:00 >>>: FLAGS ()
2014/11/04 08:21:00 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 08:21:00 >>>: 3 EXISTS
2014/11/04 08:21:00 >>>: 3 RECENT
2014/11/04 08:21:00 >>>: OK [UNSEEN 2]
2014/11/04 08:21:00 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/04 08:21:00 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/04 08:21:00 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 08:21:00 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 08:21:00 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS, $folder = Inbox
2014/11/04 08:21:00 $2 is not defined
2014/11/04 08:21:00  ******************************************* $VAR1 = undef;
2014/11/04 08:21:00 ______________________ 1 FETCH (UID 005 FLAGS ())
2014/11/04 08:21:20 <<<: 8 SELECT "test"
2014/11/04 08:21:20 >>>: FLAGS ()
2014/11/04 08:21:20 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 08:21:20 >>>: 2 EXISTS
2014/11/04 08:21:20 >>>: 2 RECENT
2014/11/04 08:21:20 >>>: OK [UNSEEN 2]
2014/11/04 08:21:20 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/04 08:21:20 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/04 08:21:20 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 08:21:20 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 08:21:20 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS, $folder = test
2014/11/04 08:21:20 $2 is not defined
2014/11/04 08:21:20  ******************************************* $VAR1 = undef;
2014/11/04 08:21:20 ______________________ 1 FETCH (UID 005 FLAGS ())
2014/11/04 08:21:40 <<<: 10 LOGOUT
2014/11/04 08:22:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:06 LINE is imap
2014/11/04 08:22:06 brackets: $VAR1 = '}';
2014/11/04 08:22:06 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 08:22:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:06 LINE is login:
2014/11/04 08:22:06 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:22:06 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 08:22:06 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:22:06 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:22:06 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:22:06 LINE is capability
2014/11/04 08:22:06 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:22:06 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:22:06 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:22:06 LINE is * CAPABILITY FAKE IMAP
2014/11/04 08:22:06 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:22:06 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:22:06 LINE is test
2014/11/04 08:22:06 brackets: $VAR1 = ']';
2014/11/04 08:22:06 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:22:06 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:22:06 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:22:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:06 LINE is Inbox: 
2014/11/04 08:22:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:22:06 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 08:22:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:06 LINE is uids
2014/11/04 08:22:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:22:06 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:22:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:06 LINE is 001 [seen, recent],
2014/11/04 08:22:06 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:22:06 LINE is 003 [recent],
2014/11/04 08:22:06 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:22:06 LINE is 005 
2014/11/04 08:22:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:22:06 it [] before: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:22:06 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:22:06 LINE is RECENT,
2014/11/04 08:22:06 it {} after: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [
                      'RECENT,',
                      '09-Jul-2014 09:21:57 +0000'
                    ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:22:06 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:22:06 LINE is flags [ hashnochildren, noselect]
2014/11/04 08:22:06 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:22:06 LINE is uidvalidity : 13123
2014/11/04 08:22:06 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:22:06 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:22:06 LINE is test
2014/11/04 08:22:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:22:06 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:22:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:06 LINE is uids
2014/11/04 08:22:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:22:06 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:22:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:06 LINE is 10 [recent],
2014/11/04 08:22:06 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:22:06 LINE is 11 [recent],
2014/11/04 08:22:06 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:22:06 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 08:22:06 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:22:06 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:22:06 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:22:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:06 LINE is inbox
2014/11/04 08:22:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:22:06 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 08:22:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:06 LINE is uids
2014/11/04 08:22:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:22:06 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:22:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:06 LINE is 002 [seen,answered],
2014/11/04 08:22:06 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 08:22:06 LINE is 005
2014/11/04 08:22:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:22:06 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 08:22:06 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:22:06 LINE is seen,
2014/11/04 08:22:06 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,',
                     '09-Jul-2014 09:21:57 +0000'
                   ]
        };
2014/11/04 08:22:06 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ]
                    }
        };
2014/11/04 08:22:06 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:22:06 LINE is test
2014/11/04 08:22:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:22:06 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:22:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:06 LINE is uids: [10]
2014/11/04 08:22:06 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 08:22:06 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:22:06 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:22:06 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:22:06 LINE is result
2014/11/04 08:22:06 brackets: $VAR1 = '}';
2014/11/04 08:22:06 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 08:22:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:06 LINE is 1
2014/11/04 08:22:06 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:22:06 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 08:22:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:06 LINE is qqqq [123]
2014/11/04 08:22:06 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 08:22:06 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 08:22:06 LINE is 2
2014/11/04 08:22:06 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:22:06 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 08:22:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:06 LINE is qqqq [567]
2014/11/04 08:22:06 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 08:22:06 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:22:06 LINE is total
2014/11/04 08:22:06 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:22:06 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:22:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:06 LINE is inbox: [002, 005]
2014/11/04 08:22:06 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:22:06 LINE is test: [10]
2014/11/04 08:22:06 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:22:06 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:22:06 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 08:22:06 OK, parsing completed
2014/11/04 08:22:06 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005 ' => [
                                                                    'RECENT,',
                                                                    '09-Jul-2014 09:21:57 +0000'
                                                                  ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 08:22:09 mode = 1
2014/11/04 08:22:09 client connected to pid 13625
2014/11/04 08:22:09 <<<: 1 LOGIN test@localhost "123123123"
2014/11/04 08:22:09 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:22:09 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:22:09 >>>: OK Authentication successful
2014/11/04 08:22:09 <<<: 2 CAPABILITY
2014/11/04 08:22:09 >>>: * CAPABILITY FAKE IMAP
2014/11/04 08:22:09 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:22:09 >>>: OK CAPABILITY completed
2014/11/04 08:22:09 <<<: 3 XLIST "" *
2014/11/04 08:22:09 >>>: * XLIST () "/" "test"
2014/11/04 08:22:09 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/04 08:22:09 >>>: OK LIST completed
2014/11/04 08:22:09 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 08:22:09 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/04 08:22:09 >>>: OK STATUS completed
2014/11/04 08:22:09 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 08:22:09 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/04 08:22:09 >>>: OK STATUS completed
2014/11/04 08:22:09 <<<: 6 SELECT "Inbox"
2014/11/04 08:22:09 >>>: FLAGS ()
2014/11/04 08:22:09 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 08:22:09 >>>: 3 EXISTS
2014/11/04 08:22:09 >>>: 3 RECENT
2014/11/04 08:22:09 >>>: OK [UNSEEN 2]
2014/11/04 08:22:09 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/04 08:22:09 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/04 08:22:09 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 08:22:09 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 08:22:09 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS, $folder = Inbox
2014/11/04 08:22:09 $2 is not defined
2014/11/04 08:22:09  ******************************************* 
2014/11/04 08:22:09 ______________________ 1 FETCH (UID 005 FLAGS ())
2014/11/04 08:22:29 <<<: 8 SELECT "test"
2014/11/04 08:22:29 >>>: FLAGS ()
2014/11/04 08:22:29 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 08:22:29 >>>: 2 EXISTS
2014/11/04 08:22:29 >>>: 2 RECENT
2014/11/04 08:22:29 >>>: OK [UNSEEN 2]
2014/11/04 08:22:29 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/04 08:22:29 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/04 08:22:29 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 08:22:29 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 08:22:29 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS, $folder = test
2014/11/04 08:22:29 $2 is not defined
2014/11/04 08:22:29  ******************************************* 
2014/11/04 08:22:29 ______________________ 1 FETCH (UID 005 FLAGS ())
2014/11/04 08:22:49 <<<: 10 LOGOUT
2014/11/04 08:22:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:55 LINE is imap
2014/11/04 08:22:55 brackets: $VAR1 = '}';
2014/11/04 08:22:55 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 08:22:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:55 LINE is login:
2014/11/04 08:22:55 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:22:55 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 08:22:55 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:22:55 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:22:55 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:22:55 LINE is capability
2014/11/04 08:22:55 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:22:55 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:22:55 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:22:55 LINE is * CAPABILITY FAKE IMAP
2014/11/04 08:22:55 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:22:55 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:22:55 LINE is test
2014/11/04 08:22:55 brackets: $VAR1 = ']';
2014/11/04 08:22:55 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:22:55 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:22:55 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:22:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:55 LINE is Inbox: 
2014/11/04 08:22:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:22:55 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 08:22:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:55 LINE is uids
2014/11/04 08:22:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:22:55 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:22:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:55 LINE is 001 [seen, recent],
2014/11/04 08:22:55 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:22:55 LINE is 003 [recent],
2014/11/04 08:22:55 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:22:55 LINE is 005 
2014/11/04 08:22:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:22:55 it [] before: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:22:55 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:22:55 LINE is RECENT,
2014/11/04 08:22:55 it {} after: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [
                      'RECENT,',
                      '09-Jul-2014 09:21:57 +0000'
                    ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:22:55 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:22:55 LINE is flags [ hashnochildren, noselect]
2014/11/04 08:22:55 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:22:55 LINE is uidvalidity : 13123
2014/11/04 08:22:55 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:22:55 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:22:55 LINE is test
2014/11/04 08:22:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:22:55 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:22:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:55 LINE is uids
2014/11/04 08:22:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:22:55 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:22:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:55 LINE is 10 [recent],
2014/11/04 08:22:55 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:22:55 LINE is 11 [recent],
2014/11/04 08:22:55 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:22:55 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 08:22:55 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:22:55 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:22:55 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:22:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:55 LINE is inbox
2014/11/04 08:22:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:22:55 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 08:22:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:55 LINE is uids
2014/11/04 08:22:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:22:55 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:22:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:55 LINE is 002 [seen,answered],
2014/11/04 08:22:55 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 08:22:55 LINE is 005
2014/11/04 08:22:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:22:55 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 08:22:55 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:22:55 LINE is seen,
2014/11/04 08:22:55 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,',
                     '09-Jul-2014 09:21:57 +0000'
                   ]
        };
2014/11/04 08:22:55 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ]
                    }
        };
2014/11/04 08:22:55 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:22:55 LINE is test
2014/11/04 08:22:55 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:22:55 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:22:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:55 LINE is uids: [10]
2014/11/04 08:22:55 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 08:22:55 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:22:55 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:22:55 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:22:55 LINE is result
2014/11/04 08:22:55 brackets: $VAR1 = '}';
2014/11/04 08:22:55 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 08:22:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:55 LINE is 1
2014/11/04 08:22:55 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:22:55 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 08:22:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:55 LINE is qqqq [123]
2014/11/04 08:22:55 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 08:22:55 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 08:22:55 LINE is 2
2014/11/04 08:22:55 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:22:55 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 08:22:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:55 LINE is qqqq [567]
2014/11/04 08:22:55 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 08:22:55 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:22:55 LINE is total
2014/11/04 08:22:55 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:22:55 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:22:55 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:22:55 LINE is inbox: [002, 005]
2014/11/04 08:22:55 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:22:55 LINE is test: [10]
2014/11/04 08:22:55 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:22:55 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:22:55 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 08:22:55 OK, parsing completed
2014/11/04 08:22:55 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005 ' => [
                                                                    'RECENT,',
                                                                    '09-Jul-2014 09:21:57 +0000'
                                                                  ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 08:23:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:06 LINE is imap
2014/11/04 08:23:06 brackets: $VAR1 = '}';
2014/11/04 08:23:06 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 08:23:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:06 LINE is login:
2014/11/04 08:23:06 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:23:06 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 08:23:06 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:23:06 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:23:06 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:23:06 LINE is capability
2014/11/04 08:23:06 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:23:06 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:23:06 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:23:06 LINE is * CAPABILITY FAKE IMAP
2014/11/04 08:23:06 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:23:06 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:23:06 LINE is test
2014/11/04 08:23:06 brackets: $VAR1 = ']';
2014/11/04 08:23:06 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:23:06 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:23:06 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:23:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:06 LINE is Inbox: 
2014/11/04 08:23:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:23:06 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 08:23:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:06 LINE is uids
2014/11/04 08:23:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:23:06 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:23:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:06 LINE is 001 [seen, recent],
2014/11/04 08:23:06 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:23:06 LINE is 003 [recent],
2014/11/04 08:23:06 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:23:06 LINE is 005 
2014/11/04 08:23:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:23:06 it [] before: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:23:06 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:23:06 LINE is RECENT,
2014/11/04 08:23:06 it {} after: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [
                      'RECENT,',
                      '09-Jul-2014 09:21:57 +0000'
                    ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:23:06 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:23:06 LINE is flags [ hashnochildren, noselect]
2014/11/04 08:23:06 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:23:06 LINE is uidvalidity : 13123
2014/11/04 08:23:06 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:23:06 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:23:06 LINE is test
2014/11/04 08:23:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:23:06 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:23:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:06 LINE is uids
2014/11/04 08:23:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:23:06 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:23:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:06 LINE is 10 [recent],
2014/11/04 08:23:06 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:23:06 LINE is 11 [recent],
2014/11/04 08:23:06 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:23:06 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 08:23:06 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:23:06 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:23:06 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:23:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:06 LINE is inbox
2014/11/04 08:23:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:23:06 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 08:23:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:06 LINE is uids
2014/11/04 08:23:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:23:06 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:23:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:06 LINE is 002 [seen,answered],
2014/11/04 08:23:06 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 08:23:06 LINE is 005
2014/11/04 08:23:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:23:06 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 08:23:06 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:23:06 LINE is seen,
2014/11/04 08:23:06 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,',
                     '09-Jul-2014 09:21:57 +0000'
                   ]
        };
2014/11/04 08:23:06 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ]
                    }
        };
2014/11/04 08:23:06 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:23:06 LINE is test
2014/11/04 08:23:06 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:23:06 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:23:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:06 LINE is uids: [10]
2014/11/04 08:23:06 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 08:23:06 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:23:06 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:23:06 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:23:06 LINE is result
2014/11/04 08:23:06 brackets: $VAR1 = '}';
2014/11/04 08:23:06 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 08:23:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:06 LINE is 1
2014/11/04 08:23:06 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:23:06 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 08:23:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:06 LINE is qqqq [123]
2014/11/04 08:23:06 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 08:23:06 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 08:23:06 LINE is 2
2014/11/04 08:23:06 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:23:06 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 08:23:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:06 LINE is qqqq [567]
2014/11/04 08:23:06 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 08:23:06 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:23:06 LINE is total
2014/11/04 08:23:06 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:23:06 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:23:06 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:06 LINE is inbox: [002, 005]
2014/11/04 08:23:06 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:23:06 LINE is test: [10]
2014/11/04 08:23:06 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:23:06 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:23:06 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 08:23:06 OK, parsing completed
2014/11/04 08:23:06 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005 ' => [
                                                                    'RECENT,',
                                                                    '09-Jul-2014 09:21:57 +0000'
                                                                  ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 08:23:09 mode = 1
2014/11/04 08:23:09 client connected to pid 13803
2014/11/04 08:23:09 <<<: 1 LOGIN test@localhost "123123123"
2014/11/04 08:23:09 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:23:09 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:23:09 >>>: OK Authentication successful
2014/11/04 08:23:09 <<<: 2 CAPABILITY
2014/11/04 08:23:09 >>>: * CAPABILITY FAKE IMAP
2014/11/04 08:23:09 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:23:09 >>>: OK CAPABILITY completed
2014/11/04 08:23:09 <<<: 3 XLIST "" *
2014/11/04 08:23:09 >>>: * XLIST () "/" "test"
2014/11/04 08:23:09 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/04 08:23:09 >>>: OK LIST completed
2014/11/04 08:23:09 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 08:23:09 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/04 08:23:09 >>>: OK STATUS completed
2014/11/04 08:23:09 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 08:23:09 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/04 08:23:09 >>>: OK STATUS completed
2014/11/04 08:23:09 <<<: 6 SELECT "Inbox"
2014/11/04 08:23:09 >>>: FLAGS ()
2014/11/04 08:23:09 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 08:23:09 >>>: 3 EXISTS
2014/11/04 08:23:09 >>>: 3 RECENT
2014/11/04 08:23:09 >>>: OK [UNSEEN 2]
2014/11/04 08:23:09 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/04 08:23:09 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/04 08:23:09 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 08:23:09 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 08:23:09 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS, $folder = Inbox
2014/11/04 08:23:09 $2 is not defined
2014/11/04 08:23:09 1) 005, 2)INTERNALDATE FLAGS ******************************************* 
2014/11/04 08:23:09 ______________________ 1 FETCH (UID 005 FLAGS ())
2014/11/04 08:23:29 <<<: 8 SELECT "test"
2014/11/04 08:23:29 >>>: FLAGS ()
2014/11/04 08:23:29 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 08:23:29 >>>: 2 EXISTS
2014/11/04 08:23:29 >>>: 2 RECENT
2014/11/04 08:23:29 >>>: OK [UNSEEN 2]
2014/11/04 08:23:29 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/04 08:23:29 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/04 08:23:29 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 08:23:29 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 08:23:29 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS, $folder = test
2014/11/04 08:23:29 $2 is not defined
2014/11/04 08:23:29 1) 005, 2)INTERNALDATE FLAGS ******************************************* 
2014/11/04 08:23:29 ______________________ 1 FETCH (UID 005 FLAGS ())
2014/11/04 08:23:49 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:49 LINE is imap
2014/11/04 08:23:49 brackets: $VAR1 = '}';
2014/11/04 08:23:49 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 08:23:49 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:49 LINE is login:
2014/11/04 08:23:49 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:23:49 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 08:23:49 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:23:49 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:23:49 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:23:49 LINE is capability
2014/11/04 08:23:49 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:23:49 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:23:49 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:23:49 LINE is * CAPABILITY FAKE IMAP
2014/11/04 08:23:49 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:23:49 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:23:49 LINE is test
2014/11/04 08:23:49 brackets: $VAR1 = ']';
2014/11/04 08:23:49 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:23:49 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:23:49 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:23:49 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:49 LINE is Inbox: 
2014/11/04 08:23:49 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:23:49 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 08:23:49 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:49 LINE is uids
2014/11/04 08:23:49 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:23:49 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:23:49 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:49 LINE is 001 [seen, recent],
2014/11/04 08:23:49 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:23:49 LINE is 003 [recent],
2014/11/04 08:23:49 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:23:49 LINE is 005 
2014/11/04 08:23:49 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:23:49 it [] before: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:23:49 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:23:49 LINE is RECENT,
2014/11/04 08:23:49 it {} after: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [
                      'RECENT,',
                      '09-Jul-2014 09:21:57 +0000'
                    ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:23:49 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:23:49 LINE is flags [ hashnochildren, noselect]
2014/11/04 08:23:49 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:23:49 LINE is uidvalidity : 13123
2014/11/04 08:23:49 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:23:49 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:23:49 LINE is test
2014/11/04 08:23:49 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:23:49 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:23:49 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:49 LINE is uids
2014/11/04 08:23:49 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:23:49 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:23:49 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:49 LINE is 10 [recent],
2014/11/04 08:23:49 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:23:49 LINE is 11 [recent],
2014/11/04 08:23:49 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:23:49 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 08:23:49 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:23:49 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:23:49 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:23:49 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:49 LINE is inbox
2014/11/04 08:23:49 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:23:49 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 08:23:49 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:49 LINE is uids
2014/11/04 08:23:49 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:23:49 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:23:49 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:49 LINE is 002 [seen,answered],
2014/11/04 08:23:49 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 08:23:49 LINE is 005
2014/11/04 08:23:49 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:23:49 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 08:23:49 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:23:49 LINE is seen,
2014/11/04 08:23:49 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,',
                     '09-Jul-2014 09:21:57 +0000'
                   ]
        };
2014/11/04 08:23:49 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ]
                    }
        };
2014/11/04 08:23:49 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:23:49 LINE is test
2014/11/04 08:23:49 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:23:49 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:23:49 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:49 LINE is uids: [10]
2014/11/04 08:23:49 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 08:23:49 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:23:49 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:23:49 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:23:49 LINE is result
2014/11/04 08:23:49 brackets: $VAR1 = '}';
2014/11/04 08:23:49 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 08:23:49 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:49 LINE is 1
2014/11/04 08:23:49 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:23:49 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 08:23:49 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:49 LINE is qqqq [123]
2014/11/04 08:23:49 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 08:23:49 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 08:23:49 LINE is 2
2014/11/04 08:23:49 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:23:49 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 08:23:49 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:49 LINE is qqqq [567]
2014/11/04 08:23:49 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 08:23:49 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:23:49 LINE is total
2014/11/04 08:23:49 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:23:49 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:23:49 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:49 LINE is inbox: [002, 005]
2014/11/04 08:23:49 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:23:49 LINE is test: [10]
2014/11/04 08:23:49 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:23:49 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:23:49 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 08:23:49 OK, parsing completed
2014/11/04 08:23:49 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005 ' => [
                                                                    'RECENT,',
                                                                    '09-Jul-2014 09:21:57 +0000'
                                                                  ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 08:23:49 <<<: 10 LOGOUT
2014/11/04 08:23:58 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:58 LINE is imap
2014/11/04 08:23:58 brackets: $VAR1 = '}';
2014/11/04 08:23:58 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 08:23:58 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:58 LINE is login:
2014/11/04 08:23:58 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:23:58 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 08:23:58 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:23:58 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:23:58 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:23:58 LINE is capability
2014/11/04 08:23:58 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:23:58 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:23:58 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:23:58 LINE is * CAPABILITY FAKE IMAP
2014/11/04 08:23:58 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:23:58 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:23:58 LINE is test
2014/11/04 08:23:58 brackets: $VAR1 = ']';
2014/11/04 08:23:58 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:23:58 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:23:58 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:23:58 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:58 LINE is Inbox: 
2014/11/04 08:23:58 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:23:58 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 08:23:58 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:58 LINE is uids
2014/11/04 08:23:58 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:23:58 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:23:58 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:58 LINE is 001 [seen, recent],
2014/11/04 08:23:58 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:23:58 LINE is 003 [recent],
2014/11/04 08:23:58 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:23:58 LINE is 005 
2014/11/04 08:23:58 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:23:58 it [] before: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:23:58 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:23:58 LINE is RECENT,
2014/11/04 08:23:58 it {} after: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005 ' => [
                      'RECENT,',
                      '09-Jul-2014 09:21:57 +0000'
                    ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:23:58 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:23:58 LINE is flags [ hashnochildren, noselect]
2014/11/04 08:23:58 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:23:58 LINE is uidvalidity : 13123
2014/11/04 08:23:58 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005 ' => [
                                  'RECENT,',
                                  '09-Jul-2014 09:21:57 +0000'
                                ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:23:58 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:23:58 LINE is test
2014/11/04 08:23:58 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:23:58 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:23:58 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:58 LINE is uids
2014/11/04 08:23:58 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:23:58 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:23:58 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:58 LINE is 10 [recent],
2014/11/04 08:23:58 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:23:58 LINE is 11 [recent],
2014/11/04 08:23:58 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:23:58 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 08:23:58 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005 ' => [
                                               'RECENT,',
                                               '09-Jul-2014 09:21:57 +0000'
                                             ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:23:58 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:23:58 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:23:58 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:58 LINE is inbox
2014/11/04 08:23:58 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:23:58 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 08:23:58 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:58 LINE is uids
2014/11/04 08:23:58 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:23:58 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:23:58 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:58 LINE is 002 [seen,answered],
2014/11/04 08:23:58 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 08:23:58 LINE is 005
2014/11/04 08:23:58 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:23:58 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 08:23:58 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:23:58 LINE is seen,
2014/11/04 08:23:58 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,',
                     '09-Jul-2014 09:21:57 +0000'
                   ]
        };
2014/11/04 08:23:58 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ]
                    }
        };
2014/11/04 08:23:58 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:23:58 LINE is test
2014/11/04 08:23:58 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:23:58 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:23:58 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:58 LINE is uids: [10]
2014/11/04 08:23:58 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 08:23:58 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:23:58 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005 ' => [
                                                 'RECENT,',
                                                 '09-Jul-2014 09:21:57 +0000'
                                               ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:23:58 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:23:58 LINE is result
2014/11/04 08:23:58 brackets: $VAR1 = '}';
2014/11/04 08:23:58 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 08:23:58 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:58 LINE is 1
2014/11/04 08:23:58 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:23:58 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 08:23:58 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:58 LINE is qqqq [123]
2014/11/04 08:23:58 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 08:23:58 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 08:23:58 LINE is 2
2014/11/04 08:23:58 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:23:58 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 08:23:58 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:58 LINE is qqqq [567]
2014/11/04 08:23:58 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 08:23:58 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:23:58 LINE is total
2014/11/04 08:23:58 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:23:58 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:23:58 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:23:58 LINE is inbox: [002, 005]
2014/11/04 08:23:58 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:23:58 LINE is test: [10]
2014/11/04 08:23:58 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:23:58 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:23:58 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005 ' => [
                                                             'RECENT,',
                                                             '09-Jul-2014 09:21:57 +0000'
                                                           ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 08:23:58 OK, parsing completed
2014/11/04 08:23:58 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005 ' => [
                                                                    'RECENT,',
                                                                    '09-Jul-2014 09:21:57 +0000'
                                                                  ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 08:24:04 mode = 1
2014/11/04 08:24:04 client connected to pid 13970
2014/11/04 08:24:04 <<<: 1 LOGIN test@localhost "123123123"
2014/11/04 08:24:04 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:24:04 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:24:04 >>>: OK Authentication successful
2014/11/04 08:24:04 <<<: 2 CAPABILITY
2014/11/04 08:24:04 >>>: * CAPABILITY FAKE IMAP
2014/11/04 08:24:04 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:24:04 >>>: OK CAPABILITY completed
2014/11/04 08:24:04 <<<: 3 XLIST "" *
2014/11/04 08:24:04 >>>: * XLIST () "/" "test"
2014/11/04 08:24:04 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/04 08:24:04 >>>: OK LIST completed
2014/11/04 08:24:04 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 08:24:04 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/04 08:24:04 >>>: OK STATUS completed
2014/11/04 08:24:04 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 08:24:04 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/04 08:24:04 >>>: OK STATUS completed
2014/11/04 08:24:04 <<<: 6 SELECT "Inbox"
2014/11/04 08:24:04 >>>: FLAGS ()
2014/11/04 08:24:04 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 08:24:04 >>>: 3 EXISTS
2014/11/04 08:24:04 >>>: 3 RECENT
2014/11/04 08:24:04 >>>: OK [UNSEEN 2]
2014/11/04 08:24:04 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/04 08:24:04 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/04 08:24:04 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 08:24:04 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 08:24:04 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS, $folder = Inbox
2014/11/04 08:24:04 $2 is not defined
2014/11/04 08:24:04 1) **005** 2)INTERNALDATE FLAGS ******************************************* 
2014/11/04 08:24:04 ______________________ 1 FETCH (UID 005 FLAGS ())
2014/11/04 08:24:24 <<<: 8 SELECT "test"
2014/11/04 08:24:24 >>>: FLAGS ()
2014/11/04 08:24:24 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 08:24:24 >>>: 2 EXISTS
2014/11/04 08:24:24 >>>: 2 RECENT
2014/11/04 08:24:24 >>>: OK [UNSEEN 2]
2014/11/04 08:24:24 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/04 08:24:24 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/04 08:24:24 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 08:24:24 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 08:24:24 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS, $folder = test
2014/11/04 08:24:24 $2 is not defined
2014/11/04 08:24:24 1) **005** 2)INTERNALDATE FLAGS ******************************************* 
2014/11/04 08:24:24 ______________________ 1 FETCH (UID 005 FLAGS ())
2014/11/04 08:24:44 <<<: 10 LOGOUT
2014/11/04 08:25:24 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:24 LINE is imap
2014/11/04 08:25:24 brackets: $VAR1 = '}';
2014/11/04 08:25:24 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 08:25:24 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:24 LINE is login:
2014/11/04 08:25:24 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:25:24 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 08:25:24 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:25:24 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:25:24 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:25:24 LINE is capability
2014/11/04 08:25:24 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:25:24 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:25:24 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:25:24 LINE is * CAPABILITY FAKE IMAP
2014/11/04 08:25:24 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:25:24 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:25:24 LINE is test
2014/11/04 08:25:24 brackets: $VAR1 = ']';
2014/11/04 08:25:24 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:25:24 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:25:24 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:25:24 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:24 LINE is Inbox: 
2014/11/04 08:25:24 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:25:24 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 08:25:24 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:24 LINE is uids
2014/11/04 08:25:24 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:25:24 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:25:24 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:24 LINE is 001 [seen, recent],
2014/11/04 08:25:24 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:25:24 LINE is 003 [recent],
2014/11/04 08:25:24 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:25:24 LINE is 005
2014/11/04 08:25:24 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:25:24 it [] before: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:25:24 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:25:24 LINE is RECENT,
2014/11/04 08:25:24 it {} after: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT,',
                     '09-Jul-2014 09:21:57 +0000'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:25:24 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:25:24 LINE is flags [ hashnochildren, noselect]
2014/11/04 08:25:24 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:25:24 LINE is uidvalidity : 13123
2014/11/04 08:25:24 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:25:24 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:25:24 LINE is test
2014/11/04 08:25:24 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:25:24 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:25:24 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:24 LINE is uids
2014/11/04 08:25:24 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:25:24 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:25:24 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:24 LINE is 10 [recent],
2014/11/04 08:25:24 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:25:24 LINE is 11 [recent],
2014/11/04 08:25:24 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:25:24 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 08:25:24 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:25:24 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:25:24 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:25:24 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:24 LINE is inbox
2014/11/04 08:25:24 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:25:24 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 08:25:24 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:24 LINE is uids
2014/11/04 08:25:24 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:25:24 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:25:24 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:24 LINE is 002 [seen,answered],
2014/11/04 08:25:24 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 08:25:24 LINE is 005
2014/11/04 08:25:24 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:25:24 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 08:25:24 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:25:24 LINE is seen,
2014/11/04 08:25:24 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,',
                     '09-Jul-2014 09:21:57 +0000'
                   ]
        };
2014/11/04 08:25:24 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ]
                    }
        };
2014/11/04 08:25:24 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:25:24 LINE is test
2014/11/04 08:25:24 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:25:24 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:25:24 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:24 LINE is uids: [10]
2014/11/04 08:25:24 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 08:25:24 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:25:24 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:25:24 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:25:24 LINE is result
2014/11/04 08:25:24 brackets: $VAR1 = '}';
2014/11/04 08:25:24 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 08:25:24 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:24 LINE is 1
2014/11/04 08:25:24 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:25:24 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 08:25:24 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:24 LINE is qqqq [123]
2014/11/04 08:25:24 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 08:25:24 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 08:25:24 LINE is 2
2014/11/04 08:25:24 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:25:24 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 08:25:24 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:24 LINE is qqqq [567]
2014/11/04 08:25:24 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 08:25:24 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:25:24 LINE is total
2014/11/04 08:25:24 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:25:24 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:25:24 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:24 LINE is inbox: [002, 005]
2014/11/04 08:25:24 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:25:24 LINE is test: [10]
2014/11/04 08:25:24 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:25:24 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:25:24 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 08:25:24 OK, parsing completed
2014/11/04 08:25:24 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 08:25:40 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:40 LINE is imap
2014/11/04 08:25:40 brackets: $VAR1 = '}';
2014/11/04 08:25:40 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 08:25:40 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:40 LINE is login:
2014/11/04 08:25:40 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:25:40 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 08:25:40 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:25:40 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:25:40 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:25:40 LINE is capability
2014/11/04 08:25:40 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:25:40 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:25:40 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:25:40 LINE is * CAPABILITY FAKE IMAP
2014/11/04 08:25:40 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:25:40 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:25:40 LINE is test
2014/11/04 08:25:40 brackets: $VAR1 = ']';
2014/11/04 08:25:40 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:25:40 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:25:40 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:25:40 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:40 LINE is Inbox: 
2014/11/04 08:25:40 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:25:40 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 08:25:40 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:40 LINE is uids
2014/11/04 08:25:40 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:25:40 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:25:40 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:40 LINE is 001 [seen, recent],
2014/11/04 08:25:40 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:25:40 LINE is 003 [recent],
2014/11/04 08:25:40 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:25:40 LINE is 005
2014/11/04 08:25:40 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:25:40 it [] before: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:25:40 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:25:40 LINE is RECENT,
2014/11/04 08:25:40 it {} after: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT,',
                     '09-Jul-2014 09:21:57 +0000'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:25:40 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:25:40 LINE is flags [ hashnochildren, noselect]
2014/11/04 08:25:40 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:25:40 LINE is uidvalidity : 13123
2014/11/04 08:25:40 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:25:40 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:25:40 LINE is test
2014/11/04 08:25:40 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:25:40 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:25:40 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:40 LINE is uids
2014/11/04 08:25:40 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:25:40 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:25:40 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:40 LINE is 10 [recent],
2014/11/04 08:25:40 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:25:40 LINE is 11 [recent],
2014/11/04 08:25:40 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:25:40 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 08:25:40 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:25:40 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:25:40 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:25:40 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:40 LINE is inbox
2014/11/04 08:25:40 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:25:40 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 08:25:40 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:40 LINE is uids
2014/11/04 08:25:40 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:25:40 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:25:40 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:40 LINE is 002 [seen,answered],
2014/11/04 08:25:40 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 08:25:40 LINE is 005
2014/11/04 08:25:40 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:25:40 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 08:25:40 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:25:40 LINE is seen,
2014/11/04 08:25:40 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,',
                     '09-Jul-2014 09:21:57 +0000'
                   ]
        };
2014/11/04 08:25:40 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ]
                    }
        };
2014/11/04 08:25:40 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:25:40 LINE is test
2014/11/04 08:25:40 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:25:40 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:25:40 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:40 LINE is uids: [10]
2014/11/04 08:25:40 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 08:25:40 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:25:40 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:25:40 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:25:40 LINE is result
2014/11/04 08:25:40 brackets: $VAR1 = '}';
2014/11/04 08:25:40 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 08:25:40 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:40 LINE is 1
2014/11/04 08:25:40 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:25:40 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 08:25:40 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:40 LINE is qqqq [123]
2014/11/04 08:25:40 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 08:25:40 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 08:25:40 LINE is 2
2014/11/04 08:25:40 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:25:40 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 08:25:40 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:40 LINE is qqqq [567]
2014/11/04 08:25:40 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 08:25:40 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:25:40 LINE is total
2014/11/04 08:25:40 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:25:40 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:25:40 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:25:40 LINE is inbox: [002, 005]
2014/11/04 08:25:40 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:25:40 LINE is test: [10]
2014/11/04 08:25:40 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:25:40 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:25:40 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 08:25:40 OK, parsing completed
2014/11/04 08:25:40 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 08:25:43 mode = 1
2014/11/04 08:25:43 client connected to pid 14266
2014/11/04 08:25:43 <<<: 1 LOGIN test@localhost "123123123"
2014/11/04 08:25:43 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:25:43 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:25:43 >>>: OK Authentication successful
2014/11/04 08:25:43 <<<: 2 CAPABILITY
2014/11/04 08:25:43 >>>: * CAPABILITY FAKE IMAP
2014/11/04 08:25:43 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:25:43 >>>: OK CAPABILITY completed
2014/11/04 08:25:43 <<<: 3 XLIST "" *
2014/11/04 08:25:43 >>>: * XLIST () "/" "test"
2014/11/04 08:25:43 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/04 08:25:43 >>>: OK LIST completed
2014/11/04 08:25:43 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 08:25:43 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/04 08:25:43 >>>: OK STATUS completed
2014/11/04 08:25:43 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 08:25:43 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/04 08:25:43 >>>: OK STATUS completed
2014/11/04 08:25:43 <<<: 6 SELECT "Inbox"
2014/11/04 08:25:43 >>>: FLAGS ()
2014/11/04 08:25:43 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 08:25:43 >>>: 3 EXISTS
2014/11/04 08:25:43 >>>: 3 RECENT
2014/11/04 08:25:43 >>>: OK [UNSEEN 2]
2014/11/04 08:25:43 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/04 08:25:43 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/04 08:25:43 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 08:25:43 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 08:25:43 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS, $folder = Inbox
2014/11/04 08:25:43 $2 is not defined
2014/11/04 08:25:43 1) **005** 2)INTERNALDATE FLAGS ******************************************* $VAR1 = 'RECENT,';
$VAR2 = '09-Jul-2014 09:21:57 +0000';
2014/11/04 08:25:43 flag = RECENT,
2014/11/04 08:25:43 flag = 09-Jul-2014 09:21:57 +0000
2014/11/04 08:25:43 ______________________ 1 FETCH (UID 005 INTERNALDATE "09-Jul-2014 09:21:57 +0000" FLAGS (\RECENT, ))
2014/11/04 08:26:03 <<<: 8 SELECT "test"
2014/11/04 08:26:03 >>>: FLAGS ()
2014/11/04 08:26:03 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 08:26:03 >>>: 2 EXISTS
2014/11/04 08:26:03 >>>: 2 RECENT
2014/11/04 08:26:03 >>>: OK [UNSEEN 2]
2014/11/04 08:26:03 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/04 08:26:03 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/04 08:26:03 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 08:26:03 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 08:26:03 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS, $folder = test
2014/11/04 08:26:03 $2 is not defined
2014/11/04 08:26:03 1) **005** 2)INTERNALDATE FLAGS ******************************************* 
2014/11/04 08:26:03 ______________________ 1 FETCH (UID 005 FLAGS ())
2014/11/04 08:26:23 <<<: 10 LOGOUT
2014/11/04 08:42:11 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:42:11 LINE is imap
2014/11/04 08:42:11 brackets: $VAR1 = '}';
2014/11/04 08:42:11 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 08:42:11 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:42:11 LINE is login:
2014/11/04 08:42:11 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:42:11 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 08:42:11 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:42:11 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:42:11 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:42:11 LINE is capability
2014/11/04 08:42:11 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 08:42:11 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:42:11 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:42:11 LINE is * CAPABILITY FAKE IMAP
2014/11/04 08:42:11 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:42:11 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:42:11 LINE is test
2014/11/04 08:42:11 brackets: $VAR1 = ']';
2014/11/04 08:42:11 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:42:11 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:42:11 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:42:11 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:42:11 LINE is Inbox: 
2014/11/04 08:42:11 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:42:11 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 08:42:11 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:42:11 LINE is uids
2014/11/04 08:42:11 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:42:11 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:42:11 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:42:11 LINE is 001 [seen, recent],
2014/11/04 08:42:11 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:42:11 LINE is 003 [recent],
2014/11/04 08:42:11 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:42:11 LINE is 005
2014/11/04 08:42:11 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:42:11 it [] before: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:42:11 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:42:11 LINE is RECENT,
2014/11/04 08:42:11 it {} after: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT,',
                     '09-Jul-2014 09:21:57 +0000'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 08:42:11 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:42:11 LINE is flags [ hashnochildren, noselect]
2014/11/04 08:42:11 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:42:11 LINE is uidvalidity : 13123
2014/11/04 08:42:11 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 08:42:11 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:42:11 LINE is test
2014/11/04 08:42:11 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:42:11 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:42:11 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:42:11 LINE is uids
2014/11/04 08:42:11 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:42:11 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:42:11 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:42:11 LINE is 10 [recent],
2014/11/04 08:42:11 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:42:11 LINE is 11 [recent],
2014/11/04 08:42:11 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 08:42:11 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 08:42:11 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 08:42:11 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:42:11 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 08:42:11 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:42:11 LINE is inbox
2014/11/04 08:42:11 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:42:11 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 08:42:11 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:42:11 LINE is uids
2014/11/04 08:42:11 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 08:42:11 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 08:42:11 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:42:11 LINE is 002 [seen,answered],
2014/11/04 08:42:11 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 08:42:11 LINE is 005
2014/11/04 08:42:11 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 08:42:11 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 08:42:11 FUNCTION do_parse,$VAR1 = [];
2014/11/04 08:42:11 LINE is seen,
2014/11/04 08:42:11 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,',
                     '09-Jul-2014 09:21:57 +0000'
                   ]
        };
2014/11/04 08:42:11 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ]
                    }
        };
2014/11/04 08:42:11 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:42:11 LINE is test
2014/11/04 08:42:11 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 08:42:11 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:42:11 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:42:11 LINE is uids: [10]
2014/11/04 08:42:11 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 08:42:11 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 08:42:11 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 08:42:11 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 08:42:11 LINE is result
2014/11/04 08:42:11 brackets: $VAR1 = '}';
2014/11/04 08:42:11 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 08:42:11 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:42:11 LINE is 1
2014/11/04 08:42:11 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:42:11 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 08:42:11 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:42:11 LINE is qqqq [123]
2014/11/04 08:42:11 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 08:42:11 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 08:42:11 LINE is 2
2014/11/04 08:42:11 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:42:11 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 08:42:11 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:42:11 LINE is qqqq [567]
2014/11/04 08:42:11 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 08:42:11 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:42:11 LINE is total
2014/11/04 08:42:11 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 08:42:11 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:42:11 FUNCTION do_parse,$VAR1 = {};
2014/11/04 08:42:11 LINE is inbox: [002, 005]
2014/11/04 08:42:11 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:42:11 LINE is test: [10]
2014/11/04 08:42:11 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 08:42:11 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 08:42:11 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 08:42:11 OK, parsing completed
2014/11/04 08:42:11 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 08:42:14 mode = 1
2014/11/04 08:42:14 client connected to pid 17378
2014/11/04 08:42:14 <<<: 1 LOGIN test@localhost "123123123"
2014/11/04 08:42:14 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 08:42:14 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:42:14 >>>: OK Authentication successful
2014/11/04 08:42:14 <<<: 2 CAPABILITY
2014/11/04 08:42:14 >>>: * CAPABILITY FAKE IMAP
2014/11/04 08:42:14 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 08:42:14 >>>: OK CAPABILITY completed
2014/11/04 08:42:14 <<<: 3 XLIST "" *
2014/11/04 08:42:14 >>>: * XLIST () "/" "test"
2014/11/04 08:42:14 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/04 08:42:14 >>>: OK LIST completed
2014/11/04 08:42:14 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 08:42:14 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/04 08:42:14 >>>: OK STATUS completed
2014/11/04 08:42:14 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 08:42:14 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/04 08:42:14 >>>: OK STATUS completed
2014/11/04 08:42:14 <<<: 6 SELECT "Inbox"
2014/11/04 08:42:14 >>>: FLAGS ()
2014/11/04 08:42:14 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 08:42:14 >>>: 3 EXISTS
2014/11/04 08:42:14 >>>: 3 RECENT
2014/11/04 08:42:14 >>>: OK [UNSEEN 2]
2014/11/04 08:42:14 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/04 08:42:14 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/04 08:42:14 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 08:42:14 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 08:42:14 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS, $folder = Inbox
2014/11/04 08:42:14 $2 is not defined
2014/11/04 08:42:14 1) **005** 2)INTERNALDATE FLAGS ******************************************* $VAR1 = 'RECENT,';
$VAR2 = '09-Jul-2014 09:21:57 +0000';
2014/11/04 08:42:14 flag = RECENT,
2014/11/04 08:42:14 flag = 09-Jul-2014 09:21:57 +0000
2014/11/04 08:42:14 1) **005** 2)INTERNALDATE FLAGS ******************************************* $VAR1 = 'RECENT,';
$VAR2 = '09-Jul-2014 09:21:57 +0000';
2014/11/04 08:42:14 flag = RECENT,
2014/11/04 08:42:14 flag = 09-Jul-2014 09:21:57 +0000
2014/11/04 08:42:14 >>>: 2 FETCH (UID 005 INTERNALDATE "09-Jul-2014 09:21:57 +0000" FLAGS (\RECENT, ))
2014/11/04 08:42:14 1) **005** 2)INTERNALDATE FLAGS ******************************************* $VAR1 = 'RECENT,';
$VAR2 = '09-Jul-2014 09:21:57 +0000';
2014/11/04 08:42:14 flag = RECENT,
2014/11/04 08:42:14 flag = 09-Jul-2014 09:21:57 +0000
2014/11/04 08:42:14 >>>: OK FETCH done
2014/11/04 08:42:34 <<<: 8 SELECT "test"
2014/11/04 08:42:34 >>>: FLAGS ()
2014/11/04 08:42:34 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 08:42:34 >>>: 2 EXISTS
2014/11/04 08:42:34 >>>: 2 RECENT
2014/11/04 08:42:34 >>>: OK [UNSEEN 2]
2014/11/04 08:42:34 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/04 08:42:34 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/04 08:42:34 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 08:42:34 <<<: 9 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 08:42:34 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS, $folder = test
2014/11/04 08:42:34 $2 is not defined
2014/11/04 08:42:34 1) **005** 2)INTERNALDATE FLAGS ******************************************* 
2014/11/04 08:42:34 1) **005** 2)INTERNALDATE FLAGS ******************************************* 
2014/11/04 08:42:34 >>>: 2 FETCH (UID 005 FLAGS ())
2014/11/04 08:42:34 1) **005** 2)INTERNALDATE FLAGS ******************************************* 
2014/11/04 08:42:34 >>>: OK FETCH done
2014/11/04 08:42:54 <<<: 10 LOGOUT
2014/11/04 09:10:15 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:10:15 LINE is imap
2014/11/04 09:10:15 brackets: $VAR1 = '}';
2014/11/04 09:10:15 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 09:10:15 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:10:15 LINE is login:
2014/11/04 09:10:15 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 09:10:15 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 09:10:15 FUNCTION do_parse,$VAR1 = [];
2014/11/04 09:10:15 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 09:10:15 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 09:10:15 LINE is capability
2014/11/04 09:10:15 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 09:10:15 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 09:10:15 FUNCTION do_parse,$VAR1 = [];
2014/11/04 09:10:15 LINE is * CAPABILITY FAKE IMAP
2014/11/04 09:10:15 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 09:10:15 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 09:10:15 LINE is test
2014/11/04 09:10:15 brackets: $VAR1 = ']';
2014/11/04 09:10:15 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 09:10:15 FUNCTION do_parse,$VAR1 = [];
2014/11/04 09:10:15 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 09:10:15 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:10:15 LINE is Inbox: 
2014/11/04 09:10:15 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 09:10:15 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 09:10:15 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:10:15 LINE is uids
2014/11/04 09:10:15 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 09:10:15 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 09:10:15 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:10:15 LINE is 001 [seen, recent],
2014/11/04 09:10:15 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 09:10:15 LINE is 003 [recent],
2014/11/04 09:10:15 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 09:10:15 LINE is 005
2014/11/04 09:10:15 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 09:10:15 it [] before: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 09:10:15 FUNCTION do_parse,$VAR1 = [];
2014/11/04 09:10:15 LINE is RECENT,
2014/11/04 09:10:15 it {} after: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT,',
                     '09-Jul-2014 09:21:57 +0000'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 09:10:15 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 09:10:15 LINE is flags [ hashnochildren, noselect]
2014/11/04 09:10:15 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 09:10:15 LINE is uidvalidity : 13123
2014/11/04 09:10:15 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 09:10:15 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 09:10:15 LINE is test
2014/11/04 09:10:15 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 09:10:15 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 09:10:15 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:10:15 LINE is uids
2014/11/04 09:10:15 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 09:10:15 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 09:10:15 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:10:15 LINE is 10 [recent],
2014/11/04 09:10:15 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 09:10:15 LINE is 11 [recent],
2014/11/04 09:10:15 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 09:10:15 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 09:10:15 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 09:10:15 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 09:10:15 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 09:10:15 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:10:15 LINE is inbox
2014/11/04 09:10:15 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 09:10:15 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 09:10:15 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:10:15 LINE is uids
2014/11/04 09:10:15 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 09:10:15 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 09:10:15 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:10:15 LINE is 002 [seen,answered],
2014/11/04 09:10:15 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 09:10:15 LINE is 005
2014/11/04 09:10:15 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 09:10:15 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 09:10:15 FUNCTION do_parse,$VAR1 = [];
2014/11/04 09:10:15 LINE is seen,
2014/11/04 09:10:15 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,',
                     '09-Jul-2014 09:21:57 +0000'
                   ]
        };
2014/11/04 09:10:15 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ]
                    }
        };
2014/11/04 09:10:15 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 09:10:15 LINE is test
2014/11/04 09:10:15 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 09:10:15 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 09:10:15 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:10:15 LINE is uids: [10]
2014/11/04 09:10:15 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 09:10:15 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 09:10:15 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 09:10:15 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 09:10:15 LINE is result
2014/11/04 09:10:15 brackets: $VAR1 = '}';
2014/11/04 09:10:15 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 09:10:15 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:10:15 LINE is 1
2014/11/04 09:10:15 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 09:10:15 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 09:10:15 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:10:15 LINE is qqqq [123]
2014/11/04 09:10:15 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 09:10:15 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 09:10:15 LINE is 2
2014/11/04 09:10:15 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 09:10:15 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 09:10:15 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:10:15 LINE is qqqq [567]
2014/11/04 09:10:15 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 09:10:15 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 09:10:15 LINE is total
2014/11/04 09:10:15 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 09:10:15 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 09:10:15 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:10:15 LINE is inbox: [002, 005]
2014/11/04 09:10:15 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 09:10:15 LINE is test: [10]
2014/11/04 09:10:15 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 09:10:15 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 09:10:15 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 09:10:15 OK, parsing completed
2014/11/04 09:10:15 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 09:10:19 mode = 1
2014/11/04 09:10:19 client connected to pid 22899
2014/11/04 09:10:19 <<<: 1 LOGIN test@localhost "123123123"
2014/11/04 09:10:19 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 09:10:19 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 09:10:19 >>>: OK Authentication successful
2014/11/04 09:10:19 <<<: 2 CAPABILITY
2014/11/04 09:10:19 >>>: * CAPABILITY FAKE IMAP
2014/11/04 09:10:19 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 09:10:19 >>>: OK CAPABILITY completed
2014/11/04 09:10:19 <<<: 3 XLIST "" *
2014/11/04 09:10:19 >>>: * XLIST () "/" "test"
2014/11/04 09:10:19 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/04 09:10:19 >>>: OK LIST completed
2014/11/04 09:10:19 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 09:10:19 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/04 09:10:19 >>>: OK STATUS completed
2014/11/04 09:10:19 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 09:10:19 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/04 09:10:19 >>>: OK STATUS completed
2014/11/04 09:10:19 <<<: 6 SELECT "Inbox"
2014/11/04 09:10:19 >>>: FLAGS ()
2014/11/04 09:10:19 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 09:10:19 >>>: 3 EXISTS
2014/11/04 09:10:19 >>>: 3 RECENT
2014/11/04 09:10:19 >>>: OK [UNSEEN 2]
2014/11/04 09:10:19 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/04 09:10:19 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/04 09:10:19 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 09:10:19 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 09:10:19 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS, $folder = Inbox
2014/11/04 09:10:19 $2 is not defined
2014/11/04 09:10:19 1) **005** 2)INTERNALDATE FLAGS ******************************************* $VAR1 = 'RECENT,';
$VAR2 = '09-Jul-2014 09:21:57 +0000';
2014/11/04 09:10:19 flag = RECENT,
2014/11/04 09:10:19 flag = 09-Jul-2014 09:21:57 +0000
2014/11/04 09:10:19 >>>: 1 FETCH (UID 005 INTERNALDATE "09-Jul-2014 09:21:57 +0000" FLAGS (\RECENT, ))
2014/11/04 09:10:19 1) **005** 2)INTERNALDATE FLAGS ******************************************* $VAR1 = 'RECENT,';
$VAR2 = '09-Jul-2014 09:21:57 +0000';
2014/11/04 09:10:19 flag = RECENT,
2014/11/04 09:10:19 flag = 09-Jul-2014 09:21:57 +0000
2014/11/04 09:10:19 >>>: OK FETCH done
2014/11/04 09:10:19 <<<: 8 UID FETCH 5 (BODY.PEEK[])
2014/11/04 09:10:39 <<<: 9 SELECT "test"
2014/11/04 09:10:39 >>>: FLAGS ()
2014/11/04 09:10:39 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 09:10:39 >>>: 2 EXISTS
2014/11/04 09:10:39 >>>: 2 RECENT
2014/11/04 09:10:39 >>>: OK [UNSEEN 2]
2014/11/04 09:10:39 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/04 09:10:39 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/04 09:10:39 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 09:10:39 <<<: 10 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 09:10:39 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS, $folder = test
2014/11/04 09:10:39 $2 is not defined
2014/11/04 09:10:39 1) **005** 2)INTERNALDATE FLAGS ******************************************* 
2014/11/04 09:10:39 >>>: 1 FETCH (UID 005 FLAGS ())
2014/11/04 09:10:39 1) **005** 2)INTERNALDATE FLAGS ******************************************* 
2014/11/04 09:10:39 >>>: OK FETCH done
2014/11/04 09:10:39 <<<: 11 LOGOUT
2014/11/04 09:11:42 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:11:42 LINE is imap
2014/11/04 09:11:42 brackets: $VAR1 = '}';
2014/11/04 09:11:42 it {} before: $VAR1 = {
          'imap' => {}
        };
2014/11/04 09:11:42 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:11:42 LINE is login:
2014/11/04 09:11:42 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 09:11:42 it [] before: $VAR1 = {
          'login' => []
        };
2014/11/04 09:11:42 FUNCTION do_parse,$VAR1 = [];
2014/11/04 09:11:42 LINE is * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 09:11:42 it {} after: $VAR1 = {
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 09:11:42 LINE is capability
2014/11/04 09:11:42 brackets: $VAR1 = '}';
$VAR2 = ']';
2014/11/04 09:11:42 it [] before: $VAR1 = {
          'capability' => [],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 09:11:42 FUNCTION do_parse,$VAR1 = [];
2014/11/04 09:11:42 LINE is * CAPABILITY FAKE IMAP
2014/11/04 09:11:42 it {} after: $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 09:11:42 it {} after: $VAR1 = {
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 09:11:42 LINE is test
2014/11/04 09:11:42 brackets: $VAR1 = ']';
2014/11/04 09:11:42 it [] before: $VAR1 = {
          'test' => [],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 09:11:42 FUNCTION do_parse,$VAR1 = [];
2014/11/04 09:11:42 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 09:11:42 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:11:42 LINE is Inbox: 
2014/11/04 09:11:42 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 09:11:42 it {} before: $VAR1 = {
          'Inbox' => {}
        };
2014/11/04 09:11:42 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:11:42 LINE is uids
2014/11/04 09:11:42 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 09:11:42 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 09:11:42 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:11:42 LINE is 001 [seen, recent],
2014/11/04 09:11:42 it {} after little push 1: $VAR1 = {
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 09:11:42 LINE is 003 [recent],
2014/11/04 09:11:42 it {} after little push 1: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 09:11:42 LINE is 005
2014/11/04 09:11:42 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 09:11:42 it [] before: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 09:11:42 FUNCTION do_parse,$VAR1 = [];
2014/11/04 09:11:42 LINE is RECENT,
2014/11/04 09:11:42 it {} after: $VAR1 = {
          '003' => [
                     'recent'
                   ],
          '005' => [
                     'RECENT,',
                     '09-Jul-2014 09:21:57 +0000'
                   ],
          '001' => [
                     'seen',
                     'recent'
                   ]
        };
2014/11/04 09:11:42 it {} after: $VAR1 = {
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 09:11:42 LINE is flags [ hashnochildren, noselect]
2014/11/04 09:11:42 it {} after little push 1: $VAR1 = {
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 09:11:42 LINE is uidvalidity : 13123
2014/11/04 09:11:42 it {} after little push 2: $VAR1 = {
          'uidvalidity' => '13123',
          'flags' => [
                       'hashnochildren',
                       'noselect'
                     ],
          'uids' => {
                      '003' => [
                                 'recent'
                               ],
                      '005' => [
                                 'RECENT,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ],
                      '001' => [
                                 'seen',
                                 'recent'
                               ]
                    }
        };
2014/11/04 09:11:42 it {} after: $VAR1 = {
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 09:11:42 LINE is test
2014/11/04 09:11:42 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 09:11:42 it {} before: $VAR1 = {
          'test' => {},
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 09:11:42 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:11:42 LINE is uids
2014/11/04 09:11:42 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 09:11:42 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 09:11:42 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:11:42 LINE is 10 [recent],
2014/11/04 09:11:42 it {} after little push 1: $VAR1 = {
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 09:11:42 LINE is 11 [recent],
2014/11/04 09:11:42 it {} after little push 1: $VAR1 = {
          '11' => [
                    'recent'
                  ],
          '10' => [
                    'recent'
                  ]
        };
2014/11/04 09:11:42 it {} after: $VAR1 = {
          'uids' => {
                      '11' => [
                                'recent'
                              ],
                      '10' => [
                                'recent'
                              ]
                    }
        };
2014/11/04 09:11:42 it {} after: $VAR1 = {
          'test' => {
                      'uids' => {
                                  '11' => [
                                            'recent'
                                          ],
                                  '10' => [
                                            'recent'
                                          ]
                                }
                    },
          'Inbox' => {
                       'uidvalidity' => '13123',
                       'flags' => [
                                    'hashnochildren',
                                    'noselect'
                                  ],
                       'uids' => {
                                   '003' => [
                                              'recent'
                                            ],
                                   '005' => [
                                              'RECENT,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ],
                                   '001' => [
                                              'seen',
                                              'recent'
                                            ]
                                 }
                     }
        };
2014/11/04 09:11:42 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 09:11:42 brackets: $VAR1 = ']';
$VAR2 = '}';
2014/11/04 09:11:42 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:11:42 LINE is inbox
2014/11/04 09:11:42 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 09:11:42 it {} before: $VAR1 = {
          'inbox' => {}
        };
2014/11/04 09:11:42 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:11:42 LINE is uids
2014/11/04 09:11:42 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
2014/11/04 09:11:42 it {} before: $VAR1 = {
          'uids' => {}
        };
2014/11/04 09:11:42 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:11:42 LINE is 002 [seen,answered],
2014/11/04 09:11:42 it {} after little push 1: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ]
        };
2014/11/04 09:11:42 LINE is 005
2014/11/04 09:11:42 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
$VAR4 = '}';
$VAR5 = ']';
2014/11/04 09:11:42 it [] before: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => []
        };
2014/11/04 09:11:42 FUNCTION do_parse,$VAR1 = [];
2014/11/04 09:11:42 LINE is seen,
2014/11/04 09:11:42 it {} after: $VAR1 = {
          '002' => [
                     'seen',
                     'answered'
                   ],
          '005' => [
                     'seen,',
                     'answered,',
                     '09-Jul-2014 09:21:57 +0000'
                   ]
        };
2014/11/04 09:11:42 it {} after: $VAR1 = {
          'uids' => {
                      '002' => [
                                 'seen',
                                 'answered'
                               ],
                      '005' => [
                                 'seen,',
                                 'answered,',
                                 '09-Jul-2014 09:21:57 +0000'
                               ]
                    }
        };
2014/11/04 09:11:42 it {} after: $VAR1 = {
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 09:11:42 LINE is test
2014/11/04 09:11:42 brackets: $VAR1 = ']';
$VAR2 = '}';
$VAR3 = '}';
2014/11/04 09:11:42 it {} before: $VAR1 = {
          'test' => {},
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 09:11:42 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:11:42 LINE is uids: [10]
2014/11/04 09:11:42 it {} after little push 1: $VAR1 = {
          'uids' => [
                      '10'
                    ]
        };
2014/11/04 09:11:42 it {} after: $VAR1 = {
          'test' => {
                      'uids' => [
                                  '10'
                                ]
                    },
          'inbox' => {
                       'uids' => {
                                   '002' => [
                                              'seen',
                                              'answered'
                                            ],
                                   '005' => [
                                              'seen,',
                                              'answered,',
                                              '09-Jul-2014 09:21:57 +0000'
                                            ]
                                 }
                     }
        };
2014/11/04 09:11:42 it {} after: $VAR1 = [
          {
            'test' => {
                        'uids' => {
                                    '11' => [
                                              'recent'
                                            ],
                                    '10' => [
                                              'recent'
                                            ]
                                  }
                      },
            'Inbox' => {
                         'uidvalidity' => '13123',
                         'flags' => [
                                      'hashnochildren',
                                      'noselect'
                                    ],
                         'uids' => {
                                     '003' => [
                                                'recent'
                                              ],
                                     '005' => [
                                                'RECENT,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ],
                                     '001' => [
                                                'seen',
                                                'recent'
                                              ]
                                   }
                       }
          },
          {
            'test' => {
                        'uids' => [
                                    '10'
                                  ]
                      },
            'inbox' => {
                         'uids' => {
                                     '002' => [
                                                'seen',
                                                'answered'
                                              ],
                                     '005' => [
                                                'seen,',
                                                'answered,',
                                                '09-Jul-2014 09:21:57 +0000'
                                              ]
                                   }
                       }
          }
        ];
2014/11/04 09:11:42 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    }
        };
2014/11/04 09:11:42 LINE is result
2014/11/04 09:11:42 brackets: $VAR1 = '}';
2014/11/04 09:11:42 it {} before: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {}
        };
2014/11/04 09:11:42 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:11:42 LINE is 1
2014/11/04 09:11:42 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 09:11:42 it {} before: $VAR1 = {
          '1' => {}
        };
2014/11/04 09:11:42 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:11:42 LINE is qqqq [123]
2014/11/04 09:11:42 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '123'
                    ]
        };
2014/11/04 09:11:42 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 }
        };
2014/11/04 09:11:42 LINE is 2
2014/11/04 09:11:42 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 09:11:42 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {}
        };
2014/11/04 09:11:42 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:11:42 LINE is qqqq [567]
2014/11/04 09:11:42 it {} after little push 1: $VAR1 = {
          'qqqq' => [
                      '567'
                    ]
        };
2014/11/04 09:11:42 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 09:11:42 LINE is total
2014/11/04 09:11:42 brackets: $VAR1 = '}';
$VAR2 = '}';
2014/11/04 09:11:42 it {} before: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {},
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 09:11:42 FUNCTION do_parse,$VAR1 = {};
2014/11/04 09:11:42 LINE is inbox: [002, 005]
2014/11/04 09:11:42 it {} after little push 1: $VAR1 = {
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 09:11:42 LINE is test: [10]
2014/11/04 09:11:42 it {} after little push 1: $VAR1 = {
          'test' => [
                      '10'
                    ],
          'inbox' => [
                       '002',
                       '005'
                     ]
        };
2014/11/04 09:11:42 it {} after: $VAR1 = {
          '1' => {
                   'qqqq' => [
                               '123'
                             ]
                 },
          'total' => {
                       'test' => [
                                   '10'
                                 ],
                       'inbox' => [
                                    '002',
                                    '005'
                                  ]
                     },
          '2' => {
                   'qqqq' => [
                               '567'
                             ]
                 }
        };
2014/11/04 09:11:42 it {} after: $VAR1 = {
          'test' => [
                      {
                        'test' => {
                                    'uids' => {
                                                '11' => [
                                                          'recent'
                                                        ],
                                                '10' => [
                                                          'recent'
                                                        ]
                                              }
                                  },
                        'Inbox' => {
                                     'uidvalidity' => '13123',
                                     'flags' => [
                                                  'hashnochildren',
                                                  'noselect'
                                                ],
                                     'uids' => {
                                                 '003' => [
                                                            'recent'
                                                          ],
                                                 '005' => [
                                                            'RECENT,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ],
                                                 '001' => [
                                                            'seen',
                                                            'recent'
                                                          ]
                                               }
                                   }
                      },
                      {
                        'test' => {
                                    'uids' => [
                                                '10'
                                              ]
                                  },
                        'inbox' => {
                                     'uids' => {
                                                 '002' => [
                                                            'seen',
                                                            'answered'
                                                          ],
                                                 '005' => [
                                                            'seen,',
                                                            'answered,',
                                                            '09-Jul-2014 09:21:57 +0000'
                                                          ]
                                               }
                                   }
                      }
                    ],
          'imap' => {
                      'capability' => [
                                        '* CAPABILITY FAKE IMAP',
                                        '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                        'OK CAPABILITY completed'
                                      ],
                      'login' => [
                                   '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                   'OK Authentication successful'
                                 ]
                    },
          'result' => {
                        '1' => {
                                 'qqqq' => [
                                             '123'
                                           ]
                               },
                        'total' => {
                                     'test' => [
                                                 '10'
                                               ],
                                     'inbox' => [
                                                  '002',
                                                  '005'
                                                ]
                                   },
                        '2' => {
                                 'qqqq' => [
                                             '567'
                                           ]
                               }
                      }
        };
2014/11/04 09:11:42 OK, parsing completed
2014/11/04 09:11:42 After all parse: $VAR1 = bless( {
                 'connection_number' => 0,
                 'test' => [
                             {
                               'test' => {
                                           'uids' => {
                                                       '11' => [
                                                                 'recent'
                                                               ],
                                                       '10' => [
                                                                 'recent'
                                                               ]
                                                     }
                                         },
                               'Inbox' => {
                                            'uidvalidity' => '13123',
                                            'flags' => [
                                                         'hashnochildren',
                                                         'noselect'
                                                       ],
                                            'uids' => {
                                                        '003' => [
                                                                   'recent'
                                                                 ],
                                                        '005' => [
                                                                   'RECENT,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ],
                                                        '001' => [
                                                                   'seen',
                                                                   'recent'
                                                                 ]
                                                      }
                                          }
                             },
                             {
                               'test' => {
                                           'uids' => [
                                                       '10'
                                                     ]
                                         },
                               'inbox' => {
                                            'uids' => {
                                                        '002' => [
                                                                   'seen',
                                                                   'answered'
                                                                 ],
                                                        '005' => [
                                                                   'seen,',
                                                                   'answered,',
                                                                   '09-Jul-2014 09:21:57 +0000'
                                                                 ]
                                                      }
                                          }
                             }
                           ],
                 'imap' => {
                             'capability' => [
                                               '* CAPABILITY FAKE IMAP',
                                               '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                                               'OK CAPABILITY completed'
                                             ],
                             'login' => [
                                          '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                                          'OK Authentication successful'
                                        ]
                           },
                 'client' => undef,
                 'selected_folder' => '',
                 'fetch_num' => {},
                 'init_params' => {
                                    'test' => 'tests/test2',
                                    'mode' => 'config',
                                    'silentmode' => 'on',
                                    'port' => '8877',
                                    'log_file' => 'log.log',
                                    'message' => 'message.eml',
                                    'host' => 'localhost',
                                    'pid_file' => '/tmp/server.pid',
                                    'log_level' => '3',
                                    'config' => 'config.conf'
                                  },
                 'server' => undef,
                 'logger' => bless( {
                                      'is_OFF' => sub { "DUMMY" },
                                      'is_DEBUG' => sub { "DUMMY" },
                                      'ERROR' => sub { "DUMMY" },
                                      'is_INFO' => sub { "DUMMY" },
                                      'layout' => undef,
                                      'category' => 'fake_imap_server',
                                      'is_TRACE' => sub { "DUMMY" },
                                      'DEBUG' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ALL' => sub { "DUMMY" },
                                      'additivity' => 1,
                                      'TRACE' => sub { "DUMMY" },
                                      'ALL' => $VAR1->{'logger'}{'TRACE'},
                                      'is_FATAL' => sub { "DUMMY" },
                                      'is_WARN' => sub { "DUMMY" },
                                      'FATAL' => $VAR1->{'logger'}{'ERROR'},
                                      'appender_names' => [],
                                      'WARN' => $VAR1->{'logger'}{'ERROR'},
                                      'INFO' => $VAR1->{'logger'}{'ERROR'},
                                      'level' => undef,
                                      'num_appenders' => 0,
                                      'OFF' => $VAR1->{'logger'}{'ERROR'},
                                      'is_ERROR' => sub { "DUMMY" }
                                    }, 'Log::Log4perl::Logger' )
               }, 'fake_imap_server' );
2014/11/04 09:11:45 mode = 1
2014/11/04 09:11:45 client connected to pid 23209
2014/11/04 09:11:45 <<<: 1 LOGIN test@localhost "123123123"
2014/11/04 09:11:45 123 $VAR1 = {
          'capability' => [
                            '* CAPABILITY FAKE IMAP',
                            '* CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE',
                            'OK CAPABILITY completed'
                          ],
          'login' => [
                       '* CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE',
                       'OK Authentication successful'
                     ]
        };
2014/11/04 09:11:45 >>>: * CAPABILITY IMAP ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 09:11:45 >>>: OK Authentication successful
2014/11/04 09:11:45 <<<: 2 CAPABILITY
2014/11/04 09:11:45 >>>: * CAPABILITY FAKE IMAP
2014/11/04 09:11:45 >>>: * CAPABILITY ID XLIST UIDPLUS UNSELECT MOVE
2014/11/04 09:11:45 >>>: OK CAPABILITY completed
2014/11/04 09:11:45 <<<: 3 XLIST "" *
2014/11/04 09:11:45 >>>: * XLIST () "/" "test"
2014/11/04 09:11:45 >>>: * XLIST (\hashnochildren \noselect) "/" "Inbox"
2014/11/04 09:11:45 >>>: OK LIST completed
2014/11/04 09:11:45 <<<: 4 STATUS "Inbox" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 09:11:45 >>>: STATUS "Inbox" (MESSAGES 3 RECENT 3 UIDNEXT 6 UIDVALIDITY 13123)
2014/11/04 09:11:45 >>>: OK STATUS completed
2014/11/04 09:11:45 <<<: 5 STATUS "test" (UIDNEXT MESSAGES UIDVALIDITY)
2014/11/04 09:11:45 >>>: STATUS "test" (MESSAGES 2 RECENT 2 UIDNEXT 12 UIDVALIDITY 123456)
2014/11/04 09:11:45 >>>: OK STATUS completed
2014/11/04 09:11:45 <<<: 6 SELECT "Inbox"
2014/11/04 09:11:45 >>>: FLAGS ()
2014/11/04 09:11:45 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 09:11:45 >>>: 3 EXISTS
2014/11/04 09:11:45 >>>: 3 RECENT
2014/11/04 09:11:45 >>>: OK [UNSEEN 2]
2014/11/04 09:11:45 >>>: OK [UIDVALIDITY 13123] UIDs valid
2014/11/04 09:11:45 >>>: OK [UIDNEXT 6] Predicted next UID
2014/11/04 09:11:45 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 09:11:45 <<<: 7 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 09:11:45 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS, $folder = Inbox
2014/11/04 09:11:45 $2 is not defined
2014/11/04 09:11:45 1) **005** 2)INTERNALDATE FLAGS ******************************************* $VAR1 = 'RECENT,';
$VAR2 = '09-Jul-2014 09:21:57 +0000';
2014/11/04 09:11:45 flag = RECENT,
2014/11/04 09:11:45 flag = 09-Jul-2014 09:21:57 +0000
2014/11/04 09:11:45 >>>: 1 FETCH (UID 005 INTERNALDATE "09-Jul-2014 09:21:57 +0000" FLAGS (\RECENT, ))
2014/11/04 09:11:45 1) **005** 2)INTERNALDATE FLAGS ******************************************* $VAR1 = 'RECENT,';
$VAR2 = '09-Jul-2014 09:21:57 +0000';
2014/11/04 09:11:45 flag = RECENT,
2014/11/04 09:11:45 flag = 09-Jul-2014 09:21:57 +0000
2014/11/04 09:11:45 >>>: OK FETCH done
2014/11/04 09:11:45 <<<: 8 UID FETCH 5 (BODY.PEEK[])
2014/11/04 09:12:05 <<<: 9 SELECT "test"
2014/11/04 09:12:05 >>>: FLAGS ()
2014/11/04 09:12:05 >>>: OK [PERMANENTFLAGS] ()
2014/11/04 09:12:05 >>>: 2 EXISTS
2014/11/04 09:12:05 >>>: 2 RECENT
2014/11/04 09:12:05 >>>: OK [UNSEEN 2]
2014/11/04 09:12:05 >>>: OK [UIDVALIDITY 123456] UIDs valid
2014/11/04 09:12:05 >>>: OK [UIDNEXT 12] Predicted next UID
2014/11/04 09:12:05 >>>: OK [READ-WRITE] SELECT completed
2014/11/04 09:12:05 <<<: 10 UID FETCH 1:* (INTERNALDATE FLAGS)
2014/11/04 09:12:05 OMNO    $1 = 005, $2 = , $3 = INTERNALDATE FLAGS, $folder = test
2014/11/04 09:12:05 $2 is not defined
2014/11/04 09:12:05 1) **005** 2)INTERNALDATE FLAGS ******************************************* 
2014/11/04 09:12:05 >>>: 1 FETCH (UID 005 FLAGS ())
2014/11/04 09:12:05 1) **005** 2)INTERNALDATE FLAGS ******************************************* 
2014/11/04 09:12:05 >>>: OK FETCH done
2014/11/04 09:12:05 <<<: 11 LOGOUT
